import { AbstractStream } from '@libp2p/utils/abstract-stream';
import { Uint8ArrayList } from 'uint8arraylist';
import type { DataChannelOptions } from './index.js';
import type { AbortOptions, ComponentLogger, Direction } from '@libp2p/interface';
import type { AbstractStreamInit } from '@libp2p/utils/abstract-stream';
export interface WebRTCStreamInit extends AbstractStreamInit, DataChannelOptions {
    /**
     * The network channel used for bidirectional peer-to-peer transfers of
     * arbitrary data
     *
     * {@link https://developer.mozilla.org/en-US/docs/Web/API/RTCDataChannel}
     */
    channel: RTCDataChannel;
    logger: ComponentLogger;
}
export declare class WebRTCStream extends AbstractStream {
    /**
     * The data channel used to send and receive data
     */
    private readonly channel;
    /**
     * push data from the underlying datachannel to the length prefix decoder
     * and then the protobuf decoder.
     */
    private readonly incomingData;
    private readonly maxBufferedAmount;
    private readonly bufferedAmountLowEventTimeout;
    /**
     * The maximum size of a message in bytes
     */
    private readonly maxMessageSize;
    /**
     * When this promise is resolved, the remote has sent us a FIN flag
     */
    private readonly receiveFinAck;
    private readonly finAckTimeout;
    private readonly openTimeout;
    private readonly closeController;
    constructor(init: WebRTCStreamInit);
    sendNewStream(): void;
    _sendMessage(data: Uint8ArrayList, checkBuffer?: boolean): Promise<void>;
    sendData(data: Uint8ArrayList): Promise<void>;
    sendReset(): Promise<void>;
    sendCloseWrite(options: AbortOptions): Promise<void>;
    sendCloseRead(): Promise<void>;
    /**
     * Handle incoming
     */
    private processIncomingProtobuf;
    private _sendFlag;
}
export interface WebRTCStreamOptions extends DataChannelOptions {
    /**
     * The network channel used for bidirectional peer-to-peer transfers of
     * arbitrary data
     *
     * {@link https://developer.mozilla.org/en-US/docs/Web/API/RTCDataChannel}
     */
    channel: RTCDataChannel;
    /**
     * The stream direction
     */
    direction: Direction;
    /**
     * A callback invoked when the channel ends
     */
    onEnd?(err?: Error | undefined): void;
    logger: ComponentLogger;
    /**
     * If true the underlying datachannel is being used to perform the noise
     * handshake during connection establishment
     */
    handshake?: boolean;
}
export declare function createStream(options: WebRTCStreamOptions): WebRTCStream;
//# sourceMappingURL=stream.d.ts.map