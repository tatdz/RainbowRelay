(function (root, factory) {(typeof module === 'object' && module.exports) ? module.exports = factory() : root.HeliaDelegatedRoutingV1HttpApiClient = factory()}(typeof self !== 'undefined' ? self : this, function () {
"use strict";var HeliaDelegatedRoutingV1HttpApiClient=(()=>{var nf=Object.create;var cn=Object.defineProperty;var of=Object.getOwnPropertyDescriptor;var sf=Object.getOwnPropertyNames;var af=Object.getPrototypeOf,cf=Object.prototype.hasOwnProperty;var As=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),Tt=(e,t)=>{for(var r in t)cn(e,r,{get:t[r],enumerable:!0})},Is=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of sf(t))!cf.call(e,o)&&o!==r&&cn(e,o,{get:()=>t[o],enumerable:!(n=of(t,o))||n.enumerable});return e};var go=(e,t,r)=>(r=e!=null?nf(af(e)):{},Is(t||!e||!e.__esModule?cn(r,"default",{value:e,enumerable:!0}):r,e)),uf=e=>Is(cn({},"__esModule",{value:!0}),e);var fs=As((Gw,us)=>{var jw=function(){typeof us<"u"&&(us.exports=x);var e=86400,t=3200,r=146097*t/400,n=e*r,o=1e3*n,i=864e13,s=4294967296,a=1e6,c="000000000",l=Math.trunc||function(g){var b=g-g%1;return b==0&&(g<0||g===0&&1/g!=1/0)?-0:b},u=x.prototype,f=(x.fromDate=function(g){return new x(+g)},x.fromInt64BE=P(0,1,2,3,0,4),x.fromInt64LE=P(3,2,1,0,4,0),x.fromString=function(k){var b,K=new x,k=(k+="").replace(/^\s*[+\-]?\d+/,function(V){var V=+V,v=1970+(V-1970)%400;return K.year=V-v,v}).replace(/(?:Z|([+\-]\d{2}):?(\d{2}))$/,function(_,V,v){return V<0&&(v*=-1),b=6e4*(60*+V+ +v),""}).replace(/\.\d+$/,function(_){return K.nano=+(_+c).substr(1,9),""}).split(/\D+/);if(1<k.length?k[1]--:k[1]=0,K.time=b=Date.UTC.apply(Date,k)-(b||0),isNaN(b))throw new TypeError("Invalid Date");return h(K)},x.fromTimeT=function(g){return U(g,0)},u.year=0,u.time=0,u.nano=0,u.addNano=function(g){return this.nano+=+g||0,this},u.getNano=function(){var g=h(this);return(g.time%1e3*a+ +g.nano+1e9)%1e9},u.getTimeT=function(){var b=h(this),g=Math.floor(b.time/1e3),b=b.year;return b&&(g+=b*r*e/t),g},u.getYear=function(){return this.toDate().getUTCFullYear()+this.year},u.toDate=function(){return S(h(this).time)},u.toJSON=function(){return this.toString().replace(/0{1,6}Z$/,"Z")},u.toString=function(g){var b=this,K=b.toDate(),k={H:function(){return D(K.getUTCHours())},L:function(){return N(K.getUTCMilliseconds(),3)},M:function(){return D(K.getUTCMinutes())},N:function(){return N(b.getNano(),9)},S:function(){return D(K.getUTCSeconds())},Y:function(){var _=b.getYear();return 999999<_?"+"+_:9999<_?"+"+N(_,6):0<=_?N(_,4):-999999<=_?"-"+N(-_,6):_},a:function(){return w[K.getUTCDay()]},b:function(){return d[K.getUTCMonth()]},d:function(){return D(K.getUTCDate())},e:function(){return function(_){return(9<_?"":" ")+(0|_)}(K.getUTCDate())},m:function(){return D(K.getUTCMonth()+1)}};return function _(V){return V.replace(/%./g,function(v){var T=v[1],A=B[T],T=k[T];return A?_(A):T?T():v})}(g||f)},u.writeInt64BE=y(0,1,2,3,0,4),u.writeInt64LE=y(3,2,1,0,4,0),"%Y-%m-%dT%H:%M:%S.%NZ"),d=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],w=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],B={"%":"%",F:"%Y-%m-%d",n:`
`,R:"%H:%M",T:"%H:%M:%S",t:"	",X:"%T",Z:"GMT",z:"+0000"};return x;function x(g,b,K){var k=this;if(!(k instanceof x))return new x(g,b,K);k.time=+g||0,k.nano=+b||0,k.year=+K||0,h(k)}function h(g){var b,K,k,_=g.year,V=g.time,v=g.nano,A=((v<0||a<=v)&&(v-=(K=Math.floor(v/a))*a,V+=K,K=1),_%t);return(V<-i||i<V||A)&&((b=l(V/o))&&(_+=b*t,V-=b*o),(k=S(V)).setUTCFullYear(A+k.getUTCFullYear()),k=(V=+k)+(b=l((_-=A)/t))*o,b&&-i<=k&&k<=i&&(_-=b*t,V=k),K=1),K&&(g.year=_,g.time=V,g.nano=v),g}function S(g){var b=new Date(0);return b.setTime(g),b}function U(_,k){_=+_||0;var K=l((k=(k|0)*s)/n)+l(_/n),k=k%n+_%n,_=l(k/n);return _&&(K+=_,k-=_*n),new x(1e3*k,0,K*t)}function y(g,b,K,k,_,V){return function(A,T){var p=h(this);A=A||new Array(8),O(A,T|=0);var I=Math.floor(p.time/1e3),p=p.year*(r*e/t),E=l(p/s)+l(I/s),p=p%s+I%s,I=Math.floor(p/s);return I&&(E+=I,p-=I*s),v(A,T+_,E),v(A,T+V,p),A};function v(A,T,E){A[T+g]=E>>24&255,A[T+b]=E>>16&255,A[T+K]=E>>8&255,A[T+k]=255&E}}function P(g,b,K,k,_,V){return function(A,T){O(A,T|=0);var E=v(A,T+_);return U(v(A,T+V),E)};function v(A,T){return 16777216*A[T+g]+(A[T+b]<<16|A[T+K]<<8|A[T+k])}}function O(g,b){if(g=g&&g.length,g==null)throw new TypeError("Invalid Buffer");if(g<b+8)throw new RangeError("Out of range")}function D(g){return(9<g?"":"0")+(0|g)}function N(g,b){return(c+(0|g)).substr(-b)}}()});var $u=As((O1,xs)=>{"use strict";var ep=Object.prototype.hasOwnProperty,At="~";function nn(){}Object.create&&(nn.prototype=Object.create(null),new nn().__proto__||(At=!1));function rp(e,t,r){this.fn=e,this.context=t,this.once=r||!1}function zu(e,t,r,n,o){if(typeof r!="function")throw new TypeError("The listener must be a function");var i=new rp(r,n||e,o),s=At?At+t:t;return e._events[s]?e._events[s].fn?e._events[s]=[e._events[s],i]:e._events[s].push(i):(e._events[s]=i,e._eventsCount++),e}function lo(e,t){--e._eventsCount===0?e._events=new nn:delete e._events[t]}function Et(){this._events=new nn,this._eventsCount=0}Et.prototype.eventNames=function(){var t=[],r,n;if(this._eventsCount===0)return t;for(n in r=this._events)ep.call(r,n)&&t.push(At?n.slice(1):n);return Object.getOwnPropertySymbols?t.concat(Object.getOwnPropertySymbols(r)):t};Et.prototype.listeners=function(t){var r=At?At+t:t,n=this._events[r];if(!n)return[];if(n.fn)return[n.fn];for(var o=0,i=n.length,s=new Array(i);o<i;o++)s[o]=n[o].fn;return s};Et.prototype.listenerCount=function(t){var r=At?At+t:t,n=this._events[r];return n?n.fn?1:n.length:0};Et.prototype.emit=function(t,r,n,o,i,s){var a=At?At+t:t;if(!this._events[a])return!1;var c=this._events[a],l=arguments.length,u,f;if(c.fn){switch(c.once&&this.removeListener(t,c.fn,void 0,!0),l){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,r),!0;case 3:return c.fn.call(c.context,r,n),!0;case 4:return c.fn.call(c.context,r,n,o),!0;case 5:return c.fn.call(c.context,r,n,o,i),!0;case 6:return c.fn.call(c.context,r,n,o,i,s),!0}for(f=1,u=new Array(l-1);f<l;f++)u[f-1]=arguments[f];c.fn.apply(c.context,u)}else{var d=c.length,w;for(f=0;f<d;f++)switch(c[f].once&&this.removeListener(t,c[f].fn,void 0,!0),l){case 1:c[f].fn.call(c[f].context);break;case 2:c[f].fn.call(c[f].context,r);break;case 3:c[f].fn.call(c[f].context,r,n);break;case 4:c[f].fn.call(c[f].context,r,n,o);break;default:if(!u)for(w=1,u=new Array(l-1);w<l;w++)u[w-1]=arguments[w];c[f].fn.apply(c[f].context,u)}}return!0};Et.prototype.on=function(t,r,n){return zu(this,t,r,n,!1)};Et.prototype.once=function(t,r,n){return zu(this,t,r,n,!0)};Et.prototype.removeListener=function(t,r,n,o){var i=At?At+t:t;if(!this._events[i])return this;if(!r)return lo(this,i),this;var s=this._events[i];if(s.fn)s.fn===r&&(!o||s.once)&&(!n||s.context===n)&&lo(this,i);else{for(var a=0,c=[],l=s.length;a<l;a++)(s[a].fn!==r||o&&!s[a].once||n&&s[a].context!==n)&&c.push(s[a]);c.length?this._events[i]=c.length===1?c[0]:c:lo(this,i)}return this};Et.prototype.removeAllListeners=function(t){var r;return t?(r=At?At+t:t,this._events[r]&&lo(this,r)):(this._events=new nn,this._eventsCount=0),this};Et.prototype.off=Et.prototype.removeListener;Et.prototype.addListener=Et.prototype.on;Et.prefixed=At;Et.EventEmitter=Et;typeof xs<"u"&&(xs.exports=Et)});var up={};Tt(up,{createDelegatedRoutingV1HttpApiClient:()=>cp});var Ts=Symbol.for("@libp2p/content-routing");var xo=Symbol.for("@libp2p/peer-id");var Bs=Symbol.for("@libp2p/peer-routing");var ct=class extends Error{static name="InvalidParametersError";constructor(t="Invalid parameters"){super(t),this.name="InvalidParametersError"}},$e=class extends Error{static name="InvalidPublicKeyError";constructor(t="Invalid public key"){super(t),this.name="InvalidPublicKeyError"}};var Jt=class extends Error{static name="NotFoundError";constructor(t="Not found"){super(t),this.name="NotFoundError"}};var un=class extends Error{static name="InvalidCIDError";constructor(t="Invalid CID"){super(t),this.name="InvalidCIDError"}},je=class extends Error{static name="InvalidMultihashError";constructor(t="Invalid Multihash"){super(t),this.name="InvalidMultihashError"}};var Ge=class extends Error{static name="UnsupportedKeyTypeError";constructor(t="Unsupported key type"){super(t),this.name="UnsupportedKeyTypeError"}};var vo={};Tt(vo,{base32:()=>qt,base32hex:()=>xf,base32hexpad:()=>bf,base32hexpadupper:()=>Ef,base32hexupper:()=>wf,base32pad:()=>yf,base32padupper:()=>gf,base32upper:()=>mf,base32z:()=>Sf});var mp=new Uint8Array(0);function Cs(e,t){if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(let r=0;r<e.byteLength;r++)if(e[r]!==t[r])return!1;return!0}function oe(e){if(e instanceof Uint8Array&&e.constructor.name==="Uint8Array")return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")}function _s(e){return new TextEncoder().encode(e)}function Us(e){return new TextDecoder().decode(e)}function ff(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var o=0;o<e.length;o++){var i=e.charAt(o),s=i.charCodeAt(0);if(r[s]!==255)throw new TypeError(i+" is ambiguous");r[s]=o}var a=e.length,c=e.charAt(0),l=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function f(B){if(B instanceof Uint8Array||(ArrayBuffer.isView(B)?B=new Uint8Array(B.buffer,B.byteOffset,B.byteLength):Array.isArray(B)&&(B=Uint8Array.from(B))),!(B instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(B.length===0)return"";for(var x=0,h=0,S=0,U=B.length;S!==U&&B[S]===0;)S++,x++;for(var y=(U-S)*u+1>>>0,P=new Uint8Array(y);S!==U;){for(var O=B[S],D=0,N=y-1;(O!==0||D<h)&&N!==-1;N--,D++)O+=256*P[N]>>>0,P[N]=O%a>>>0,O=O/a>>>0;if(O!==0)throw new Error("Non-zero carry");h=D,S++}for(var g=y-h;g!==y&&P[g]===0;)g++;for(var b=c.repeat(x);g<y;++g)b+=e.charAt(P[g]);return b}function d(B){if(typeof B!="string")throw new TypeError("Expected String");if(B.length===0)return new Uint8Array;var x=0;if(B[x]!==" "){for(var h=0,S=0;B[x]===c;)h++,x++;for(var U=(B.length-x)*l+1>>>0,y=new Uint8Array(U);B[x];){var P=r[B.charCodeAt(x)];if(P===255)return;for(var O=0,D=U-1;(P!==0||O<S)&&D!==-1;D--,O++)P+=a*y[D]>>>0,y[D]=P%256>>>0,P=P/256>>>0;if(P!==0)throw new Error("Non-zero carry");S=O,x++}if(B[x]!==" "){for(var N=U-S;N!==U&&y[N]===0;)N++;for(var g=new Uint8Array(h+(U-N)),b=h;N!==U;)g[b++]=y[N++];return g}}}function w(B){var x=d(B);if(x)return x;throw new Error(`Non-${t} character`)}return{encode:f,decodeUnsafe:d,decode:w}}var lf=ff,df=lf,Ns=df;var wo=class{name;prefix;baseEncode;constructor(t,r,n){this.name=t,this.prefix=r,this.baseEncode=n}encode(t){if(t instanceof Uint8Array)return`${this.prefix}${this.baseEncode(t)}`;throw Error("Unknown type, must be binary type")}},bo=class{name;prefix;baseDecode;prefixCodePoint;constructor(t,r,n){this.name=t,this.prefix=r;let o=r.codePointAt(0);if(o===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=o,this.baseDecode=n}decode(t){if(typeof t=="string"){if(t.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(t)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(t.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(t){return Ls(this,t)}},Eo=class{decoders;constructor(t){this.decoders=t}or(t){return Ls(this,t)}decode(t){let r=t[0],n=this.decoders[r];if(n!=null)return n.decode(t);throw RangeError(`Unable to decode multibase string ${JSON.stringify(t)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};function Ls(e,t){return new Eo({...e.decoders??{[e.prefix]:e},...t.decoders??{[t.prefix]:t}})}var So=class{name;prefix;baseEncode;baseDecode;encoder;decoder;constructor(t,r,n,o){this.name=t,this.prefix=r,this.baseEncode=n,this.baseDecode=o,this.encoder=new wo(t,r,n),this.decoder=new bo(t,r,o)}encode(t){return this.encoder.encode(t)}decode(t){return this.decoder.decode(t)}};function Ze({name:e,prefix:t,encode:r,decode:n}){return new So(e,t,r,n)}function ge({name:e,prefix:t,alphabet:r}){let{encode:n,decode:o}=Ns(r,e);return Ze({prefix:t,name:e,encode:n,decode:i=>oe(o(i))})}function hf(e,t,r,n){let o={};for(let u=0;u<t.length;++u)o[t[u]]=u;let i=e.length;for(;e[i-1]==="=";)--i;let s=new Uint8Array(i*r/8|0),a=0,c=0,l=0;for(let u=0;u<i;++u){let f=o[e[u]];if(f===void 0)throw new SyntaxError(`Non-${n} character`);c=c<<r|f,a+=r,a>=8&&(a-=8,s[l++]=255&c>>a)}if(a>=r||(255&c<<8-a)!==0)throw new SyntaxError("Unexpected end of data");return s}function pf(e,t,r){let n=t[t.length-1]==="=",o=(1<<r)-1,i="",s=0,a=0;for(let c=0;c<e.length;++c)for(a=a<<8|e[c],s+=8;s>r;)s-=r,i+=t[o&a>>s];if(s!==0&&(i+=t[o&a<<r-s]),n)for(;(i.length*r&7)!==0;)i+="=";return i}function ot({name:e,prefix:t,bitsPerChar:r,alphabet:n}){return Ze({prefix:t,name:e,encode(o){return pf(o,n,r)},decode(o){return hf(o,n,r,e)}})}var qt=ot({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),mf=ot({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),yf=ot({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),gf=ot({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),xf=ot({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),wf=ot({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),bf=ot({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Ef=ot({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Sf=ot({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var Ao={};Tt(Ao,{base58btc:()=>X,base58flickr:()=>vf});var X=ge({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),vf=ge({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var To={};Tt(To,{base64:()=>Io,base64pad:()=>Af,base64url:()=>If,base64urlpad:()=>Tf});var Io=ot({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),Af=ot({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),If=ot({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),Tf=ot({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});function Bf(e,t){try{if(typeof e=="string"&&e.length>0)return Cf(e);if(typeof e=="number"&&isFinite(e))return t?.long?Uf(e):_f(e);throw new Error("Value is not a string or number.")}catch(r){let n=Pf(r)?`${r.message}. value=${JSON.stringify(e)}`:"An unknown error has occured.";throw new Error(n)}}function Cf(e){if(e=String(e),e.length>100)throw new Error("Value exceeds the maximum length of 100 characters.");let t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(!t)return NaN;let r=parseFloat(t[1]),n=(t[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return r*315576e5;case"weeks":case"week":case"w":return r*6048e5;case"days":case"day":case"d":return r*864e5;case"hours":case"hour":case"hrs":case"hr":case"h":return r*36e5;case"minutes":case"minute":case"mins":case"min":case"m":return r*6e4;case"seconds":case"second":case"secs":case"sec":case"s":return r*1e3;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:throw new Error(`The unit ${n} was matched, but no matching case exists.`)}}var ln=Bf;function _f(e){let t=Math.abs(e);return t>=864e5?`${Math.round(e/864e5)}d`:t>=36e5?`${Math.round(e/36e5)}h`:t>=6e4?`${Math.round(e/6e4)}m`:t>=1e3?`${Math.round(e/1e3)}s`:`${e}ms`}function Uf(e){let t=Math.abs(e);return t>=864e5?fn(e,t,864e5,"day"):t>=36e5?fn(e,t,36e5,"hour"):t>=6e4?fn(e,t,6e4,"minute"):t>=1e3?fn(e,t,1e3,"second"):`${e} ms`}function fn(e,t,r,n){let o=t>=r*1.5;return`${Math.round(e/r)} ${n}${o?"s":""}`}function Pf(e){return typeof e=="object"&&e!==null&&"message"in e}function Bo(e){r.debug=r,r.default=r,r.coerce=c,r.disable=i,r.enable=o,r.enabled=s,r.humanize=ln,r.destroy=l,Object.keys(e).forEach(u=>{r[u]=e[u]}),r.names=[],r.skips=[],r.formatters={};function t(u){let f=0;for(let d=0;d<u.length;d++)f=(f<<5)-f+u.charCodeAt(d),f|=0;return r.colors[Math.abs(f)%r.colors.length]}r.selectColor=t;function r(u){let f,d=null,w,B;function x(...h){if(!x.enabled)return;let S=x,U=Number(new Date),y=U-(f||U);S.diff=y,S.prev=f,S.curr=U,f=U,h[0]=r.coerce(h[0]),typeof h[0]!="string"&&h.unshift("%O");let P=0;h[0]=h[0].replace(/%([a-zA-Z%])/g,(D,N)=>{if(D==="%%")return"%";P++;let g=r.formatters[N];if(typeof g=="function"){let b=h[P];D=g.call(S,b),h.splice(P,1),P--}return D}),r.formatArgs.call(S,h),(S.log||r.log).apply(S,h)}return x.namespace=u,x.useColors=r.useColors(),x.color=r.selectColor(u),x.extend=n,x.destroy=r.destroy,Object.defineProperty(x,"enabled",{enumerable:!0,configurable:!1,get:()=>d!==null?d:(w!==r.namespaces&&(w=r.namespaces,B=r.enabled(u)),B),set:h=>{d=h}}),typeof r.init=="function"&&r.init(x),x}function n(u,f){let d=r(this.namespace+(typeof f>"u"?":":f)+u);return d.log=this.log,d}function o(u){r.save(u),r.namespaces=u,r.names=[],r.skips=[];let f,d=(typeof u=="string"?u:"").split(/[\s,]+/),w=d.length;for(f=0;f<w;f++)d[f]&&(u=d[f].replace(/\*/g,".*?"),u[0]==="-"?r.skips.push(new RegExp("^"+u.substr(1)+"$")):r.names.push(new RegExp("^"+u+"$")))}function i(){let u=[...r.names.map(a),...r.skips.map(a).map(f=>"-"+f)].join(",");return r.enable(""),u}function s(u){if(u[u.length-1]==="*")return!0;let f,d;for(f=0,d=r.skips.length;f<d;f++)if(r.skips[f].test(u))return!1;for(f=0,d=r.names.length;f<d;f++)if(r.names[f].test(u))return!0;return!1}function a(u){return u.toString().substring(2,u.toString().length-2).replace(/\.\*\?$/,"*")}function c(u){return u instanceof Error?u.stack??u.message:u}function l(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.setupFormatters(r.formatters),r.enable(r.load()),r}var dn=Of(),Nf=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function Lf(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent?.toLowerCase().match(/(edge|trident)\/(\d+)/)!=null?!1:typeof document<"u"&&document.documentElement?.style?.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent?.toLowerCase().match(/firefox\/(\d+)/)!=null&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent?.toLowerCase().match(/applewebkit\/(\d+)/)}function kf(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+ln(this.diff),!this.useColors)return;let t="color: "+this.color;e.splice(1,0,t,"color: inherit");let r=0,n=0;e[0].replace(/%[a-zA-Z%]/g,o=>{o!=="%%"&&(r++,o==="%c"&&(n=r))}),e.splice(n,0,t)}var Rf=console.debug??console.log??(()=>{});function Df(e){try{e?dn?.setItem("debug",e):dn?.removeItem("debug")}catch{}}function Kf(){let e;try{e=dn?.getItem("debug")}catch{}return!e&&typeof globalThis.process<"u"&&"env"in globalThis.process&&(e=globalThis.process.env.DEBUG),e}function Of(){try{return localStorage}catch{}}function Ff(e){e.j=function(t){try{return JSON.stringify(t)}catch(r){return"[UnexpectedJSONParseError]: "+r.message}}}var ks=Bo({formatArgs:kf,save:Df,load:Kf,useColors:Lf,setupFormatters:Ff,colors:Nf,storage:dn,log:Rf});var Bt=ks;Bt.formatters.b=e=>e==null?"undefined":X.baseEncode(e);Bt.formatters.t=e=>e==null?"undefined":qt.baseEncode(e);Bt.formatters.m=e=>e==null?"undefined":Io.baseEncode(e);Bt.formatters.p=e=>e==null?"undefined":e.toString();Bt.formatters.c=e=>e==null?"undefined":e.toString();Bt.formatters.k=e=>e==null?"undefined":e.toString();Bt.formatters.a=e=>e==null?"undefined":e.toString();Bt.formatters.e=e=>e==null?"undefined":Rs(e.stack)??Rs(e.message)??e.toString();function Mf(e){let t=()=>{};return t.enabled=!1,t.color="",t.diff=0,t.log=()=>{},t.namespace=e,t.destroy=()=>!0,t.extend=()=>t,t}function xe(e){let t=Mf(`${e}:trace`);return Bt.enabled(`${e}:trace`)&&Bt.names.map(r=>r.toString()).find(r=>r.includes(":trace"))!=null&&(t=Bt(`${e}:trace`)),Object.assign(Bt(e),{error:Bt(`${e}:error`),trace:t})}function Rs(e){if(e!=null&&(e=e.trim(),e.length!==0))return e}var Co={};Tt(Co,{base36:()=>We,base36upper:()=>Vf});var We=ge({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),Vf=ge({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var qf=Os,Ds=128,Hf=127,zf=~Hf,$f=Math.pow(2,31);function Os(e,t,r){t=t||[],r=r||0;for(var n=r;e>=$f;)t[r++]=e&255|Ds,e/=128;for(;e&zf;)t[r++]=e&255|Ds,e>>>=7;return t[r]=e|0,Os.bytes=r-n+1,t}var jf=_o,Gf=128,Ks=127;function _o(e,n){var r=0,n=n||0,o=0,i=n,s,a=e.length;do{if(i>=a)throw _o.bytes=0,new RangeError("Could not decode varint");s=e[i++],r+=o<28?(s&Ks)<<o:(s&Ks)*Math.pow(2,o),o+=7}while(s>=Gf);return _o.bytes=i-n,r}var Zf=Math.pow(2,7),Wf=Math.pow(2,14),Yf=Math.pow(2,21),Xf=Math.pow(2,28),Jf=Math.pow(2,35),Qf=Math.pow(2,42),tl=Math.pow(2,49),el=Math.pow(2,56),rl=Math.pow(2,63),nl=function(e){return e<Zf?1:e<Wf?2:e<Yf?3:e<Xf?4:e<Jf?5:e<Qf?6:e<tl?7:e<el?8:e<rl?9:10},ol={encode:qf,decode:jf,encodingLength:nl},il=ol,Ir=il;function Tr(e,t=0){return[Ir.decode(e,t),Ir.decode.bytes]}function Ye(e,t,r=0){return Ir.encode(e,t,r),t}function Xe(e){return Ir.encodingLength(e)}function Ht(e,t){let r=t.byteLength,n=Xe(e),o=n+Xe(r),i=new Uint8Array(o+r);return Ye(e,i,0),Ye(r,i,n),i.set(t,o),new Je(e,r,t,i)}function ie(e){let t=oe(e),[r,n]=Tr(t),[o,i]=Tr(t.subarray(n)),s=t.subarray(n+i);if(s.byteLength!==o)throw new Error("Incorrect length");return new Je(r,o,s,t)}function Fs(e,t){if(e===t)return!0;{let r=t;return e.code===r.code&&e.size===r.size&&r.bytes instanceof Uint8Array&&Cs(e.bytes,r.bytes)}}var Je=class{code;size;digest;bytes;constructor(t,r,n,o){this.code=t,this.size=r,this.digest=n,this.bytes=o}};function Ms(e,t){let{bytes:r,version:n}=e;switch(n){case 0:return al(r,Uo(e),t??X.encoder);default:return cl(r,Uo(e),t??qt.encoder)}}var Vs=new WeakMap;function Uo(e){let t=Vs.get(e);if(t==null){let r=new Map;return Vs.set(e,r),r}return t}var Q=class e{code;version;multihash;bytes;"/";constructor(t,r,n,o){this.code=r,this.version=t,this.multihash=n,this.bytes=o,this["/"]=o}get asCID(){return this}get byteOffset(){return this.bytes.byteOffset}get byteLength(){return this.bytes.byteLength}toV0(){switch(this.version){case 0:return this;case 1:{let{code:t,multihash:r}=this;if(t!==Br)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(r.code!==ul)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return e.createV0(r)}default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}toV1(){switch(this.version){case 0:{let{code:t,digest:r}=this.multihash,n=Ht(t,r);return e.createV1(this.code,n)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 1. This is a bug please report`)}}equals(t){return e.equals(this,t)}static equals(t,r){let n=r;return n!=null&&t.code===n.code&&t.version===n.version&&Fs(t.multihash,n.multihash)}toString(t){return Ms(this,t)}toJSON(){return{"/":Ms(this)}}link(){return this}[Symbol.toStringTag]="CID";[Symbol.for("nodejs.util.inspect.custom")](){return`CID(${this.toString()})`}static asCID(t){if(t==null)return null;let r=t;if(r instanceof e)return r;if(r["/"]!=null&&r["/"]===r.bytes||r.asCID===r){let{version:n,code:o,multihash:i,bytes:s}=r;return new e(n,o,i,s??qs(n,o,i.bytes))}else if(r[fl]===!0){let{version:n,multihash:o,code:i}=r,s=ie(o);return e.create(n,i,s)}else return null}static create(t,r,n){if(typeof r!="number")throw new Error("String codecs are no longer supported");if(!(n.bytes instanceof Uint8Array))throw new Error("Invalid digest");switch(t){case 0:{if(r!==Br)throw new Error(`Version 0 CID must use dag-pb (code: ${Br}) block encoding`);return new e(t,r,n,n.bytes)}case 1:{let o=qs(t,r,n.bytes);return new e(t,r,n,o)}default:throw new Error("Invalid version")}}static createV0(t){return e.create(0,Br,t)}static createV1(t,r){return e.create(1,t,r)}static decode(t){let[r,n]=e.decodeFirst(t);if(n.length!==0)throw new Error("Incorrect length");return r}static decodeFirst(t){let r=e.inspectBytes(t),n=r.size-r.multihashSize,o=oe(t.subarray(n,n+r.multihashSize));if(o.byteLength!==r.multihashSize)throw new Error("Incorrect length");let i=o.subarray(r.multihashSize-r.digestSize),s=new Je(r.multihashCode,r.digestSize,i,o);return[r.version===0?e.createV0(s):e.createV1(r.codec,s),t.subarray(r.size)]}static inspectBytes(t){let r=0,n=()=>{let[f,d]=Tr(t.subarray(r));return r+=d,f},o=n(),i=Br;if(o===18?(o=0,r=0):i=n(),o!==0&&o!==1)throw new RangeError(`Invalid CID version ${o}`);let s=r,a=n(),c=n(),l=r+c,u=l-s;return{version:o,codec:i,multihashCode:a,digestSize:c,multihashSize:u,size:l}}static parse(t,r){let[n,o]=sl(t,r),i=e.decode(o);if(i.version===0&&t[0]!=="Q")throw Error("Version 0 CID string must not include multibase prefix");return Uo(i).set(n,t),i}};function sl(e,t){switch(e[0]){case"Q":{let r=t??X;return[X.prefix,r.decode(`${X.prefix}${e}`)]}case X.prefix:{let r=t??X;return[X.prefix,r.decode(e)]}case qt.prefix:{let r=t??qt;return[qt.prefix,r.decode(e)]}case We.prefix:{let r=t??We;return[We.prefix,r.decode(e)]}default:{if(t==null)throw Error("To parse non base32, base36 or base58btc encoded CID multibase decoder must be provided");return[e[0],t.decode(e)]}}}function al(e,t,r){let{prefix:n}=r;if(n!==X.prefix)throw Error(`Cannot string encode V0 in ${r.name} encoding`);let o=t.get(n);if(o==null){let i=r.encode(e).slice(1);return t.set(n,i),i}else return o}function cl(e,t,r){let{prefix:n}=r,o=t.get(n);if(o==null){let i=r.encode(e);return t.set(n,i),i}else return o}var Br=112,ul=18;function qs(e,t,r){let n=Xe(e),o=n+Xe(t),i=new Uint8Array(o+r.byteLength);return Ye(e,i,0),Ye(t,i,n),i.set(r,o),i}var fl=Symbol.for("@ipld/js-cid/CID");var Po={};Tt(Po,{identity:()=>zt});var Hs=0,ll="identity",zs=oe;function dl(e){return Ht(Hs,zs(e))}var zt={code:Hs,name:ll,encode:zs,digest:dl};function rt(e,t){if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(let r=0;r<e.byteLength;r++)if(e[r]!==t[r])return!1;return!0}function se(e=0){return new Uint8Array(e)}function Ct(e=0){return new Uint8Array(e)}function xt(e,t){t==null&&(t=e.reduce((o,i)=>o+i.length,0));let r=Ct(t),n=0;for(let o of e)r.set(o,n),n+=o.length;return r}var js=Symbol.for("@achingbrain/uint8arraylist");function $s(e,t){if(t==null||t<0)throw new RangeError("index is out of bounds");let r=0;for(let n of e){let o=r+n.byteLength;if(t<o)return{buf:n,index:t-r};r=o}throw new RangeError("index is out of bounds")}function Qe(e){return!!e?.[js]}var Nt=class e{bufs;length;[js]=!0;constructor(...t){this.bufs=[],this.length=0,t.length>0&&this.appendAll(t)}*[Symbol.iterator](){yield*this.bufs}get byteLength(){return this.length}append(...t){this.appendAll(t)}appendAll(t){let r=0;for(let n of t)if(n instanceof Uint8Array)r+=n.byteLength,this.bufs.push(n);else if(Qe(n))r+=n.byteLength,this.bufs.push(...n.bufs);else throw new Error("Could not append value, must be an Uint8Array or a Uint8ArrayList");this.length+=r}prepend(...t){this.prependAll(t)}prependAll(t){let r=0;for(let n of t.reverse())if(n instanceof Uint8Array)r+=n.byteLength,this.bufs.unshift(n);else if(Qe(n))r+=n.byteLength,this.bufs.unshift(...n.bufs);else throw new Error("Could not prepend value, must be an Uint8Array or a Uint8ArrayList");this.length+=r}get(t){let r=$s(this.bufs,t);return r.buf[r.index]}set(t,r){let n=$s(this.bufs,t);n.buf[n.index]=r}write(t,r=0){if(t instanceof Uint8Array)for(let n=0;n<t.length;n++)this.set(r+n,t[n]);else if(Qe(t))for(let n=0;n<t.length;n++)this.set(r+n,t.get(n));else throw new Error("Could not write value, must be an Uint8Array or a Uint8ArrayList")}consume(t){if(t=Math.trunc(t),!(Number.isNaN(t)||t<=0)){if(t===this.byteLength){this.bufs=[],this.length=0;return}for(;this.bufs.length>0;)if(t>=this.bufs[0].byteLength)t-=this.bufs[0].byteLength,this.length-=this.bufs[0].byteLength,this.bufs.shift();else{this.bufs[0]=this.bufs[0].subarray(t),this.length-=t;break}}}slice(t,r){let{bufs:n,length:o}=this._subList(t,r);return xt(n,o)}subarray(t,r){let{bufs:n,length:o}=this._subList(t,r);return n.length===1?n[0]:xt(n,o)}sublist(t,r){let{bufs:n,length:o}=this._subList(t,r),i=new e;return i.length=o,i.bufs=[...n],i}_subList(t,r){if(t=t??0,r=r??this.length,t<0&&(t=this.length+t),r<0&&(r=this.length+r),t<0||r>this.length)throw new RangeError("index is out of bounds");if(t===r)return{bufs:[],length:0};if(t===0&&r===this.length)return{bufs:this.bufs,length:this.length};let n=[],o=0;for(let i=0;i<this.bufs.length;i++){let s=this.bufs[i],a=o,c=a+s.byteLength;if(o=c,t>=c)continue;let l=t>=a&&t<c,u=r>a&&r<=c;if(l&&u){if(t===a&&r===c){n.push(s);break}let f=t-a;n.push(s.subarray(f,f+(r-t)));break}if(l){if(t===0){n.push(s);continue}n.push(s.subarray(t-a));continue}if(u){if(r===c){n.push(s);break}n.push(s.subarray(0,r-a));break}n.push(s)}return{bufs:n,length:r-t}}indexOf(t,r=0){if(!Qe(t)&&!(t instanceof Uint8Array))throw new TypeError('The "value" argument must be a Uint8ArrayList or Uint8Array');let n=t instanceof Uint8Array?t:t.subarray();if(r=Number(r??0),isNaN(r)&&(r=0),r<0&&(r=this.length+r),r<0&&(r=0),t.length===0)return r>this.length?this.length:r;let o=n.byteLength;if(o===0)throw new TypeError("search must be at least 1 byte long");let i=256,s=new Int32Array(i);for(let f=0;f<i;f++)s[f]=-1;for(let f=0;f<o;f++)s[n[f]]=f;let a=s,c=this.byteLength-n.byteLength,l=n.byteLength-1,u;for(let f=r;f<=c;f+=u){u=0;for(let d=l;d>=0;d--){let w=this.get(f+d);if(n[d]!==w){u=Math.max(1,d-a[w]);break}}if(u===0)return f}return-1}getInt8(t){let r=this.subarray(t,t+1);return new DataView(r.buffer,r.byteOffset,r.byteLength).getInt8(0)}setInt8(t,r){let n=Ct(1);new DataView(n.buffer,n.byteOffset,n.byteLength).setInt8(0,r),this.write(n,t)}getInt16(t,r){let n=this.subarray(t,t+2);return new DataView(n.buffer,n.byteOffset,n.byteLength).getInt16(0,r)}setInt16(t,r,n){let o=se(2);new DataView(o.buffer,o.byteOffset,o.byteLength).setInt16(0,r,n),this.write(o,t)}getInt32(t,r){let n=this.subarray(t,t+4);return new DataView(n.buffer,n.byteOffset,n.byteLength).getInt32(0,r)}setInt32(t,r,n){let o=se(4);new DataView(o.buffer,o.byteOffset,o.byteLength).setInt32(0,r,n),this.write(o,t)}getBigInt64(t,r){let n=this.subarray(t,t+8);return new DataView(n.buffer,n.byteOffset,n.byteLength).getBigInt64(0,r)}setBigInt64(t,r,n){let o=se(8);new DataView(o.buffer,o.byteOffset,o.byteLength).setBigInt64(0,r,n),this.write(o,t)}getUint8(t){let r=this.subarray(t,t+1);return new DataView(r.buffer,r.byteOffset,r.byteLength).getUint8(0)}setUint8(t,r){let n=Ct(1);new DataView(n.buffer,n.byteOffset,n.byteLength).setUint8(0,r),this.write(n,t)}getUint16(t,r){let n=this.subarray(t,t+2);return new DataView(n.buffer,n.byteOffset,n.byteLength).getUint16(0,r)}setUint16(t,r,n){let o=se(2);new DataView(o.buffer,o.byteOffset,o.byteLength).setUint16(0,r,n),this.write(o,t)}getUint32(t,r){let n=this.subarray(t,t+4);return new DataView(n.buffer,n.byteOffset,n.byteLength).getUint32(0,r)}setUint32(t,r,n){let o=se(4);new DataView(o.buffer,o.byteOffset,o.byteLength).setUint32(0,r,n),this.write(o,t)}getBigUint64(t,r){let n=this.subarray(t,t+8);return new DataView(n.buffer,n.byteOffset,n.byteLength).getBigUint64(0,r)}setBigUint64(t,r,n){let o=se(8);new DataView(o.buffer,o.byteOffset,o.byteLength).setBigUint64(0,r,n),this.write(o,t)}getFloat32(t,r){let n=this.subarray(t,t+4);return new DataView(n.buffer,n.byteOffset,n.byteLength).getFloat32(0,r)}setFloat32(t,r,n){let o=se(4);new DataView(o.buffer,o.byteOffset,o.byteLength).setFloat32(0,r,n),this.write(o,t)}getFloat64(t,r){let n=this.subarray(t,t+8);return new DataView(n.buffer,n.byteOffset,n.byteLength).getFloat64(0,r)}setFloat64(t,r,n){let o=se(8);new DataView(o.buffer,o.byteOffset,o.byteLength).setFloat64(0,r,n),this.write(o,t)}equals(t){if(t==null||!(t instanceof e)||t.bufs.length!==this.bufs.length)return!1;for(let r=0;r<this.bufs.length;r++)if(!rt(this.bufs[r],t.bufs[r]))return!1;return!0}static fromUint8Arrays(t,r){let n=new e;return n.bufs=t,r==null&&(r=t.reduce((o,i)=>o+i.byteLength,0)),n.length=r,n}};var No={};Tt(No,{base10:()=>hl});var hl=ge({prefix:"9",name:"base10",alphabet:"0123456789"});var Lo={};Tt(Lo,{base16:()=>pl,base16upper:()=>ml});var pl=ot({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),ml=ot({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var ko={};Tt(ko,{base2:()=>yl});var yl=ot({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var Ro={};Tt(Ro,{base256emoji:()=>El});var Gs=Array.from("\u{1F680}\u{1FA90}\u2604\u{1F6F0}\u{1F30C}\u{1F311}\u{1F312}\u{1F313}\u{1F314}\u{1F315}\u{1F316}\u{1F317}\u{1F318}\u{1F30D}\u{1F30F}\u{1F30E}\u{1F409}\u2600\u{1F4BB}\u{1F5A5}\u{1F4BE}\u{1F4BF}\u{1F602}\u2764\u{1F60D}\u{1F923}\u{1F60A}\u{1F64F}\u{1F495}\u{1F62D}\u{1F618}\u{1F44D}\u{1F605}\u{1F44F}\u{1F601}\u{1F525}\u{1F970}\u{1F494}\u{1F496}\u{1F499}\u{1F622}\u{1F914}\u{1F606}\u{1F644}\u{1F4AA}\u{1F609}\u263A\u{1F44C}\u{1F917}\u{1F49C}\u{1F614}\u{1F60E}\u{1F607}\u{1F339}\u{1F926}\u{1F389}\u{1F49E}\u270C\u2728\u{1F937}\u{1F631}\u{1F60C}\u{1F338}\u{1F64C}\u{1F60B}\u{1F497}\u{1F49A}\u{1F60F}\u{1F49B}\u{1F642}\u{1F493}\u{1F929}\u{1F604}\u{1F600}\u{1F5A4}\u{1F603}\u{1F4AF}\u{1F648}\u{1F447}\u{1F3B6}\u{1F612}\u{1F92D}\u2763\u{1F61C}\u{1F48B}\u{1F440}\u{1F62A}\u{1F611}\u{1F4A5}\u{1F64B}\u{1F61E}\u{1F629}\u{1F621}\u{1F92A}\u{1F44A}\u{1F973}\u{1F625}\u{1F924}\u{1F449}\u{1F483}\u{1F633}\u270B\u{1F61A}\u{1F61D}\u{1F634}\u{1F31F}\u{1F62C}\u{1F643}\u{1F340}\u{1F337}\u{1F63B}\u{1F613}\u2B50\u2705\u{1F97A}\u{1F308}\u{1F608}\u{1F918}\u{1F4A6}\u2714\u{1F623}\u{1F3C3}\u{1F490}\u2639\u{1F38A}\u{1F498}\u{1F620}\u261D\u{1F615}\u{1F33A}\u{1F382}\u{1F33B}\u{1F610}\u{1F595}\u{1F49D}\u{1F64A}\u{1F639}\u{1F5E3}\u{1F4AB}\u{1F480}\u{1F451}\u{1F3B5}\u{1F91E}\u{1F61B}\u{1F534}\u{1F624}\u{1F33C}\u{1F62B}\u26BD\u{1F919}\u2615\u{1F3C6}\u{1F92B}\u{1F448}\u{1F62E}\u{1F646}\u{1F37B}\u{1F343}\u{1F436}\u{1F481}\u{1F632}\u{1F33F}\u{1F9E1}\u{1F381}\u26A1\u{1F31E}\u{1F388}\u274C\u270A\u{1F44B}\u{1F630}\u{1F928}\u{1F636}\u{1F91D}\u{1F6B6}\u{1F4B0}\u{1F353}\u{1F4A2}\u{1F91F}\u{1F641}\u{1F6A8}\u{1F4A8}\u{1F92C}\u2708\u{1F380}\u{1F37A}\u{1F913}\u{1F619}\u{1F49F}\u{1F331}\u{1F616}\u{1F476}\u{1F974}\u25B6\u27A1\u2753\u{1F48E}\u{1F4B8}\u2B07\u{1F628}\u{1F31A}\u{1F98B}\u{1F637}\u{1F57A}\u26A0\u{1F645}\u{1F61F}\u{1F635}\u{1F44E}\u{1F932}\u{1F920}\u{1F927}\u{1F4CC}\u{1F535}\u{1F485}\u{1F9D0}\u{1F43E}\u{1F352}\u{1F617}\u{1F911}\u{1F30A}\u{1F92F}\u{1F437}\u260E\u{1F4A7}\u{1F62F}\u{1F486}\u{1F446}\u{1F3A4}\u{1F647}\u{1F351}\u2744\u{1F334}\u{1F4A3}\u{1F438}\u{1F48C}\u{1F4CD}\u{1F940}\u{1F922}\u{1F445}\u{1F4A1}\u{1F4A9}\u{1F450}\u{1F4F8}\u{1F47B}\u{1F910}\u{1F92E}\u{1F3BC}\u{1F975}\u{1F6A9}\u{1F34E}\u{1F34A}\u{1F47C}\u{1F48D}\u{1F4E3}\u{1F942}"),gl=Gs.reduce((e,t,r)=>(e[r]=t,e),[]),xl=Gs.reduce((e,t,r)=>{let n=t.codePointAt(0);if(n==null)throw new Error(`Invalid character: ${t}`);return e[n]=r,e},[]);function wl(e){return e.reduce((t,r)=>(t+=gl[r],t),"")}function bl(e){let t=[];for(let r of e){let n=r.codePointAt(0);if(n==null)throw new Error(`Invalid character: ${r}`);let o=xl[n];if(o==null)throw new Error(`Non-base256emoji character: ${r}`);t.push(o)}return new Uint8Array(t)}var El=Ze({prefix:"\u{1F680}",name:"base256emoji",encode:wl,decode:bl});var Do={};Tt(Do,{base8:()=>Sl});var Sl=ot({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var Ko={};Tt(Ko,{identity:()=>vl});var vl=Ze({prefix:"\0",name:"identity",encode:e=>Us(e),decode:e=>_s(e)});var l0=new TextEncoder,d0=new TextDecoder;var Mo={};Tt(Mo,{sha256:()=>Cr,sha512:()=>Tl});function Fo({name:e,code:t,encode:r}){return new Oo(e,t,r)}var Oo=class{name;code;encode;constructor(t,r,n){this.name=t,this.code=r,this.encode=n}digest(t){if(t instanceof Uint8Array){let r=this.encode(t);return r instanceof Uint8Array?Ht(this.code,r):r.then(n=>Ht(this.code,n))}else throw Error("Unknown type, must be binary type")}};function Ws(e){return async t=>new Uint8Array(await crypto.subtle.digest(e,t))}var Cr=Fo({name:"sha2-256",code:18,encode:Ws("SHA-256")}),Tl=Fo({name:"sha2-512",code:19,encode:Ws("SHA-512")});var _r={...Ko,...ko,...Do,...No,...Lo,...vo,...Co,...Ao,...To,...Ro},A0={...Mo,...Po};function Xs(e,t,r,n){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:r},decoder:{decode:n}}}var Ys=Xs("utf8","u",e=>"u"+new TextDecoder("utf8").decode(e),e=>new TextEncoder().encode(e.substring(1))),Vo=Xs("ascii","a",e=>{let t="a";for(let r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return t},e=>{e=e.substring(1);let t=Ct(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}),Bl={utf8:Ys,"utf-8":Ys,hex:_r.base16,latin1:Vo,ascii:Vo,binary:Vo,..._r},pn=Bl;function j(e,t="utf8"){let r=pn[t];if(r==null)throw new Error(`Unsupported encoding "${t}"`);return r.decoder.decode(`${r.prefix}${e}`)}function q(e,t="utf8"){let r=pn[t];if(r==null)throw new Error(`Unsupported encoding "${t}"`);return r.encoder.encode(e).substring(1)}var Cl=parseInt("11111",2),qo=parseInt("10000000",2),_l=parseInt("01111111",2),Js={0:Ur,1:Ur,2:Ul,3:Ll,4:kl,5:Nl,6:Pl,16:Ur,22:Ur,48:Ur};function ae(e,t={offset:0}){let r=e[t.offset]&Cl;if(t.offset++,Js[r]!=null)return Js[r](e,t);throw new Error("No decoder for tag "+r)}function Pr(e,t){let r=0;if((e[t.offset]&qo)===qo){let n=e[t.offset]&_l,o="0x";t.offset++;for(let i=0;i<n;i++,t.offset++)o+=e[t.offset].toString(16).padStart(2,"0");r=parseInt(o,16)}else r=e[t.offset],t.offset++;return r}function Ur(e,t){Pr(e,t);let r=[];for(;!(t.offset>=e.byteLength);){let n=ae(e,t);if(n===null)break;r.push(n)}return r}function Ul(e,t){let r=Pr(e,t),n=t.offset,o=t.offset+r,i=[];for(let s=n;s<o;s++)s===n&&e[s]===0||i.push(e[s]);return t.offset+=r,Uint8Array.from(i)}function Pl(e,t){let r=Pr(e,t),n=t.offset+r,o=e[t.offset];t.offset++;let i=0,s=0;o<40?(i=0,s=o):o<80?(i=1,s=o-40):(i=2,s=o-80);let a=`${i}.${s}`,c=[];for(;t.offset<n;){let l=e[t.offset];if(t.offset++,c.push(l&127),l<128){c.reverse();let u=0;for(let f=0;f<c.length;f++)u+=c[f]<<f*7;a+=`.${u}`,c=[]}}return a}function Nl(e,t){return t.offset++,null}function Ll(e,t){let r=Pr(e,t),n=e[t.offset];t.offset++;let o=e.subarray(t.offset,t.offset+r-1);if(t.offset+=r,n!==0)throw new Error("Unused bits in bit string is unimplemented");return o}function kl(e,t){let r=Pr(e,t),n=e.subarray(t.offset,t.offset+r);return t.offset+=r,n}function Rl(e){let t=e.toString(16);t.length%2===1&&(t="0"+t);let r=new Nt;for(let n=0;n<t.length;n+=2)r.append(Uint8Array.from([parseInt(`${t[n]}${t[n+1]}`,16)]));return r}function Ho(e){if(e.byteLength<128)return Uint8Array.from([e.byteLength]);let t=Rl(e.byteLength);return new Nt(Uint8Array.from([t.byteLength|qo]),t)}function _t(e){let t=new Nt,r=128;return(e.subarray()[0]&r)===r&&t.append(Uint8Array.from([0])),t.append(e),new Nt(Uint8Array.from([2]),Ho(t),t)}function mn(e){let t=Uint8Array.from([0]),r=new Nt(t,e);return new Nt(Uint8Array.from([3]),Ho(r),r)}function be(e,t=48){let r=new Nt;for(let n of e)r.append(n);return new Nt(Uint8Array.from([t]),Ho(r),r)}async function Qs(e,t,r){let n=await crypto.subtle.importKey("jwk",e,{name:"ECDSA",namedCurve:e.crv??"P-256"},!1,["verify"]);return crypto.subtle.verify({name:"ECDSA",hash:{name:"SHA-256"}},n,t,r.subarray())}var Dl=Uint8Array.from([6,8,42,134,72,206,61,3,1,7]),Kl=Uint8Array.from([6,5,43,129,4,0,34]),Ol=Uint8Array.from([6,5,43,129,4,0,35]),Fl={ext:!0,kty:"EC",crv:"P-256"},Ml={ext:!0,kty:"EC",crv:"P-384"},Vl={ext:!0,kty:"EC",crv:"P-521"},zo=32,$o=48,jo=66;function Go(e){let t=ae(e);return ta(t)}function ta(e){let t=e[1][1][0],r=1,n,o;if(t.byteLength===zo*2+1)return n=q(t.subarray(r,r+zo),"base64url"),o=q(t.subarray(r+zo),"base64url"),new tr({...Fl,key_ops:["verify"],x:n,y:o});if(t.byteLength===$o*2+1)return n=q(t.subarray(r,r+$o),"base64url"),o=q(t.subarray(r+$o),"base64url"),new tr({...Ml,key_ops:["verify"],x:n,y:o});if(t.byteLength===jo*2+1)return n=q(t.subarray(r,r+jo),"base64url"),o=q(t.subarray(r+jo),"base64url"),new tr({...Vl,key_ops:["verify"],x:n,y:o});throw new ct(`coordinates were wrong length, got ${t.byteLength}, expected 65, 97 or 133`)}function ea(e){return be([_t(Uint8Array.from([1])),be([ql(e.crv)],160),be([mn(new Nt(Uint8Array.from([4]),j(e.x??"","base64url"),j(e.y??"","base64url")))],161)]).subarray()}function ql(e){if(e==="P-256")return Dl;if(e==="P-384")return Kl;if(e==="P-521")return Ol;throw new ct(`Invalid curve ${e}`)}var tr=class{type="ECDSA";jwk;_raw;constructor(t){this.jwk=t}get raw(){return this._raw==null&&(this._raw=ea(this.jwk)),this._raw}toMultihash(){return zt.digest(er(this))}toCID(){return Q.createV1(114,this.toMultihash())}toString(){return X.encode(this.toMultihash().bytes).substring(1)}equals(t){return t==null||!(t.raw instanceof Uint8Array)?!1:rt(this.raw,t.raw)}async verify(t,r){return Qs(this.jwk,r,t)}};var Pe=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;function Hl(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&e.constructor.name==="Uint8Array"}function yn(e){if(!Number.isSafeInteger(e)||e<0)throw new Error("positive integer expected, got "+e)}function Ne(e,...t){if(!Hl(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error("Uint8Array expected of length "+t+", got length="+e.length)}function ra(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");yn(e.outputLen),yn(e.blockLen)}function nr(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function na(e,t){Ne(e);let r=t.outputLen;if(e.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}function ce(...e){for(let t=0;t<e.length;t++)e[t].fill(0)}function gn(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function $t(e,t){return e<<32-t|e>>>t}function oa(e){if(typeof e!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(e))}function Nr(e){return typeof e=="string"&&(e=oa(e)),Ne(e),e}function Zo(...e){let t=0;for(let n=0;n<e.length;n++){let o=e[n];Ne(o),t+=o.length}let r=new Uint8Array(t);for(let n=0,o=0;n<e.length;n++){let i=e[n];r.set(i,o),o+=i.length}return r}var rr=class{};function Wo(e){let t=n=>e().update(Nr(n)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t}function xn(e=32){if(Pe&&typeof Pe.getRandomValues=="function")return Pe.getRandomValues(new Uint8Array(e));if(Pe&&typeof Pe.randomBytes=="function")return Uint8Array.from(Pe.randomBytes(e));throw new Error("crypto.getRandomValues must be defined")}function zl(e,t,r,n){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,r,n);let o=BigInt(32),i=BigInt(4294967295),s=Number(r>>o&i),a=Number(r&i),c=n?4:0,l=n?0:4;e.setUint32(t+c,s,n),e.setUint32(t+l,a,n)}function ia(e,t,r){return e&t^~e&r}function sa(e,t,r){return e&t^e&r^t&r}var Lr=class extends rr{constructor(t,r,n,o){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=t,this.outputLen=r,this.padOffset=n,this.isLE=o,this.buffer=new Uint8Array(t),this.view=gn(this.buffer)}update(t){nr(this),t=Nr(t),Ne(t);let{view:r,buffer:n,blockLen:o}=this,i=t.length;for(let s=0;s<i;){let a=Math.min(o-this.pos,i-s);if(a===o){let c=gn(t);for(;o<=i-s;s+=o)this.process(c,s);continue}n.set(t.subarray(s,s+a),this.pos),this.pos+=a,s+=a,this.pos===o&&(this.process(r,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){nr(this),na(t,this),this.finished=!0;let{buffer:r,view:n,blockLen:o,isLE:i}=this,{pos:s}=this;r[s++]=128,ce(this.buffer.subarray(s)),this.padOffset>o-s&&(this.process(n,0),s=0);for(let f=s;f<o;f++)r[f]=0;zl(n,o-8,BigInt(this.length*8),i),this.process(n,0);let a=gn(t),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");let l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let f=0;f<l;f++)a.setUint32(4*f,u[f],i)}digest(){let{buffer:t,outputLen:r}=this;this.digestInto(t);let n=t.slice(0,r);return this.destroy(),n}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());let{blockLen:r,buffer:n,length:o,finished:i,destroyed:s,pos:a}=this;return t.destroyed=s,t.finished=i,t.length=o,t.pos=a,o%r&&t.buffer.set(n),t}clone(){return this._cloneInto()}},ue=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]);var pt=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]);var wn=BigInt(4294967295),aa=BigInt(32);function $l(e,t=!1){return t?{h:Number(e&wn),l:Number(e>>aa&wn)}:{h:Number(e>>aa&wn)|0,l:Number(e&wn)|0}}function ca(e,t=!1){let r=e.length,n=new Uint32Array(r),o=new Uint32Array(r);for(let i=0;i<r;i++){let{h:s,l:a}=$l(e[i],t);[n[i],o[i]]=[s,a]}return[n,o]}var Yo=(e,t,r)=>e>>>r,Xo=(e,t,r)=>e<<32-r|t>>>r,Le=(e,t,r)=>e>>>r|t<<32-r,ke=(e,t,r)=>e<<32-r|t>>>r,kr=(e,t,r)=>e<<64-r|t>>>r-32,Rr=(e,t,r)=>e>>>r-32|t<<64-r;function Qt(e,t,r,n){let o=(t>>>0)+(n>>>0);return{h:e+r+(o/2**32|0)|0,l:o|0}}var ua=(e,t,r)=>(e>>>0)+(t>>>0)+(r>>>0),fa=(e,t,r,n)=>t+r+n+(e/2**32|0)|0,la=(e,t,r,n)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0),da=(e,t,r,n,o)=>t+r+n+o+(e/2**32|0)|0,ha=(e,t,r,n,o)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0)+(o>>>0),pa=(e,t,r,n,o,i)=>t+r+n+o+i+(e/2**32|0)|0;var Gl=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Ee=new Uint32Array(64),bn=class extends Lr{constructor(t=32){super(64,t,8,!1),this.A=ue[0]|0,this.B=ue[1]|0,this.C=ue[2]|0,this.D=ue[3]|0,this.E=ue[4]|0,this.F=ue[5]|0,this.G=ue[6]|0,this.H=ue[7]|0}get(){let{A:t,B:r,C:n,D:o,E:i,F:s,G:a,H:c}=this;return[t,r,n,o,i,s,a,c]}set(t,r,n,o,i,s,a,c){this.A=t|0,this.B=r|0,this.C=n|0,this.D=o|0,this.E=i|0,this.F=s|0,this.G=a|0,this.H=c|0}process(t,r){for(let f=0;f<16;f++,r+=4)Ee[f]=t.getUint32(r,!1);for(let f=16;f<64;f++){let d=Ee[f-15],w=Ee[f-2],B=$t(d,7)^$t(d,18)^d>>>3,x=$t(w,17)^$t(w,19)^w>>>10;Ee[f]=x+Ee[f-7]+B+Ee[f-16]|0}let{A:n,B:o,C:i,D:s,E:a,F:c,G:l,H:u}=this;for(let f=0;f<64;f++){let d=$t(a,6)^$t(a,11)^$t(a,25),w=u+d+ia(a,c,l)+Gl[f]+Ee[f]|0,x=($t(n,2)^$t(n,13)^$t(n,22))+sa(n,o,i)|0;u=l,l=c,c=a,a=s+w|0,s=i,i=o,o=n,n=w+x|0}n=n+this.A|0,o=o+this.B|0,i=i+this.C|0,s=s+this.D|0,a=a+this.E|0,c=c+this.F|0,l=l+this.G|0,u=u+this.H|0,this.set(n,o,i,s,a,c,l,u)}roundClean(){ce(Ee)}destroy(){this.set(0,0,0,0,0,0,0,0),ce(this.buffer)}};var ma=ca(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(e=>BigInt(e))),Zl=ma[0],Wl=ma[1],Se=new Uint32Array(80),ve=new Uint32Array(80),Jo=class extends Lr{constructor(t=64){super(128,t,16,!1),this.Ah=pt[0]|0,this.Al=pt[1]|0,this.Bh=pt[2]|0,this.Bl=pt[3]|0,this.Ch=pt[4]|0,this.Cl=pt[5]|0,this.Dh=pt[6]|0,this.Dl=pt[7]|0,this.Eh=pt[8]|0,this.El=pt[9]|0,this.Fh=pt[10]|0,this.Fl=pt[11]|0,this.Gh=pt[12]|0,this.Gl=pt[13]|0,this.Hh=pt[14]|0,this.Hl=pt[15]|0}get(){let{Ah:t,Al:r,Bh:n,Bl:o,Ch:i,Cl:s,Dh:a,Dl:c,Eh:l,El:u,Fh:f,Fl:d,Gh:w,Gl:B,Hh:x,Hl:h}=this;return[t,r,n,o,i,s,a,c,l,u,f,d,w,B,x,h]}set(t,r,n,o,i,s,a,c,l,u,f,d,w,B,x,h){this.Ah=t|0,this.Al=r|0,this.Bh=n|0,this.Bl=o|0,this.Ch=i|0,this.Cl=s|0,this.Dh=a|0,this.Dl=c|0,this.Eh=l|0,this.El=u|0,this.Fh=f|0,this.Fl=d|0,this.Gh=w|0,this.Gl=B|0,this.Hh=x|0,this.Hl=h|0}process(t,r){for(let y=0;y<16;y++,r+=4)Se[y]=t.getUint32(r),ve[y]=t.getUint32(r+=4);for(let y=16;y<80;y++){let P=Se[y-15]|0,O=ve[y-15]|0,D=Le(P,O,1)^Le(P,O,8)^Yo(P,O,7),N=ke(P,O,1)^ke(P,O,8)^Xo(P,O,7),g=Se[y-2]|0,b=ve[y-2]|0,K=Le(g,b,19)^kr(g,b,61)^Yo(g,b,6),k=ke(g,b,19)^Rr(g,b,61)^Xo(g,b,6),_=la(N,k,ve[y-7],ve[y-16]),V=da(_,D,K,Se[y-7],Se[y-16]);Se[y]=V|0,ve[y]=_|0}let{Ah:n,Al:o,Bh:i,Bl:s,Ch:a,Cl:c,Dh:l,Dl:u,Eh:f,El:d,Fh:w,Fl:B,Gh:x,Gl:h,Hh:S,Hl:U}=this;for(let y=0;y<80;y++){let P=Le(f,d,14)^Le(f,d,18)^kr(f,d,41),O=ke(f,d,14)^ke(f,d,18)^Rr(f,d,41),D=f&w^~f&x,N=d&B^~d&h,g=ha(U,O,N,Wl[y],ve[y]),b=pa(g,S,P,D,Zl[y],Se[y]),K=g|0,k=Le(n,o,28)^kr(n,o,34)^kr(n,o,39),_=ke(n,o,28)^Rr(n,o,34)^Rr(n,o,39),V=n&i^n&a^i&a,v=o&s^o&c^s&c;S=x|0,U=h|0,x=w|0,h=B|0,w=f|0,B=d|0,{h:f,l:d}=Qt(l|0,u|0,b|0,K|0),l=a|0,u=c|0,a=i|0,c=s|0,i=n|0,s=o|0;let A=ua(K,_,v);n=fa(A,b,k,V),o=A|0}({h:n,l:o}=Qt(this.Ah|0,this.Al|0,n|0,o|0)),{h:i,l:s}=Qt(this.Bh|0,this.Bl|0,i|0,s|0),{h:a,l:c}=Qt(this.Ch|0,this.Cl|0,a|0,c|0),{h:l,l:u}=Qt(this.Dh|0,this.Dl|0,l|0,u|0),{h:f,l:d}=Qt(this.Eh|0,this.El|0,f|0,d|0),{h:w,l:B}=Qt(this.Fh|0,this.Fl|0,w|0,B|0),{h:x,l:h}=Qt(this.Gh|0,this.Gl|0,x|0,h|0),{h:S,l:U}=Qt(this.Hh|0,this.Hl|0,S|0,U|0),this.set(n,o,i,s,a,c,l,u,f,d,w,B,x,h,S,U)}roundClean(){ce(Se,ve)}destroy(){ce(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};var En=Wo(()=>new bn);var ya=Wo(()=>new Jo);var ri=BigInt(0),ei=BigInt(1);function Re(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&e.constructor.name==="Uint8Array"}function ni(e){if(!Re(e))throw new Error("Uint8Array expected")}function te(e,t){if(typeof t!="boolean")throw new Error(e+" boolean expected, got "+t)}function Dr(e){let t=e.toString(16);return t.length&1?"0"+t:t}function wa(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);return e===""?ri:BigInt("0x"+e)}var ba=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",Yl=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function Ae(e){if(ni(e),ba)return e.toHex();let t="";for(let r=0;r<e.length;r++)t+=Yl[e[r]];return t}var fe={_0:48,_9:57,A:65,F:70,a:97,f:102};function ga(e){if(e>=fe._0&&e<=fe._9)return e-fe._0;if(e>=fe.A&&e<=fe.F)return e-(fe.A-10);if(e>=fe.a&&e<=fe.f)return e-(fe.a-10)}function Kr(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);if(ba)return Uint8Array.fromHex(e);let t=e.length,r=t/2;if(t%2)throw new Error("hex string expected, got unpadded hex of length "+t);let n=new Uint8Array(r);for(let o=0,i=0;o<r;o++,i+=2){let s=ga(e.charCodeAt(i)),a=ga(e.charCodeAt(i+1));if(s===void 0||a===void 0){let c=e[i]+e[i+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+i)}n[o]=s*16+a}return n}function le(e){return wa(Ae(e))}function De(e){return ni(e),wa(Ae(Uint8Array.from(e).reverse()))}function Ke(e,t){return Kr(e.toString(16).padStart(t*2,"0"))}function or(e,t){return Ke(e,t).reverse()}function nt(e,t,r){let n;if(typeof t=="string")try{n=Kr(t)}catch(i){throw new Error(e+" must be hex string or Uint8Array, cause: "+i)}else if(Re(t))n=Uint8Array.from(t);else throw new Error(e+" must be hex string or Uint8Array");let o=n.length;if(typeof r=="number"&&o!==r)throw new Error(e+" of length "+r+" expected, got "+o);return n}function Ie(...e){let t=0;for(let n=0;n<e.length;n++){let o=e[n];ni(o),t+=o.length}let r=new Uint8Array(t);for(let n=0,o=0;n<e.length;n++){let i=e[n];r.set(i,o),o+=i.length}return r}var Qo=e=>typeof e=="bigint"&&ri<=e;function Sn(e,t,r){return Qo(e)&&Qo(t)&&Qo(r)&&t<=e&&e<r}function Lt(e,t,r,n){if(!Sn(t,r,n))throw new Error("expected valid "+e+": "+r+" <= n < "+n+", got "+t)}function Ea(e){let t;for(t=0;e>ri;e>>=ei,t+=1);return t}var Oe=e=>(ei<<BigInt(e))-ei,ti=e=>new Uint8Array(e),xa=e=>Uint8Array.from(e);function Sa(e,t,r){if(typeof e!="number"||e<2)throw new Error("hashLen must be a number");if(typeof t!="number"||t<2)throw new Error("qByteLen must be a number");if(typeof r!="function")throw new Error("hmacFn must be a function");let n=ti(e),o=ti(e),i=0,s=()=>{n.fill(1),o.fill(0),i=0},a=(...f)=>r(o,n,...f),c=(f=ti(0))=>{o=a(xa([0]),f),n=a(),f.length!==0&&(o=a(xa([1]),f),n=a())},l=()=>{if(i++>=1e3)throw new Error("drbg: tried 1000 values");let f=0,d=[];for(;f<t;){n=a();let w=n.slice();d.push(w),f+=n.length}return Ie(...d)};return(f,d)=>{s(),c(f);let w;for(;!(w=d(l()));)c();return s(),w}}var Xl={bigint:e=>typeof e=="bigint",function:e=>typeof e=="function",boolean:e=>typeof e=="boolean",string:e=>typeof e=="string",stringOrUint8Array:e=>typeof e=="string"||Re(e),isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>typeof e=="function"&&Number.isSafeInteger(e.outputLen)};function de(e,t,r={}){let n=(o,i,s)=>{let a=Xl[i];if(typeof a!="function")throw new Error("invalid validator function");let c=e[o];if(!(s&&c===void 0)&&!a(c,e))throw new Error("param "+String(o)+" is invalid. Expected "+i+", got "+c)};for(let[o,i]of Object.entries(t))n(o,i,!1);for(let[o,i]of Object.entries(r))n(o,i,!0);return e}function ir(e){let t=new WeakMap;return(r,...n)=>{let o=t.get(r);if(o!==void 0)return o;let i=e(r,...n);return t.set(r,i),i}}var St=BigInt(0),ut=BigInt(1),Fe=BigInt(2),Jl=BigInt(3),oi=BigInt(4),va=BigInt(5),Aa=BigInt(8),Ql=BigInt(9),td=BigInt(16);function J(e,t){let r=e%t;return r>=St?r:t+r}function et(e,t,r){let n=e;for(;t-- >St;)n*=n,n%=r;return n}function vn(e,t){if(e===St)throw new Error("invert: expected non-zero number");if(t<=St)throw new Error("invert: expected positive modulus, got "+t);let r=J(e,t),n=t,o=St,i=ut,s=ut,a=St;for(;r!==St;){let l=n/r,u=n%r,f=o-s*l,d=i-a*l;n=r,r=u,o=s,i=a,s=f,a=d}if(n!==ut)throw new Error("invert: does not exist");return J(o,t)}function ed(e){let t=e-ut,r=0;for(;t%Fe===St;)t/=Fe,r++;let n=Fe,o=he(e);for(;n<e&&Ia(o,n);)if(n++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(r===1){let s=(e+ut)/oi;return function(c,l){let u=c.pow(l,s);if(!c.eql(c.sqr(u),l))throw new Error("Cannot find square root");return u}}let i=(t+ut)/Fe;return function(a,c){if(!Ia(a,c))throw new Error("Cannot find square root");let l=r,u=a.pow(a.mul(a.ONE,n),t),f=a.pow(c,i),d=a.pow(c,t);for(;!a.eql(d,a.ONE);){if(a.eql(d,a.ZERO))return a.ZERO;let w=1;for(let x=a.sqr(d);w<l&&!a.eql(x,a.ONE);w++)x=a.sqr(x);let B=a.pow(u,ut<<BigInt(l-w-1));u=a.sqr(B),f=a.mul(f,B),d=a.mul(d,u),l=w}return f}}function rd(e){return e%oi===Jl?function(r,n){let o=(e+ut)/oi,i=r.pow(n,o);if(!r.eql(r.sqr(i),n))throw new Error("Cannot find square root");return i}:e%Aa===va?function(r,n){let o=r.mul(n,Fe),i=(e-va)/Aa,s=r.pow(o,i),a=r.mul(n,s),c=r.mul(r.mul(a,Fe),s),l=r.mul(a,r.sub(c,r.ONE));if(!r.eql(r.sqr(l),n))throw new Error("Cannot find square root");return l}:(e%td,ed(e))}var Ta=(e,t)=>(J(e,t)&ut)===ut,nd=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function ii(e){let t={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},r=nd.reduce((n,o)=>(n[o]="function",n),t);return de(e,r)}function od(e,t,r){if(r<St)throw new Error("invalid exponent, negatives unsupported");if(r===St)return e.ONE;if(r===ut)return t;let n=e.ONE,o=t;for(;r>St;)r&ut&&(n=e.mul(n,o)),o=e.sqr(o),r>>=ut;return n}function sr(e,t,r=!1){let n=new Array(t.length).fill(r?e.ZERO:void 0),o=t.reduce((s,a,c)=>e.is0(a)?s:(n[c]=s,e.mul(s,a)),e.ONE),i=e.inv(o);return t.reduceRight((s,a,c)=>e.is0(a)?s:(n[c]=e.mul(s,n[c]),e.mul(s,a)),i),n}function id(e,t){let r=(e.ORDER-ut)/Fe,n=e.pow(t,r),o=e.eql(n,e.ONE),i=e.eql(n,e.ZERO),s=e.eql(n,e.neg(e.ONE));if(!o&&!i&&!s)throw new Error("Cannot find square root: probably non-prime P");return o?1:i?0:-1}function Ia(e,t){let r=id(e,t);return r===0||r===1}function si(e,t){t!==void 0&&yn(t);let r=t!==void 0?t:e.toString(2).length,n=Math.ceil(r/8);return{nBitLength:r,nByteLength:n}}function he(e,t,r=!1,n={}){if(e<=St)throw new Error("invalid field: expected ORDER > 0, got "+e);let{nBitLength:o,nByteLength:i}=si(e,t);if(i>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let s,a=Object.freeze({ORDER:e,isLE:r,BITS:o,BYTES:i,MASK:Oe(o),ZERO:St,ONE:ut,create:c=>J(c,e),isValid:c=>{if(typeof c!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof c);return St<=c&&c<e},is0:c=>c===St,isOdd:c=>(c&ut)===ut,neg:c=>J(-c,e),eql:(c,l)=>c===l,sqr:c=>J(c*c,e),add:(c,l)=>J(c+l,e),sub:(c,l)=>J(c-l,e),mul:(c,l)=>J(c*l,e),pow:(c,l)=>od(a,c,l),div:(c,l)=>J(c*vn(l,e),e),sqrN:c=>c*c,addN:(c,l)=>c+l,subN:(c,l)=>c-l,mulN:(c,l)=>c*l,inv:c=>vn(c,e),sqrt:n.sqrt||(c=>(s||(s=rd(e)),s(a,c))),toBytes:c=>r?or(c,i):Ke(c,i),fromBytes:c=>{if(c.length!==i)throw new Error("Field.fromBytes: expected "+i+" bytes, got "+c.length);return r?De(c):le(c)},invertBatch:c=>sr(a,c),cmov:(c,l,u)=>u?l:c});return Object.freeze(a)}function Ba(e){if(typeof e!="bigint")throw new Error("field order must be bigint");let t=e.toString(2).length;return Math.ceil(t/8)}function ai(e){let t=Ba(e);return t+Math.ceil(t/2)}function Ca(e,t,r=!1){let n=e.length,o=Ba(t),i=ai(t);if(n<16||n<i||n>1024)throw new Error("expected "+i+"-1024 bytes of input, got "+n);let s=r?De(e):le(e),a=J(s,t-ut)+ut;return r?or(a,o):Ke(a,o)}var _a=BigInt(0),di=BigInt(1);function ci(e,t){let r=t.negate();return e?r:t}function Pa(e,t){if(!Number.isSafeInteger(e)||e<=0||e>t)throw new Error("invalid window size, expected [1.."+t+"], got W="+e)}function ui(e,t){Pa(e,t);let r=Math.ceil(t/e)+1,n=2**(e-1),o=2**e,i=Oe(e),s=BigInt(e);return{windows:r,windowSize:n,mask:i,maxNumber:o,shiftBy:s}}function Ua(e,t,r){let{windowSize:n,mask:o,maxNumber:i,shiftBy:s}=r,a=Number(e&o),c=e>>s;a>n&&(a-=i,c+=di);let l=t*n,u=l+Math.abs(a)-1,f=a===0,d=a<0,w=t%2!==0;return{nextN:c,offset:u,isZero:f,isNeg:d,isNegF:w,offsetF:l}}function sd(e,t){if(!Array.isArray(e))throw new Error("array expected");e.forEach((r,n)=>{if(!(r instanceof t))throw new Error("invalid point at index "+n)})}function ad(e,t){if(!Array.isArray(e))throw new Error("array of scalars expected");e.forEach((r,n)=>{if(!t.isValid(r))throw new Error("invalid scalar at index "+n)})}var fi=new WeakMap,Na=new WeakMap;function li(e){return Na.get(e)||1}function An(e,t){return{constTimeNegate:ci,hasPrecomputes(r){return li(r)!==1},unsafeLadder(r,n,o=e.ZERO){let i=r;for(;n>_a;)n&di&&(o=o.add(i)),i=i.double(),n>>=di;return o},precomputeWindow(r,n){let{windows:o,windowSize:i}=ui(n,t),s=[],a=r,c=a;for(let l=0;l<o;l++){c=a,s.push(c);for(let u=1;u<i;u++)c=c.add(a),s.push(c);a=c.double()}return s},wNAF(r,n,o){let i=e.ZERO,s=e.BASE,a=ui(r,t);for(let c=0;c<a.windows;c++){let{nextN:l,offset:u,isZero:f,isNeg:d,isNegF:w,offsetF:B}=Ua(o,c,a);o=l,f?s=s.add(ci(w,n[B])):i=i.add(ci(d,n[u]))}return{p:i,f:s}},wNAFUnsafe(r,n,o,i=e.ZERO){let s=ui(r,t);for(let a=0;a<s.windows&&o!==_a;a++){let{nextN:c,offset:l,isZero:u,isNeg:f}=Ua(o,a,s);if(o=c,!u){let d=n[l];i=i.add(f?d.negate():d)}}return i},getPrecomputes(r,n,o){let i=fi.get(n);return i||(i=this.precomputeWindow(n,r),r!==1&&fi.set(n,o(i))),i},wNAFCached(r,n,o){let i=li(r);return this.wNAF(i,this.getPrecomputes(i,r,o),n)},wNAFCachedUnsafe(r,n,o,i){let s=li(r);return s===1?this.unsafeLadder(r,n,i):this.wNAFUnsafe(s,this.getPrecomputes(s,r,o),n,i)},setWindowSize(r,n){Pa(n,t),Na.set(r,n),fi.delete(r)}}}function In(e,t,r,n){if(sd(r,e),ad(n,t),r.length!==n.length)throw new Error("arrays of points and scalars must have equal length");let o=e.ZERO,i=Ea(BigInt(r.length)),s=i>12?i-3:i>4?i-2:i?2:1,a=Oe(s),c=new Array(Number(a)+1).fill(o),l=Math.floor((t.BITS-1)/s)*s,u=o;for(let f=l;f>=0;f-=s){c.fill(o);for(let w=0;w<n.length;w++){let B=n[w],x=Number(B>>BigInt(f)&a);c[x]=c[x].add(r[w])}let d=o;for(let w=c.length-1,B=o;w>0;w--)B=B.add(c[w]),d=d.add(B);if(u=u.add(d),f!==0)for(let w=0;w<s;w++)u=u.double()}return u}function Or(e){return ii(e.Fp),de(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...si(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}var ee=BigInt(0),vt=BigInt(1),La=BigInt(2),cd=BigInt(8),ud={zip215:!0};function fd(e){let t=Or(e);return de(e,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...t})}function ka(e){let t=fd(e),{Fp:r,n,prehash:o,hash:i,randomBytes:s,nByteLength:a,h:c}=t,l=La<<BigInt(a*8)-vt,u=r.create,f=he(t.n,t.nBitLength),d=t.uvRatio||((E,p)=>{try{return{isValid:!0,value:r.sqrt(E*r.inv(p))}}catch{return{isValid:!1,value:ee}}}),w=t.adjustScalarBytes||(E=>E),B=t.domain||((E,p,I)=>{if(te("phflag",I),p.length||I)throw new Error("Contexts/pre-hash are not supported");return E});function x(E,p,I=!1){let R=I?vt:ee;Lt("coordinate "+E,p,R,l)}function h(E){if(!(E instanceof y))throw new Error("ExtendedPoint expected")}let S=ir((E,p)=>{let{ex:I,ey:R,ez:F}=E,H=E.is0();p==null&&(p=H?cd:r.inv(F));let z=u(I*p),$=u(R*p),Z=u(F*p);if(H)return{x:ee,y:vt};if(Z!==vt)throw new Error("invZ was invalid");return{x:z,y:$}}),U=ir(E=>{let{a:p,d:I}=t;if(E.is0())throw new Error("bad point: ZERO");let{ex:R,ey:F,ez:H,et:z}=E,$=u(R*R),Z=u(F*F),Y=u(H*H),at=u(Y*Y),it=u($*p),ht=u(Y*u(it+Z)),It=u(at+u(I*u($*Z)));if(ht!==It)throw new Error("bad point: equation left != right (1)");let ft=u(R*F),gt=u(H*z);if(ft!==gt)throw new Error("bad point: equation left != right (2)");return!0});class y{constructor(p,I,R,F){x("x",p),x("y",I),x("z",R,!0),x("t",F),this.ex=p,this.ey=I,this.ez=R,this.et=F,Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(p){if(p instanceof y)throw new Error("extended point not allowed");let{x:I,y:R}=p||{};return x("x",I),x("y",R),new y(I,R,vt,u(I*R))}static normalizeZ(p){let I=sr(r,p.map(R=>R.ez));return p.map((R,F)=>R.toAffine(I[F])).map(y.fromAffine)}static msm(p,I){return In(y,f,p,I)}_setWindowSize(p){D.setWindowSize(this,p)}assertValidity(){U(this)}equals(p){h(p);let{ex:I,ey:R,ez:F}=this,{ex:H,ey:z,ez:$}=p,Z=u(I*$),Y=u(H*F),at=u(R*$),it=u(z*F);return Z===Y&&at===it}is0(){return this.equals(y.ZERO)}negate(){return new y(u(-this.ex),this.ey,this.ez,u(-this.et))}double(){let{a:p}=t,{ex:I,ey:R,ez:F}=this,H=u(I*I),z=u(R*R),$=u(La*u(F*F)),Z=u(p*H),Y=I+R,at=u(u(Y*Y)-H-z),it=Z+z,ht=it-$,It=Z-z,ft=u(at*ht),gt=u(it*It),Pt=u(at*It),Vt=u(ht*it);return new y(ft,gt,Vt,Pt)}add(p){h(p);let{a:I,d:R}=t,{ex:F,ey:H,ez:z,et:$}=this,{ex:Z,ey:Y,ez:at,et:it}=p,ht=u(F*Z),It=u(H*Y),ft=u($*R*it),gt=u(z*at),Pt=u((F+H)*(Z+Y)-ht-It),Vt=gt-ft,Ar=gt+ft,vs=u(It-I*ht),Qu=u(Pt*Vt),tf=u(Ar*vs),ef=u(Pt*vs),rf=u(Vt*Ar);return new y(Qu,tf,rf,ef)}subtract(p){return this.add(p.negate())}wNAF(p){return D.wNAFCached(this,p,y.normalizeZ)}multiply(p){let I=p;Lt("scalar",I,vt,n);let{p:R,f:F}=this.wNAF(I);return y.normalizeZ([R,F])[0]}multiplyUnsafe(p,I=y.ZERO){let R=p;return Lt("scalar",R,ee,n),R===ee?O:this.is0()||R===vt?this:D.wNAFCachedUnsafe(this,R,y.normalizeZ,I)}isSmallOrder(){return this.multiplyUnsafe(c).is0()}isTorsionFree(){return D.unsafeLadder(this,n).is0()}toAffine(p){return S(this,p)}clearCofactor(){let{h:p}=t;return p===vt?this:this.multiplyUnsafe(p)}static fromHex(p,I=!1){let{d:R,a:F}=t,H=r.BYTES;p=nt("pointHex",p,H),te("zip215",I);let z=p.slice(),$=p[H-1];z[H-1]=$&-129;let Z=De(z),Y=I?l:r.ORDER;Lt("pointHex.y",Z,ee,Y);let at=u(Z*Z),it=u(at-vt),ht=u(R*at-F),{isValid:It,value:ft}=d(it,ht);if(!It)throw new Error("Point.fromHex: invalid y coordinate");let gt=(ft&vt)===vt,Pt=($&128)!==0;if(!I&&ft===ee&&Pt)throw new Error("Point.fromHex: x=0 and x_0=1");return Pt!==gt&&(ft=u(-ft)),y.fromAffine({x:ft,y:Z})}static fromPrivateKey(p){let{scalar:I}=b(p);return P.multiply(I)}toRawBytes(){let{x:p,y:I}=this.toAffine(),R=or(I,r.BYTES);return R[R.length-1]|=p&vt?128:0,R}toHex(){return Ae(this.toRawBytes())}}y.BASE=new y(t.Gx,t.Gy,vt,u(t.Gx*t.Gy)),y.ZERO=new y(ee,vt,vt,ee);let{BASE:P,ZERO:O}=y,D=An(y,a*8);function N(E){return J(E,n)}function g(E){return N(De(E))}function b(E){let p=r.BYTES;E=nt("private key",E,p);let I=nt("hashed private key",i(E),2*p),R=w(I.slice(0,p)),F=I.slice(p,2*p),H=g(R);return{head:R,prefix:F,scalar:H}}function K(E){let{head:p,prefix:I,scalar:R}=b(E),F=P.multiply(R),H=F.toRawBytes();return{head:p,prefix:I,scalar:R,point:F,pointBytes:H}}function k(E){return K(E).pointBytes}function _(E=Uint8Array.of(),...p){let I=Ie(...p);return g(i(B(I,nt("context",E),!!o)))}function V(E,p,I={}){E=nt("message",E),o&&(E=o(E));let{prefix:R,scalar:F,pointBytes:H}=K(p),z=_(I.context,R,E),$=P.multiply(z).toRawBytes(),Z=_(I.context,$,H,E),Y=N(z+Z*F);Lt("signature.s",Y,ee,n);let at=Ie($,or(Y,r.BYTES));return nt("result",at,r.BYTES*2)}let v=ud;function A(E,p,I,R=v){let{context:F,zip215:H}=R,z=r.BYTES;E=nt("signature",E,2*z),p=nt("message",p),I=nt("publicKey",I,z),H!==void 0&&te("zip215",H),o&&(p=o(p));let $=De(E.slice(z,2*z)),Z,Y,at;try{Z=y.fromHex(I,H),Y=y.fromHex(E.slice(0,z),H),at=P.multiplyUnsafe($)}catch{return!1}if(!H&&Z.isSmallOrder())return!1;let it=_(F,Y.toRawBytes(),Z.toRawBytes(),p);return Y.add(Z.multiplyUnsafe(it)).subtract(at).clearCofactor().equals(y.ZERO)}return P._setWindowSize(8),{CURVE:t,getPublicKey:k,sign:V,verify:A,ExtendedPoint:y,utils:{getExtendedPublicKey:K,randomPrivateKey:()=>s(r.BYTES),precompute(E=8,p=y.BASE){return p._setWindowSize(E),p.multiply(BigInt(3)),p}}}}var hi=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),Ra=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752"),Bm=BigInt(0),ld=BigInt(1),Da=BigInt(2),Cm=BigInt(3),dd=BigInt(5),hd=BigInt(8);function pd(e){let t=BigInt(10),r=BigInt(20),n=BigInt(40),o=BigInt(80),i=hi,a=e*e%i*e%i,c=et(a,Da,i)*a%i,l=et(c,ld,i)*e%i,u=et(l,dd,i)*l%i,f=et(u,t,i)*u%i,d=et(f,r,i)*f%i,w=et(d,n,i)*d%i,B=et(w,o,i)*w%i,x=et(B,o,i)*w%i,h=et(x,t,i)*u%i;return{pow_p_5_8:et(h,Da,i)*e%i,b2:a}}function md(e){return e[0]&=248,e[31]&=127,e[31]|=64,e}function yd(e,t){let r=hi,n=J(t*t*t,r),o=J(n*n*t,r),i=pd(e*o).pow_p_5_8,s=J(e*n*i,r),a=J(t*s*s,r),c=s,l=J(s*Ra,r),u=a===e,f=a===J(-e,r),d=a===J(-e*Ra,r);return u&&(s=c),(f||d)&&(s=l),Ta(s,r)&&(s=J(-s,r)),{isValid:u||f,value:s}}var Ka=he(hi,void 0,!0),gd={a:Ka.create(BigInt(-1)),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:Ka,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:hd,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:ya,randomBytes:xn,adjustScalarBytes:md,uvRatio:yd},Oa=ka(gd);var Tn=32;function Fa(e,t,r){return Oa.verify(t,r instanceof Uint8Array?r:r.subarray(),e)}var Bn=class{type="Ed25519";raw;constructor(t){this.raw=pi(t,Tn)}toMultihash(){return zt.digest(er(this))}toCID(){return Q.createV1(114,this.toMultihash())}toString(){return X.encode(this.toMultihash().bytes).substring(1)}equals(t){return t==null||!(t.raw instanceof Uint8Array)?!1:rt(this.raw,t.raw)}verify(t,r){return Fa(this.raw,r,t)}};function mi(e){return e=pi(e,Tn),new Bn(e)}function pi(e,t){if(e=Uint8Array.from(e??[]),e.length!==t)throw new ct(`Key must be a Uint8Array of length ${t}, got ${e.length}`);return e}var wd=Math.pow(2,7),bd=Math.pow(2,14),Ed=Math.pow(2,21),yi=Math.pow(2,28),gi=Math.pow(2,35),xi=Math.pow(2,42),wi=Math.pow(2,49),W=128,wt=127;function Ut(e){if(e<wd)return 1;if(e<bd)return 2;if(e<Ed)return 3;if(e<yi)return 4;if(e<gi)return 5;if(e<xi)return 6;if(e<wi)return 7;if(Number.MAX_SAFE_INTEGER!=null&&e>Number.MAX_SAFE_INTEGER)throw new RangeError("Could not encode varint");return 8}function bi(e,t,r=0){switch(Ut(e)){case 8:t[r++]=e&255|W,e/=128;case 7:t[r++]=e&255|W,e/=128;case 6:t[r++]=e&255|W,e/=128;case 5:t[r++]=e&255|W,e/=128;case 4:t[r++]=e&255|W,e>>>=7;case 3:t[r++]=e&255|W,e>>>=7;case 2:t[r++]=e&255|W,e>>>=7;case 1:{t[r++]=e&255,e>>>=7;break}default:throw new Error("unreachable")}return t}function Sd(e,t,r=0){switch(Ut(e)){case 8:t.set(r++,e&255|W),e/=128;case 7:t.set(r++,e&255|W),e/=128;case 6:t.set(r++,e&255|W),e/=128;case 5:t.set(r++,e&255|W),e/=128;case 4:t.set(r++,e&255|W),e>>>=7;case 3:t.set(r++,e&255|W),e>>>=7;case 2:t.set(r++,e&255|W),e>>>=7;case 1:{t.set(r++,e&255),e>>>=7;break}default:throw new Error("unreachable")}return t}function Ei(e,t){let r=e[t],n=0;if(n+=r&wt,r<W||(r=e[t+1],n+=(r&wt)<<7,r<W)||(r=e[t+2],n+=(r&wt)<<14,r<W)||(r=e[t+3],n+=(r&wt)<<21,r<W)||(r=e[t+4],n+=(r&wt)*yi,r<W)||(r=e[t+5],n+=(r&wt)*gi,r<W)||(r=e[t+6],n+=(r&wt)*xi,r<W)||(r=e[t+7],n+=(r&wt)*wi,r<W))return n;throw new RangeError("Could not decode varint")}function vd(e,t){let r=e.get(t),n=0;if(n+=r&wt,r<W||(r=e.get(t+1),n+=(r&wt)<<7,r<W)||(r=e.get(t+2),n+=(r&wt)<<14,r<W)||(r=e.get(t+3),n+=(r&wt)<<21,r<W)||(r=e.get(t+4),n+=(r&wt)*yi,r<W)||(r=e.get(t+5),n+=(r&wt)*gi,r<W)||(r=e.get(t+6),n+=(r&wt)*xi,r<W)||(r=e.get(t+7),n+=(r&wt)*wi,r<W))return n;throw new RangeError("Could not decode varint")}function ar(e,t,r=0){return t==null&&(t=Ct(Ut(e))),t instanceof Uint8Array?bi(e,t,r):Sd(e,t,r)}function Me(e,t=0){return e instanceof Uint8Array?Ei(e,t):vd(e,t)}var Si=new Float32Array([-0]),Te=new Uint8Array(Si.buffer);function qa(e,t,r){Si[0]=e,t[r]=Te[0],t[r+1]=Te[1],t[r+2]=Te[2],t[r+3]=Te[3]}function Ha(e,t){return Te[0]=e[t],Te[1]=e[t+1],Te[2]=e[t+2],Te[3]=e[t+3],Si[0]}var vi=new Float64Array([-0]),bt=new Uint8Array(vi.buffer);function za(e,t,r){vi[0]=e,t[r]=bt[0],t[r+1]=bt[1],t[r+2]=bt[2],t[r+3]=bt[3],t[r+4]=bt[4],t[r+5]=bt[5],t[r+6]=bt[6],t[r+7]=bt[7]}function $a(e,t){return bt[0]=e[t],bt[1]=e[t+1],bt[2]=e[t+2],bt[3]=e[t+3],bt[4]=e[t+4],bt[5]=e[t+5],bt[6]=e[t+6],bt[7]=e[t+7],vi[0]}var Ad=BigInt(Number.MAX_SAFE_INTEGER),Id=BigInt(Number.MIN_SAFE_INTEGER),kt=class e{lo;hi;constructor(t,r){this.lo=t|0,this.hi=r|0}toNumber(t=!1){if(!t&&this.hi>>>31>0){let r=~this.lo+1>>>0,n=~this.hi>>>0;return r===0&&(n=n+1>>>0),-(r+n*4294967296)}return this.lo+this.hi*4294967296}toBigInt(t=!1){if(t)return BigInt(this.lo>>>0)+(BigInt(this.hi>>>0)<<32n);if(this.hi>>>31){let r=~this.lo+1>>>0,n=~this.hi>>>0;return r===0&&(n=n+1>>>0),-(BigInt(r)+(BigInt(n)<<32n))}return BigInt(this.lo>>>0)+(BigInt(this.hi>>>0)<<32n)}toString(t=!1){return this.toBigInt(t).toString()}zzEncode(){let t=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^t)>>>0,this.lo=(this.lo<<1^t)>>>0,this}zzDecode(){let t=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^t)>>>0,this.hi=(this.hi>>>1^t)>>>0,this}length(){let t=this.lo,r=(this.lo>>>28|this.hi<<4)>>>0,n=this.hi>>>24;return n===0?r===0?t<16384?t<128?1:2:t<2097152?3:4:r<16384?r<128?5:6:r<2097152?7:8:n<128?9:10}static fromBigInt(t){if(t===0n)return Ve;if(t<Ad&&t>Id)return this.fromNumber(Number(t));let r=t<0n;r&&(t=-t);let n=t>>32n,o=t-(n<<32n);return r&&(n=~n|0n,o=~o|0n,++o>ja&&(o=0n,++n>ja&&(n=0n))),new e(Number(o),Number(n))}static fromNumber(t){if(t===0)return Ve;let r=t<0;r&&(t=-t);let n=t>>>0,o=(t-n)/4294967296>>>0;return r&&(o=~o>>>0,n=~n>>>0,++n>4294967295&&(n=0,++o>4294967295&&(o=0))),new e(n,o)}static from(t){return typeof t=="number"?e.fromNumber(t):typeof t=="bigint"?e.fromBigInt(t):typeof t=="string"?e.fromBigInt(BigInt(t)):t.low!=null||t.high!=null?new e(t.low>>>0,t.high>>>0):Ve}},Ve=new kt(0,0);Ve.toBigInt=function(){return 0n};Ve.zzEncode=Ve.zzDecode=function(){return this};Ve.length=function(){return 1};var ja=4294967296n;function Ga(e){let t=0,r=0;for(let n=0;n<e.length;++n)r=e.charCodeAt(n),r<128?t+=1:r<2048?t+=2:(r&64512)===55296&&(e.charCodeAt(n+1)&64512)===56320?(++n,t+=4):t+=3;return t}function Za(e,t,r){if(r-t<1)return"";let o,i=[],s=0,a;for(;t<r;)a=e[t++],a<128?i[s++]=a:a>191&&a<224?i[s++]=(a&31)<<6|e[t++]&63:a>239&&a<365?(a=((a&7)<<18|(e[t++]&63)<<12|(e[t++]&63)<<6|e[t++]&63)-65536,i[s++]=55296+(a>>10),i[s++]=56320+(a&1023)):i[s++]=(a&15)<<12|(e[t++]&63)<<6|e[t++]&63,s>8191&&((o??(o=[])).push(String.fromCharCode.apply(String,i)),s=0);return o!=null?(s>0&&o.push(String.fromCharCode.apply(String,i.slice(0,s))),o.join("")):String.fromCharCode.apply(String,i.slice(0,s))}function Ai(e,t,r){let n=r,o,i;for(let s=0;s<e.length;++s)o=e.charCodeAt(s),o<128?t[r++]=o:o<2048?(t[r++]=o>>6|192,t[r++]=o&63|128):(o&64512)===55296&&((i=e.charCodeAt(s+1))&64512)===56320?(o=65536+((o&1023)<<10)+(i&1023),++s,t[r++]=o>>18|240,t[r++]=o>>12&63|128,t[r++]=o>>6&63|128,t[r++]=o&63|128):(t[r++]=o>>12|224,t[r++]=o>>6&63|128,t[r++]=o&63|128);return r-n}function jt(e,t){return RangeError(`index out of range: ${e.pos} + ${t??1} > ${e.len}`)}function Cn(e,t){return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0}var Ii=class{buf;pos;len;_slice=Uint8Array.prototype.subarray;constructor(t){this.buf=t,this.pos=0,this.len=t.length}uint32(){let t=4294967295;if(t=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(t=(t|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(t=(t|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(t=(t|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(t=(t|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return t;if((this.pos+=5)>this.len)throw this.pos=this.len,jt(this,10);return t}int32(){return this.uint32()|0}sint32(){let t=this.uint32();return t>>>1^-(t&1)|0}bool(){return this.uint32()!==0}fixed32(){if(this.pos+4>this.len)throw jt(this,4);return Cn(this.buf,this.pos+=4)}sfixed32(){if(this.pos+4>this.len)throw jt(this,4);return Cn(this.buf,this.pos+=4)|0}float(){if(this.pos+4>this.len)throw jt(this,4);let t=Ha(this.buf,this.pos);return this.pos+=4,t}double(){if(this.pos+8>this.len)throw jt(this,4);let t=$a(this.buf,this.pos);return this.pos+=8,t}bytes(){let t=this.uint32(),r=this.pos,n=this.pos+t;if(n>this.len)throw jt(this,t);return this.pos+=t,r===n?new Uint8Array(0):this.buf.subarray(r,n)}string(){let t=this.bytes();return Za(t,0,t.length)}skip(t){if(typeof t=="number"){if(this.pos+t>this.len)throw jt(this,t);this.pos+=t}else do if(this.pos>=this.len)throw jt(this);while((this.buf[this.pos++]&128)!==0);return this}skipType(t){switch(t){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(t=this.uint32()&7)!==4;)this.skipType(t);break;case 5:this.skip(4);break;default:throw Error(`invalid wire type ${t} at offset ${this.pos}`)}return this}readLongVarint(){let t=new kt(0,0),r=0;if(this.len-this.pos>4){for(;r<4;++r)if(t.lo=(t.lo|(this.buf[this.pos]&127)<<r*7)>>>0,this.buf[this.pos++]<128)return t;if(t.lo=(t.lo|(this.buf[this.pos]&127)<<28)>>>0,t.hi=(t.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return t;r=0}else{for(;r<3;++r){if(this.pos>=this.len)throw jt(this);if(t.lo=(t.lo|(this.buf[this.pos]&127)<<r*7)>>>0,this.buf[this.pos++]<128)return t}return t.lo=(t.lo|(this.buf[this.pos++]&127)<<r*7)>>>0,t}if(this.len-this.pos>4){for(;r<5;++r)if(t.hi=(t.hi|(this.buf[this.pos]&127)<<r*7+3)>>>0,this.buf[this.pos++]<128)return t}else for(;r<5;++r){if(this.pos>=this.len)throw jt(this);if(t.hi=(t.hi|(this.buf[this.pos]&127)<<r*7+3)>>>0,this.buf[this.pos++]<128)return t}throw Error("invalid varint encoding")}readFixed64(){if(this.pos+8>this.len)throw jt(this,8);let t=Cn(this.buf,this.pos+=4),r=Cn(this.buf,this.pos+=4);return new kt(t,r)}int64(){return this.readLongVarint().toBigInt()}int64Number(){return this.readLongVarint().toNumber()}int64String(){return this.readLongVarint().toString()}uint64(){return this.readLongVarint().toBigInt(!0)}uint64Number(){let t=Ei(this.buf,this.pos);return this.pos+=Ut(t),t}uint64String(){return this.readLongVarint().toString(!0)}sint64(){return this.readLongVarint().zzDecode().toBigInt()}sint64Number(){return this.readLongVarint().zzDecode().toNumber()}sint64String(){return this.readLongVarint().zzDecode().toString()}fixed64(){return this.readFixed64().toBigInt()}fixed64Number(){return this.readFixed64().toNumber()}fixed64String(){return this.readFixed64().toString()}sfixed64(){return this.readFixed64().toBigInt()}sfixed64Number(){return this.readFixed64().toNumber()}sfixed64String(){return this.readFixed64().toString()}};function Ti(e){return new Ii(e instanceof Uint8Array?e:e.subarray())}function cr(e,t,r){let n=Ti(e);return t.decode(n,void 0,r)}function Bi(e){let t=e??8192,r=t>>>1,n,o=t;return function(s){if(s<1||s>r)return Ct(s);o+s>t&&(n=Ct(t),o=0);let a=n.subarray(o,o+=s);return(o&7)!==0&&(o=(o|7)+1),a}}var qe=class{fn;len;next;val;constructor(t,r,n){this.fn=t,this.len=r,this.next=void 0,this.val=n}};function Ci(){}var Ui=class{head;tail;len;next;constructor(t){this.head=t.head,this.tail=t.tail,this.len=t.len,this.next=t.states}},Td=Bi();function Bd(e){return globalThis.Buffer!=null?Ct(e):Td(e)}var Mr=class{len;head;tail;states;constructor(){this.len=0,this.head=new qe(Ci,0,0),this.tail=this.head,this.states=null}_push(t,r,n){return this.tail=this.tail.next=new qe(t,r,n),this.len+=r,this}uint32(t){return this.len+=(this.tail=this.tail.next=new Pi((t=t>>>0)<128?1:t<16384?2:t<2097152?3:t<268435456?4:5,t)).len,this}int32(t){return t<0?this._push(_n,10,kt.fromNumber(t)):this.uint32(t)}sint32(t){return this.uint32((t<<1^t>>31)>>>0)}uint64(t){let r=kt.fromBigInt(t);return this._push(_n,r.length(),r)}uint64Number(t){return this._push(bi,Ut(t),t)}uint64String(t){return this.uint64(BigInt(t))}int64(t){return this.uint64(t)}int64Number(t){return this.uint64Number(t)}int64String(t){return this.uint64String(t)}sint64(t){let r=kt.fromBigInt(t).zzEncode();return this._push(_n,r.length(),r)}sint64Number(t){let r=kt.fromNumber(t).zzEncode();return this._push(_n,r.length(),r)}sint64String(t){return this.sint64(BigInt(t))}bool(t){return this._push(_i,1,t?1:0)}fixed32(t){return this._push(Fr,4,t>>>0)}sfixed32(t){return this.fixed32(t)}fixed64(t){let r=kt.fromBigInt(t);return this._push(Fr,4,r.lo)._push(Fr,4,r.hi)}fixed64Number(t){let r=kt.fromNumber(t);return this._push(Fr,4,r.lo)._push(Fr,4,r.hi)}fixed64String(t){return this.fixed64(BigInt(t))}sfixed64(t){return this.fixed64(t)}sfixed64Number(t){return this.fixed64Number(t)}sfixed64String(t){return this.fixed64String(t)}float(t){return this._push(qa,4,t)}double(t){return this._push(za,8,t)}bytes(t){let r=t.length>>>0;return r===0?this._push(_i,1,0):this.uint32(r)._push(_d,r,t)}string(t){let r=Ga(t);return r!==0?this.uint32(r)._push(Ai,r,t):this._push(_i,1,0)}fork(){return this.states=new Ui(this),this.head=this.tail=new qe(Ci,0,0),this.len=0,this}reset(){return this.states!=null?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new qe(Ci,0,0),this.len=0),this}ldelim(){let t=this.head,r=this.tail,n=this.len;return this.reset().uint32(n),n!==0&&(this.tail.next=t.next,this.tail=r,this.len+=n),this}finish(){let t=this.head.next,r=Bd(this.len),n=0;for(;t!=null;)t.fn(t.val,r,n),n+=t.len,t=t.next;return r}};function _i(e,t,r){t[r]=e&255}function Cd(e,t,r){for(;e>127;)t[r++]=e&127|128,e>>>=7;t[r]=e}var Pi=class extends qe{next;constructor(t,r){super(Cd,t,r),this.next=void 0}};function _n(e,t,r){for(;e.hi!==0;)t[r++]=e.lo&127|128,e.lo=(e.lo>>>7|e.hi<<25)>>>0,e.hi>>>=7;for(;e.lo>127;)t[r++]=e.lo&127|128,e.lo=e.lo>>>7;t[r++]=e.lo}function Fr(e,t,r){t[r]=e&255,t[r+1]=e>>>8&255,t[r+2]=e>>>16&255,t[r+3]=e>>>24}function _d(e,t,r){t.set(e,r)}globalThis.Buffer!=null&&(Mr.prototype.bytes=function(e){let t=e.length>>>0;return this.uint32(t),t>0&&this._push(Ud,t,e),this},Mr.prototype.string=function(e){let t=globalThis.Buffer.byteLength(e);return this.uint32(t),t>0&&this._push(Pd,t,e),this});function Ud(e,t,r){t.set(e,r)}function Pd(e,t,r){e.length<40?Ai(e,t,r):t.utf8Write!=null?t.utf8Write(e,r):t.set(j(e),r)}function Ni(){return new Mr}function ur(e,t){let r=Ni();return t.encode(e,r,{lengthDelimited:!1}),r.finish()}var fr;(function(e){e[e.VARINT=0]="VARINT",e[e.BIT64=1]="BIT64",e[e.LENGTH_DELIMITED=2]="LENGTH_DELIMITED",e[e.START_GROUP=3]="START_GROUP",e[e.END_GROUP=4]="END_GROUP",e[e.BIT32=5]="BIT32"})(fr||(fr={}));function Un(e,t,r,n){return{name:e,type:t,encode:r,decode:n}}function Vr(e){function t(o){if(e[o.toString()]==null)throw new Error("Invalid enum value");return e[o]}let r=function(i,s){let a=t(i);s.int32(a)},n=function(i){let s=i.int32();return t(s)};return Un("enum",fr.VARINT,r,n)}function lr(e,t){return Un("message",fr.LENGTH_DELIMITED,e,t)}var st;(function(e){e.RSA="RSA",e.Ed25519="Ed25519",e.secp256k1="secp256k1",e.ECDSA="ECDSA"})(st||(st={}));var Li;(function(e){e[e.RSA=0]="RSA",e[e.Ed25519=1]="Ed25519",e[e.secp256k1=2]="secp256k1",e[e.ECDSA=3]="ECDSA"})(Li||(Li={}));(function(e){e.codec=()=>Vr(Li)})(st||(st={}));var re;(function(e){let t;e.codec=()=>(t==null&&(t=lr((r,n,o={})=>{o.lengthDelimited!==!1&&n.fork(),r.Type!=null&&(n.uint32(8),st.codec().encode(r.Type,n)),r.Data!=null&&(n.uint32(18),n.bytes(r.Data)),o.lengthDelimited!==!1&&n.ldelim()},(r,n,o={})=>{let i={},s=n==null?r.len:r.pos+n;for(;r.pos<s;){let a=r.uint32();switch(a>>>3){case 1:{i.Type=st.codec().decode(r);break}case 2:{i.Data=r.bytes();break}default:{r.skipType(a&7);break}}}return i})),t),e.encode=r=>ur(r,e.codec()),e.decode=(r,n)=>cr(r,e.codec(),n)})(re||(re={}));var ki;(function(e){let t;e.codec=()=>(t==null&&(t=lr((r,n,o={})=>{o.lengthDelimited!==!1&&n.fork(),r.Type!=null&&(n.uint32(8),st.codec().encode(r.Type,n)),r.Data!=null&&(n.uint32(18),n.bytes(r.Data)),o.lengthDelimited!==!1&&n.ldelim()},(r,n,o={})=>{let i={},s=n==null?r.len:r.pos+n;for(;r.pos<s;){let a=r.uint32();switch(a>>>3){case 1:{i.Type=st.codec().decode(r);break}case 2:{i.Data=r.bytes();break}default:{r.skipType(a&7);break}}}return i})),t),e.encode=r=>ur(r,e.codec()),e.decode=(r,n)=>cr(r,e.codec(),n)})(ki||(ki={}));var qr=class extends Error{constructor(t="An error occurred while verifying a message"){super(t),this.name="VerificationError"}},Pn=class extends Error{constructor(t="Missing Web Crypto API"){super(t),this.name="WebCryptoMissingError"}};var Xa={get(e=globalThis){let t=e.crypto;if(t?.subtle==null)throw new Pn("Missing Web Crypto API. The most likely cause of this error is that this page is being accessed from an insecure context (i.e. not HTTPS). For more information and possible resolutions see https://github.com/libp2p/js-libp2p/blob/main/packages/crypto/README.md#web-crypto-api");return t}};var Be=Xa;var zr={};Tt(zr,{MAX_RSA_KEY_SIZE:()=>Ri,generateRSAKeyPair:()=>ec,jwkToJWKKeyPair:()=>rc,jwkToPkcs1:()=>Rd,jwkToPkix:()=>Fi,jwkToRSAPrivateKey:()=>Hi,pkcs1MessageToJwk:()=>Ki,pkcs1MessageToRSAPrivateKey:()=>Mi,pkcs1ToJwk:()=>kd,pkcs1ToRSAPrivateKey:()=>tc,pkixMessageToJwk:()=>Oi,pkixMessageToRSAPublicKey:()=>qi,pkixToJwk:()=>Dd,pkixToRSAPublicKey:()=>Vi});var Nn=En;var dr=class{type="RSA";jwk;_raw;_multihash;constructor(t,r){this.jwk=t,this._multihash=r}get raw(){return this._raw==null&&(this._raw=zr.jwkToPkix(this.jwk)),this._raw}toMultihash(){return this._multihash}toCID(){return Q.createV1(114,this._multihash)}toString(){return X.encode(this.toMultihash().bytes).substring(1)}equals(t){return t==null||!(t.raw instanceof Uint8Array)?!1:rt(this.raw,t.raw)}verify(t,r){return Qa(this.jwk,r,t)}},Hr=class{type="RSA";jwk;_raw;publicKey;constructor(t,r){this.jwk=t,this.publicKey=r}get raw(){return this._raw==null&&(this._raw=zr.jwkToPkcs1(this.jwk)),this._raw}equals(t){return t==null||!(t.raw instanceof Uint8Array)?!1:rt(this.raw,t.raw)}sign(t){return Ja(this.jwk,t)}};var Ri=8192,Di=18,Nd=1062,Ld=Uint8Array.from([48,13,6,9,42,134,72,134,247,13,1,1,1,5,0]);function kd(e){let t=ae(e);return Ki(t)}function Ki(e){return{n:q(e[1],"base64url"),e:q(e[2],"base64url"),d:q(e[3],"base64url"),p:q(e[4],"base64url"),q:q(e[5],"base64url"),dp:q(e[6],"base64url"),dq:q(e[7],"base64url"),qi:q(e[8],"base64url"),kty:"RSA"}}function Rd(e){if(e.n==null||e.e==null||e.d==null||e.p==null||e.q==null||e.dp==null||e.dq==null||e.qi==null)throw new ct("JWK was missing components");return be([_t(Uint8Array.from([0])),_t(j(e.n,"base64url")),_t(j(e.e,"base64url")),_t(j(e.d,"base64url")),_t(j(e.p,"base64url")),_t(j(e.q,"base64url")),_t(j(e.dp,"base64url")),_t(j(e.dq,"base64url")),_t(j(e.qi,"base64url"))]).subarray()}function Dd(e){let t=ae(e,{offset:0});return Oi(t)}function Oi(e){let t=ae(e[1],{offset:0});return{kty:"RSA",n:q(t[0],"base64url"),e:q(t[1],"base64url")}}function Fi(e){if(e.n==null||e.e==null)throw new ct("JWK was missing components");return be([Ld,mn(be([_t(j(e.n,"base64url")),_t(j(e.e,"base64url"))]))]).subarray()}function tc(e){let t=ae(e);return Mi(t)}function Mi(e){let t=Ki(e);return Hi(t)}function Vi(e,t){if(e.byteLength>=Nd)throw new $e("Key size is too large");let r=ae(e,{offset:0});return qi(r,e,t)}function qi(e,t,r){let n=Oi(e);if(r==null){let o=Nn(re.encode({Type:st.RSA,Data:t}));r=Ht(Di,o)}return new dr(n,r)}function Hi(e){if(oc(e)>Ri)throw new ct("Key size is too large");let t=rc(e),r=Nn(re.encode({Type:st.RSA,Data:Fi(t.publicKey)})),n=Ht(Di,r);return new Hr(t.privateKey,new dr(t.publicKey,n))}async function ec(e){if(e>Ri)throw new ct("Key size is too large");let t=await nc(e),r=Nn(re.encode({Type:st.RSA,Data:Fi(t.publicKey)})),n=Ht(Di,r);return new Hr(t.privateKey,new dr(t.publicKey,n))}function rc(e){if(e==null)throw new ct("Missing key parameter");return{privateKey:e,publicKey:{kty:e.kty,n:e.n,e:e.e}}}async function nc(e){let t=await Be.get().subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:e,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-256"}},!0,["sign","verify"]),r=await Kd(t);return{privateKey:r[0],publicKey:r[1]}}async function Ja(e,t){let r=await Be.get().subtle.importKey("jwk",e,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!1,["sign"]),n=await Be.get().subtle.sign({name:"RSASSA-PKCS1-v1_5"},r,t instanceof Uint8Array?t:t.subarray());return new Uint8Array(n,0,n.byteLength)}async function Qa(e,t,r){let n=await Be.get().subtle.importKey("jwk",e,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!1,["verify"]);return Be.get().subtle.verify({name:"RSASSA-PKCS1-v1_5"},n,t,r instanceof Uint8Array?r:r.subarray())}async function Kd(e){if(e.privateKey==null||e.publicKey==null)throw new ct("Private and public key are required");return Promise.all([Be.get().subtle.exportKey("jwk",e.privateKey),Be.get().subtle.exportKey("jwk",e.publicKey)])}function oc(e){if(e.kty!=="RSA")throw new ct("invalid key type");if(e.n==null)throw new ct("invalid key modulus");return j(e.n,"base64url").length*8}var Ln=class extends rr{constructor(t,r){super(),this.finished=!1,this.destroyed=!1,ra(t);let n=Nr(r);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let o=this.blockLen,i=new Uint8Array(o);i.set(n.length>o?t.create().update(n).digest():n);for(let s=0;s<i.length;s++)i[s]^=54;this.iHash.update(i),this.oHash=t.create();for(let s=0;s<i.length;s++)i[s]^=106;this.oHash.update(i),ce(i)}update(t){return nr(this),this.iHash.update(t),this}digestInto(t){nr(this),Ne(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){let t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));let{oHash:r,iHash:n,finished:o,destroyed:i,blockLen:s,outputLen:a}=this;return t=t,t.finished=o,t.destroyed=i,t.blockLen=s,t.outputLen=a,t.oHash=r._cloneInto(t.oHash),t.iHash=n._cloneInto(t.iHash),t}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}},zi=(e,t,r)=>new Ln(e,t).update(r).digest();zi.create=(e,t)=>new Ln(e,t);function ic(e){e.lowS!==void 0&&te("lowS",e.lowS),e.prehash!==void 0&&te("prehash",e.prehash)}function Od(e){let t=Or(e);de(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});let{endo:r,Fp:n,a:o}=t;if(r){if(!n.eql(o,n.ZERO))throw new Error("invalid endomorphism, can only be defined for Koblitz curves that have a=0");if(typeof r!="object"||typeof r.beta!="bigint"||typeof r.splitScalar!="function")throw new Error("invalid endomorphism, expected beta: bigint and splitScalar: function")}return Object.freeze({...t})}var $i=class extends Error{constructor(t=""){super(t)}},pe={Err:$i,_tlv:{encode:(e,t)=>{let{Err:r}=pe;if(e<0||e>256)throw new r("tlv.encode: wrong tag");if(t.length&1)throw new r("tlv.encode: unpadded data");let n=t.length/2,o=Dr(n);if(o.length/2&128)throw new r("tlv.encode: long form length too big");let i=n>127?Dr(o.length/2|128):"";return Dr(e)+i+o+t},decode(e,t){let{Err:r}=pe,n=0;if(e<0||e>256)throw new r("tlv.encode: wrong tag");if(t.length<2||t[n++]!==e)throw new r("tlv.decode: wrong tlv");let o=t[n++],i=!!(o&128),s=0;if(!i)s=o;else{let c=o&127;if(!c)throw new r("tlv.decode(long): indefinite length not supported");if(c>4)throw new r("tlv.decode(long): byte length is too big");let l=t.subarray(n,n+c);if(l.length!==c)throw new r("tlv.decode: length bytes not complete");if(l[0]===0)throw new r("tlv.decode(long): zero leftmost byte");for(let u of l)s=s<<8|u;if(n+=c,s<128)throw new r("tlv.decode(long): not minimal encoding")}let a=t.subarray(n,n+s);if(a.length!==s)throw new r("tlv.decode: wrong value length");return{v:a,l:t.subarray(n+s)}}},_int:{encode(e){let{Err:t}=pe;if(e<me)throw new t("integer: negative integers are not allowed");let r=Dr(e);if(Number.parseInt(r[0],16)&8&&(r="00"+r),r.length&1)throw new t("unexpected DER parsing assertion: unpadded hex");return r},decode(e){let{Err:t}=pe;if(e[0]&128)throw new t("invalid signature integer: negative");if(e[0]===0&&!(e[1]&128))throw new t("invalid signature integer: unnecessary leading zero");return le(e)}},toSig(e){let{Err:t,_int:r,_tlv:n}=pe,o=nt("signature",e),{v:i,l:s}=n.decode(48,o);if(s.length)throw new t("invalid signature: left bytes after parsing");let{v:a,l:c}=n.decode(2,i),{v:l,l:u}=n.decode(2,c);if(u.length)throw new t("invalid signature: left bytes after parsing");return{r:r.decode(a),s:r.decode(l)}},hexFromSig(e){let{_tlv:t,_int:r}=pe,n=t.encode(2,r.encode(e.r)),o=t.encode(2,r.encode(e.s)),i=n+o;return t.encode(48,i)}},me=BigInt(0),lt=BigInt(1),ng=BigInt(2),sc=BigInt(3),og=BigInt(4);function Fd(e){let t=Od(e),{Fp:r}=t,n=he(t.n,t.nBitLength),o=t.toBytes||((x,h,S)=>{let U=h.toAffine();return Ie(Uint8Array.from([4]),r.toBytes(U.x),r.toBytes(U.y))}),i=t.fromBytes||(x=>{let h=x.subarray(1),S=r.fromBytes(h.subarray(0,r.BYTES)),U=r.fromBytes(h.subarray(r.BYTES,2*r.BYTES));return{x:S,y:U}});function s(x){let{a:h,b:S}=t,U=r.sqr(x),y=r.mul(U,x);return r.add(r.add(y,r.mul(x,h)),S)}if(!r.eql(r.sqr(t.Gy),s(t.Gx)))throw new Error("bad generator point: equation left != right");function a(x){return Sn(x,lt,t.n)}function c(x){let{allowedPrivateKeyLengths:h,nByteLength:S,wrapPrivateKey:U,n:y}=t;if(h&&typeof x!="bigint"){if(Re(x)&&(x=Ae(x)),typeof x!="string"||!h.includes(x.length))throw new Error("invalid private key");x=x.padStart(S*2,"0")}let P;try{P=typeof x=="bigint"?x:le(nt("private key",x,S))}catch{throw new Error("invalid private key, expected hex or "+S+" bytes, got "+typeof x)}return U&&(P=J(P,y)),Lt("private key",P,lt,y),P}function l(x){if(!(x instanceof d))throw new Error("ProjectivePoint expected")}let u=ir((x,h)=>{let{px:S,py:U,pz:y}=x;if(r.eql(y,r.ONE))return{x:S,y:U};let P=x.is0();h==null&&(h=P?r.ONE:r.inv(y));let O=r.mul(S,h),D=r.mul(U,h),N=r.mul(y,h);if(P)return{x:r.ZERO,y:r.ZERO};if(!r.eql(N,r.ONE))throw new Error("invZ was invalid");return{x:O,y:D}}),f=ir(x=>{if(x.is0()){if(t.allowInfinityPoint&&!r.is0(x.py))return;throw new Error("bad point: ZERO")}let{x:h,y:S}=x.toAffine();if(!r.isValid(h)||!r.isValid(S))throw new Error("bad point: x or y not FE");let U=r.sqr(S),y=s(h);if(!r.eql(U,y))throw new Error("bad point: equation left != right");if(!x.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});class d{constructor(h,S,U){if(h==null||!r.isValid(h))throw new Error("x required");if(S==null||!r.isValid(S)||r.is0(S))throw new Error("y required");if(U==null||!r.isValid(U))throw new Error("z required");this.px=h,this.py=S,this.pz=U,Object.freeze(this)}static fromAffine(h){let{x:S,y:U}=h||{};if(!h||!r.isValid(S)||!r.isValid(U))throw new Error("invalid affine point");if(h instanceof d)throw new Error("projective point not allowed");let y=P=>r.eql(P,r.ZERO);return y(S)&&y(U)?d.ZERO:new d(S,U,r.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(h){let S=sr(r,h.map(U=>U.pz));return h.map((U,y)=>U.toAffine(S[y])).map(d.fromAffine)}static fromHex(h){let S=d.fromAffine(i(nt("pointHex",h)));return S.assertValidity(),S}static fromPrivateKey(h){return d.BASE.multiply(c(h))}static msm(h,S){return In(d,n,h,S)}_setWindowSize(h){B.setWindowSize(this,h)}assertValidity(){f(this)}hasEvenY(){let{y:h}=this.toAffine();if(r.isOdd)return!r.isOdd(h);throw new Error("Field doesn't support isOdd")}equals(h){l(h);let{px:S,py:U,pz:y}=this,{px:P,py:O,pz:D}=h,N=r.eql(r.mul(S,D),r.mul(P,y)),g=r.eql(r.mul(U,D),r.mul(O,y));return N&&g}negate(){return new d(this.px,r.neg(this.py),this.pz)}double(){let{a:h,b:S}=t,U=r.mul(S,sc),{px:y,py:P,pz:O}=this,D=r.ZERO,N=r.ZERO,g=r.ZERO,b=r.mul(y,y),K=r.mul(P,P),k=r.mul(O,O),_=r.mul(y,P);return _=r.add(_,_),g=r.mul(y,O),g=r.add(g,g),D=r.mul(h,g),N=r.mul(U,k),N=r.add(D,N),D=r.sub(K,N),N=r.add(K,N),N=r.mul(D,N),D=r.mul(_,D),g=r.mul(U,g),k=r.mul(h,k),_=r.sub(b,k),_=r.mul(h,_),_=r.add(_,g),g=r.add(b,b),b=r.add(g,b),b=r.add(b,k),b=r.mul(b,_),N=r.add(N,b),k=r.mul(P,O),k=r.add(k,k),b=r.mul(k,_),D=r.sub(D,b),g=r.mul(k,K),g=r.add(g,g),g=r.add(g,g),new d(D,N,g)}add(h){l(h);let{px:S,py:U,pz:y}=this,{px:P,py:O,pz:D}=h,N=r.ZERO,g=r.ZERO,b=r.ZERO,K=t.a,k=r.mul(t.b,sc),_=r.mul(S,P),V=r.mul(U,O),v=r.mul(y,D),A=r.add(S,U),T=r.add(P,O);A=r.mul(A,T),T=r.add(_,V),A=r.sub(A,T),T=r.add(S,y);let E=r.add(P,D);return T=r.mul(T,E),E=r.add(_,v),T=r.sub(T,E),E=r.add(U,y),N=r.add(O,D),E=r.mul(E,N),N=r.add(V,v),E=r.sub(E,N),b=r.mul(K,T),N=r.mul(k,v),b=r.add(N,b),N=r.sub(V,b),b=r.add(V,b),g=r.mul(N,b),V=r.add(_,_),V=r.add(V,_),v=r.mul(K,v),T=r.mul(k,T),V=r.add(V,v),v=r.sub(_,v),v=r.mul(K,v),T=r.add(T,v),_=r.mul(V,T),g=r.add(g,_),_=r.mul(E,T),N=r.mul(A,N),N=r.sub(N,_),_=r.mul(A,V),b=r.mul(E,b),b=r.add(b,_),new d(N,g,b)}subtract(h){return this.add(h.negate())}is0(){return this.equals(d.ZERO)}wNAF(h){return B.wNAFCached(this,h,d.normalizeZ)}multiplyUnsafe(h){let{endo:S,n:U}=t;Lt("scalar",h,me,U);let y=d.ZERO;if(h===me)return y;if(this.is0()||h===lt)return this;if(!S||B.hasPrecomputes(this))return B.wNAFCachedUnsafe(this,h,d.normalizeZ);let{k1neg:P,k1:O,k2neg:D,k2:N}=S.splitScalar(h),g=y,b=y,K=this;for(;O>me||N>me;)O&lt&&(g=g.add(K)),N&lt&&(b=b.add(K)),K=K.double(),O>>=lt,N>>=lt;return P&&(g=g.negate()),D&&(b=b.negate()),b=new d(r.mul(b.px,S.beta),b.py,b.pz),g.add(b)}multiply(h){let{endo:S,n:U}=t;Lt("scalar",h,lt,U);let y,P;if(S){let{k1neg:O,k1:D,k2neg:N,k2:g}=S.splitScalar(h),{p:b,f:K}=this.wNAF(D),{p:k,f:_}=this.wNAF(g);b=B.constTimeNegate(O,b),k=B.constTimeNegate(N,k),k=new d(r.mul(k.px,S.beta),k.py,k.pz),y=b.add(k),P=K.add(_)}else{let{p:O,f:D}=this.wNAF(h);y=O,P=D}return d.normalizeZ([y,P])[0]}multiplyAndAddUnsafe(h,S,U){let y=d.BASE,P=(D,N)=>N===me||N===lt||!D.equals(y)?D.multiplyUnsafe(N):D.multiply(N),O=P(this,S).add(P(h,U));return O.is0()?void 0:O}toAffine(h){return u(this,h)}isTorsionFree(){let{h,isTorsionFree:S}=t;if(h===lt)return!0;if(S)return S(d,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){let{h,clearCofactor:S}=t;return h===lt?this:S?S(d,this):this.multiplyUnsafe(t.h)}toRawBytes(h=!0){return te("isCompressed",h),this.assertValidity(),o(d,this,h)}toHex(h=!0){return te("isCompressed",h),Ae(this.toRawBytes(h))}}d.BASE=new d(t.Gx,t.Gy,r.ONE),d.ZERO=new d(r.ZERO,r.ONE,r.ZERO);let w=t.nBitLength,B=An(d,t.endo?Math.ceil(w/2):w);return{CURVE:t,ProjectivePoint:d,normPrivateKeyToScalar:c,weierstrassEquation:s,isWithinCurveOrder:a}}function Md(e){let t=Or(e);return de(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}function ac(e){let t=Md(e),{Fp:r,n}=t,o=r.BYTES+1,i=2*r.BYTES+1;function s(v){return J(v,n)}function a(v){return vn(v,n)}let{ProjectivePoint:c,normPrivateKeyToScalar:l,weierstrassEquation:u,isWithinCurveOrder:f}=Fd({...t,toBytes(v,A,T){let E=A.toAffine(),p=r.toBytes(E.x),I=Ie;return te("isCompressed",T),T?I(Uint8Array.from([A.hasEvenY()?2:3]),p):I(Uint8Array.from([4]),p,r.toBytes(E.y))},fromBytes(v){let A=v.length,T=v[0],E=v.subarray(1);if(A===o&&(T===2||T===3)){let p=le(E);if(!Sn(p,lt,r.ORDER))throw new Error("Point is not on curve");let I=u(p),R;try{R=r.sqrt(I)}catch(z){let $=z instanceof Error?": "+z.message:"";throw new Error("Point is not on curve"+$)}let F=(R&lt)===lt;return(T&1)===1!==F&&(R=r.neg(R)),{x:p,y:R}}else if(A===i&&T===4){let p=r.fromBytes(E.subarray(0,r.BYTES)),I=r.fromBytes(E.subarray(r.BYTES,2*r.BYTES));return{x:p,y:I}}else{let p=o,I=i;throw new Error("invalid Point, expected length of "+p+", or uncompressed "+I+", got "+A)}}}),d=v=>Ae(Ke(v,t.nByteLength));function w(v){let A=n>>lt;return v>A}function B(v){return w(v)?s(-v):v}let x=(v,A,T)=>le(v.slice(A,T));class h{constructor(A,T,E){Lt("r",A,lt,n),Lt("s",T,lt,n),this.r=A,this.s=T,E!=null&&(this.recovery=E),Object.freeze(this)}static fromCompact(A){let T=t.nByteLength;return A=nt("compactSignature",A,T*2),new h(x(A,0,T),x(A,T,2*T))}static fromDER(A){let{r:T,s:E}=pe.toSig(nt("DER",A));return new h(T,E)}assertValidity(){}addRecoveryBit(A){return new h(this.r,this.s,A)}recoverPublicKey(A){let{r:T,s:E,recovery:p}=this,I=D(nt("msgHash",A));if(p==null||![0,1,2,3].includes(p))throw new Error("recovery id invalid");let R=p===2||p===3?T+t.n:T;if(R>=r.ORDER)throw new Error("recovery id 2 or 3 invalid");let F=(p&1)===0?"02":"03",H=c.fromHex(F+d(R)),z=a(R),$=s(-I*z),Z=s(E*z),Y=c.BASE.multiplyAndAddUnsafe(H,$,Z);if(!Y)throw new Error("point at infinify");return Y.assertValidity(),Y}hasHighS(){return w(this.s)}normalizeS(){return this.hasHighS()?new h(this.r,s(-this.s),this.recovery):this}toDERRawBytes(){return Kr(this.toDERHex())}toDERHex(){return pe.hexFromSig(this)}toCompactRawBytes(){return Kr(this.toCompactHex())}toCompactHex(){return d(this.r)+d(this.s)}}let S={isValidPrivateKey(v){try{return l(v),!0}catch{return!1}},normPrivateKeyToScalar:l,randomPrivateKey:()=>{let v=ai(t.n);return Ca(t.randomBytes(v),t.n)},precompute(v=8,A=c.BASE){return A._setWindowSize(v),A.multiply(BigInt(3)),A}};function U(v,A=!0){return c.fromPrivateKey(v).toRawBytes(A)}function y(v){let A=Re(v),T=typeof v=="string",E=(A||T)&&v.length;return A?E===o||E===i:T?E===2*o||E===2*i:v instanceof c}function P(v,A,T=!0){if(y(v))throw new Error("first arg must be private key");if(!y(A))throw new Error("second arg must be public key");return c.fromHex(A).multiply(l(v)).toRawBytes(T)}let O=t.bits2int||function(v){if(v.length>8192)throw new Error("input is too large");let A=le(v),T=v.length*8-t.nBitLength;return T>0?A>>BigInt(T):A},D=t.bits2int_modN||function(v){return s(O(v))},N=Oe(t.nBitLength);function g(v){return Lt("num < 2^"+t.nBitLength,v,me,N),Ke(v,t.nByteLength)}function b(v,A,T=K){if(["recovered","canonical"].some(it=>it in T))throw new Error("sign() legacy options not supported");let{hash:E,randomBytes:p}=t,{lowS:I,prehash:R,extraEntropy:F}=T;I==null&&(I=!0),v=nt("msgHash",v),ic(T),R&&(v=nt("prehashed msgHash",E(v)));let H=D(v),z=l(A),$=[g(z),g(H)];if(F!=null&&F!==!1){let it=F===!0?p(r.BYTES):F;$.push(nt("extraEntropy",it))}let Z=Ie(...$),Y=H;function at(it){let ht=O(it);if(!f(ht))return;let It=a(ht),ft=c.BASE.multiply(ht).toAffine(),gt=s(ft.x);if(gt===me)return;let Pt=s(It*s(Y+gt*z));if(Pt===me)return;let Vt=(ft.x===gt?0:2)|Number(ft.y&lt),Ar=Pt;return I&&w(Pt)&&(Ar=B(Pt),Vt^=1),new h(gt,Ar,Vt)}return{seed:Z,k2sig:at}}let K={lowS:t.lowS,prehash:!1},k={lowS:t.lowS,prehash:!1};function _(v,A,T=K){let{seed:E,k2sig:p}=b(v,A,T),I=t;return Sa(I.hash.outputLen,I.nByteLength,I.hmac)(E,p)}c.BASE._setWindowSize(8);function V(v,A,T,E=k){let p=v;A=nt("msgHash",A),T=nt("publicKey",T);let{lowS:I,prehash:R,format:F}=E;if(ic(E),"strict"in E)throw new Error("options.strict was renamed to lowS");if(F!==void 0&&F!=="compact"&&F!=="der")throw new Error("format must be compact or der");let H=typeof p=="string"||Re(p),z=!H&&!F&&typeof p=="object"&&p!==null&&typeof p.r=="bigint"&&typeof p.s=="bigint";if(!H&&!z)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let $,Z;try{if(z&&($=new h(p.r,p.s)),H){try{F!=="compact"&&($=h.fromDER(p))}catch(Vt){if(!(Vt instanceof pe.Err))throw Vt}!$&&F!=="der"&&($=h.fromCompact(p))}Z=c.fromHex(T)}catch{return!1}if(!$||I&&$.hasHighS())return!1;R&&(A=t.hash(A));let{r:Y,s:at}=$,it=D(A),ht=a(at),It=s(it*ht),ft=s(Y*ht),gt=c.BASE.multiplyAndAddUnsafe(Z,It,ft)?.toAffine();return gt?s(gt.x)===Y:!1}return{CURVE:t,getPublicKey:U,getSharedSecret:P,sign:_,verify:V,ProjectivePoint:c,Signature:h,utils:S}}function Vd(e){return{hash:e,hmac:(t,...r)=>zi(e,t,Zo(...r)),randomBytes:xn}}function cc(e,t){let r=n=>ac({...e,...Vd(n)});return{...r(t),create:r}}var lc=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),uc=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),qd=BigInt(1),ji=BigInt(2),fc=(e,t)=>(e+t/ji)/t;function Hd(e){let t=lc,r=BigInt(3),n=BigInt(6),o=BigInt(11),i=BigInt(22),s=BigInt(23),a=BigInt(44),c=BigInt(88),l=e*e*e%t,u=l*l*e%t,f=et(u,r,t)*u%t,d=et(f,r,t)*u%t,w=et(d,ji,t)*l%t,B=et(w,o,t)*w%t,x=et(B,i,t)*B%t,h=et(x,a,t)*x%t,S=et(h,c,t)*h%t,U=et(S,a,t)*x%t,y=et(U,r,t)*u%t,P=et(y,s,t)*B%t,O=et(P,n,t)*l%t,D=et(O,ji,t);if(!Gi.eql(Gi.sqr(D),e))throw new Error("Cannot find square root");return D}var Gi=he(lc,void 0,void 0,{sqrt:Hd}),He=cc({a:BigInt(0),b:BigInt(7),Fp:Gi,n:uc,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{let t=uc,r=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-qd*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),o=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=r,s=BigInt("0x100000000000000000000000000000000"),a=fc(i*e,t),c=fc(-n*e,t),l=J(e-a*r-c*o,t),u=J(-a*n-c*i,t),f=l>s,d=u>s;if(f&&(l=t-l),d&&(u=t-u),l>s||u>s)throw new Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:f,k1:l,k2neg:d,k2:u}}}},En),hg=BigInt(0);var pg=He.ProjectivePoint;function dc(e){return e==null?!1:typeof e.then=="function"&&typeof e.catch=="function"&&typeof e.finally=="function"}function hc(e,t,r){let n=Cr.digest(r instanceof Uint8Array?r:r.subarray());if(dc(n))return n.then(({digest:o})=>He.verify(t,o,e)).catch(o=>{throw new qr(String(o))});try{return He.verify(t,n.digest,e)}catch(o){throw new qr(String(o))}}var kn=class{type="secp256k1";raw;_key;constructor(t){this._key=mc(t),this.raw=pc(this._key)}toMultihash(){return zt.digest(er(this))}toCID(){return Q.createV1(114,this.toMultihash())}toString(){return X.encode(this.toMultihash().bytes).substring(1)}equals(t){return t==null||!(t.raw instanceof Uint8Array)?!1:rt(this.raw,t.raw)}verify(t,r){return hc(this._key,r,t)}};function Zi(e){return new kn(e)}function pc(e){return He.ProjectivePoint.fromHex(e).toRawBytes(!0)}function mc(e){try{return He.ProjectivePoint.fromHex(e),e}catch(t){throw new $e(String(t))}}function yc(e,t){let{Type:r,Data:n}=re.decode(e),o=n??new Uint8Array;switch(r){case st.RSA:return Vi(o,t);case st.Ed25519:return mi(o);case st.secp256k1:return Zi(o);case st.ECDSA:return Go(o);default:throw new Ge}}function Rn(e){let{Type:t,Data:r}=re.decode(e.digest),n=r??new Uint8Array;switch(t){case st.Ed25519:return mi(n);case st.secp256k1:return Zi(n);case st.ECDSA:return Go(n);default:throw new Ge}}function er(e){return re.encode({Type:st[e.type],Data:e.raw})}var gc=Symbol.for("nodejs.util.inspect.custom"),zd=114,$r=class{type;multihash;publicKey;string;constructor(t){this.type=t.type,this.multihash=t.multihash,Object.defineProperty(this,"string",{enumerable:!1,writable:!0})}get[Symbol.toStringTag](){return`PeerId(${this.toString()})`}[xo]=!0;toString(){return this.string==null&&(this.string=X.encode(this.multihash.bytes).slice(1)),this.string}toMultihash(){return this.multihash}toCID(){return Q.createV1(zd,this.multihash)}toJSON(){return this.toString()}equals(t){if(t==null)return!1;if(t instanceof Uint8Array)return rt(this.multihash.bytes,t);if(typeof t=="string")return this.toString()===t;if(t?.toMultihash()?.bytes!=null)return rt(this.multihash.bytes,t.toMultihash().bytes);throw new Error("not valid Id")}[gc](){return`PeerId(${this.toString()})`}},Dn=class extends $r{type="RSA";publicKey;constructor(t){super({...t,type:"RSA"}),this.publicKey=t.publicKey}},Kn=class extends $r{type="Ed25519";publicKey;constructor(t){super({...t,type:"Ed25519"}),this.publicKey=t.publicKey}},On=class extends $r{type="secp256k1";publicKey;constructor(t){super({...t,type:"secp256k1"}),this.publicKey=t.publicKey}},$d=2336,jr=class{type="url";multihash;publicKey;url;constructor(t){this.url=t.toString(),this.multihash=zt.digest(j(this.url))}[gc](){return`PeerId(${this.url})`}[xo]=!0;toString(){return this.toCID().toString()}toMultihash(){return this.multihash}toCID(){return Q.createV1($d,this.toMultihash())}toJSON(){return this.toString()}equals(t){return t==null?!1:(t instanceof Uint8Array&&(t=q(t)),t.toString()===this.toString())}};var jd=114,xc=2336;function wc(e,t){let r;if(e.charAt(0)==="1"||e.charAt(0)==="Q")r=ie(X.decode(`z${e}`));else{if(e.startsWith("k51qzi5uqu5")||e.startsWith("kzwfwjn5ji4")||e.startsWith("k2k4r8")||e.startsWith("bafz"))return Gd(Q.parse(e));if(t==null)throw new ct('Please pass a multibase decoder for strings that do not start with "1" or "Q"');r=ie(t.decode(e))}return bc(r)}function bc(e){if(Wd(e))return new Dn({multihash:e});if(Zd(e))try{let t=Rn(e);if(t.type==="Ed25519")return new Kn({multihash:e,publicKey:t});if(t.type==="secp256k1")return new On({multihash:e,publicKey:t})}catch{let r=q(e.digest);return new jr(new URL(r))}throw new je("Supplied PeerID Multihash is invalid")}function Gd(e){if(e?.multihash==null||e.version==null||e.version===1&&e.code!==jd&&e.code!==xc)throw new un("Supplied PeerID CID is invalid");if(e.code===xc){let t=q(e.multihash.digest);return new jr(new URL(t))}return bc(e.multihash)}function Zd(e){return e.code===zt.code}function Wd(e){return e.code===Cr.code}var Fn=class{index=0;input="";new(t){return this.index=0,this.input=t,this}readAtomically(t){let r=this.index,n=t();return n===void 0&&(this.index=r),n}parseWith(t){let r=t();if(this.index===this.input.length)return r}peekChar(){if(!(this.index>=this.input.length))return this.input[this.index]}readChar(){if(!(this.index>=this.input.length))return this.input[this.index++]}readGivenChar(t){return this.readAtomically(()=>{let r=this.readChar();if(r===t)return r})}readSeparator(t,r,n){return this.readAtomically(()=>{if(!(r>0&&this.readGivenChar(t)===void 0))return n()})}readNumber(t,r,n,o){return this.readAtomically(()=>{let i=0,s=0,a=this.peekChar();if(a===void 0)return;let c=a==="0",l=2**(8*o)-1;for(;;){let u=this.readAtomically(()=>{let f=this.readChar();if(f===void 0)return;let d=Number.parseInt(f,t);if(!Number.isNaN(d))return d});if(u===void 0)break;if(i*=t,i+=u,i>l||(s+=1,r!==void 0&&s>r))return}if(s!==0)return!n&&c&&s>1?void 0:i})}readIPv4Addr(){return this.readAtomically(()=>{let t=new Uint8Array(4);for(let r=0;r<t.length;r++){let n=this.readSeparator(".",r,()=>this.readNumber(10,3,!1,1));if(n===void 0)return;t[r]=n}return t})}readIPv6Addr(){let t=r=>{for(let n=0;n<r.length/2;n++){let o=n*2;if(n<r.length-3){let s=this.readSeparator(":",n,()=>this.readIPv4Addr());if(s!==void 0)return r[o]=s[0],r[o+1]=s[1],r[o+2]=s[2],r[o+3]=s[3],[o+4,!0]}let i=this.readSeparator(":",n,()=>this.readNumber(16,4,!0,2));if(i===void 0)return[o,!1];r[o]=i>>8,r[o+1]=i&255}return[r.length,!1]};return this.readAtomically(()=>{let r=new Uint8Array(16),[n,o]=t(r);if(n===16)return r;if(o||this.readGivenChar(":")===void 0||this.readGivenChar(":")===void 0)return;let i=new Uint8Array(14),s=16-(n+2),[a]=t(i.subarray(0,s));return r.set(i.subarray(0,a),16-a),r})}readIPAddr(){return this.readIPv4Addr()??this.readIPv6Addr()}};var Ec=45,Yd=15,hr=new Fn;function Wi(e){if(!(e.length>Yd))return hr.new(e).parseWith(()=>hr.readIPv4Addr())}function Yi(e){if(e.includes("%")&&(e=e.split("%")[0]),!(e.length>Ec))return hr.new(e).parseWith(()=>hr.readIPv6Addr())}function Mn(e,t=!1){if(e.includes("%")&&(e=e.split("%")[0]),e.length>Ec)return;let r=hr.new(e).parseWith(()=>hr.readIPAddr());if(r)return t&&r.length===4?Uint8Array.from([0,0,0,0,0,0,0,0,0,0,255,255,r[0],r[1],r[2],r[3]]):r}var Cx=parseInt("0xFFFF",16),_x=new Uint8Array([0,0,0,0,0,0,0,0,0,0,255,255]);function Ac(e){return!!Wi(e)}function Ic(e){return!!Yi(e)}function Vn(e){return!!Mn(e)}var Tc=Ac,eh=Ic,Xi=function(e){let t=0;if(e=e.toString().trim(),Tc(e)){let r=new Uint8Array(t+4);return e.split(/\./g).forEach(n=>{r[t++]=parseInt(n,10)&255}),r}if(eh(e)){let r=e.split(":",8),n;for(n=0;n<r.length;n++){let i=Tc(r[n]),s;i&&(s=Xi(r[n]),r[n]=q(s.slice(0,2),"base16")),s!=null&&++n<8&&r.splice(n,0,q(s.slice(2,4),"base16"))}if(r[0]==="")for(;r.length<8;)r.unshift("0");else if(r[r.length-1]==="")for(;r.length<8;)r.push("0");else if(r.length<8){for(n=0;n<r.length&&r[n]!=="";n++);let i=[n,1];for(n=9-r.length;n>0;n--)i.push("0");r.splice.apply(r,i)}let o=new Uint8Array(t+16);for(n=0;n<r.length;n++){let i=parseInt(r[n],16);o[t++]=i>>8&255,o[t++]=i&255}return o}throw new Error("invalid ip address")},Bc=function(e,t=0,r){t=~~t,r=r??e.length-t;let n=new DataView(e.buffer);if(r===4){let o=[];for(let i=0;i<r;i++)o.push(e[t+i]);return o.join(".")}if(r===16){let o=[];for(let i=0;i<r;i+=2)o.push(n.getUint16(t+i).toString(16));return o.join(":").replace(/(^|:)0(:0)*:0(:|$)/,"$1::$3").replace(/:{3,4}/,"::")}return""};var pr={},Ji={},nh=[[4,32,"ip4"],[6,16,"tcp"],[33,16,"dccp"],[41,128,"ip6"],[42,-1,"ip6zone"],[43,8,"ipcidr"],[53,-1,"dns",!0],[54,-1,"dns4",!0],[55,-1,"dns6",!0],[56,-1,"dnsaddr",!0],[132,16,"sctp"],[273,16,"udp"],[275,0,"p2p-webrtc-star"],[276,0,"p2p-webrtc-direct"],[277,0,"p2p-stardust"],[280,0,"webrtc-direct"],[281,0,"webrtc"],[290,0,"p2p-circuit"],[301,0,"udt"],[302,0,"utp"],[400,-1,"unix",!1,!0],[421,-1,"ipfs"],[421,-1,"p2p"],[443,0,"https"],[444,96,"onion"],[445,296,"onion3"],[446,-1,"garlic64"],[448,0,"tls"],[449,-1,"sni"],[460,0,"quic"],[461,0,"quic-v1"],[465,0,"webtransport"],[466,-1,"certhash"],[477,0,"ws"],[478,0,"wss"],[479,0,"p2p-websocket-star"],[480,0,"http"],[481,-1,"http-path"],[777,-1,"memory"]];nh.forEach(e=>{let t=oh(...e);Ji[t.code]=t,pr[t.name]=t});function oh(e,t,r,n,o){return{code:e,size:t,name:r,resolvable:!!n,path:!!o}}function tt(e){if(typeof e=="number"){if(Ji[e]!=null)return Ji[e];throw new Error(`no protocol with code: ${e}`)}else if(typeof e=="string"){if(pr[e]!=null)return pr[e];throw new Error(`no protocol with name: ${e}`)}throw new Error(`invalid protocol id type: ${typeof e}`)}var dw=tt("ip4"),hw=tt("ip6"),pw=tt("ipcidr");function rs(e,t){switch(tt(e).code){case 4:case 41:return sh(t);case 42:return es(t);case 43:return q(t,"base10");case 6:case 273:case 33:case 132:return Uc(t).toString();case 53:case 54:case 55:case 56:case 400:case 449:case 777:return es(t);case 421:return fh(t);case 444:return _c(t);case 445:return _c(t);case 466:return uh(t);case 481:return globalThis.encodeURIComponent(es(t));default:return q(t,"base16")}}function ns(e,t){switch(tt(e).code){case 4:return Cc(t);case 41:return Cc(t);case 42:return ts(t);case 43:return j(t,"base10");case 6:case 273:case 33:case 132:return os(parseInt(t,10));case 53:case 54:case 55:case 56:case 400:case 449:case 777:return ts(t);case 421:return ah(t);case 444:return lh(t);case 445:return dh(t);case 466:return ch(t);case 481:return ts(globalThis.decodeURIComponent(t));default:return j(t,"base16")}}var Qi=Object.values(_r).map(e=>e.decoder),ih=function(){let e=Qi[0].or(Qi[1]);return Qi.slice(2).forEach(t=>e=e.or(t)),e}();function Cc(e){if(!Vn(e))throw new Error("invalid ip address");return Xi(e)}function sh(e){let t=Bc(e,0,e.length);if(t==null)throw new Error("ipBuff is required");if(!Vn(t))throw new Error("invalid ip address");return t}function os(e){let t=new ArrayBuffer(2);return new DataView(t).setUint16(0,e),new Uint8Array(t)}function Uc(e){return new DataView(e.buffer).getUint16(e.byteOffset)}function ts(e){let t=j(e),r=Uint8Array.from(ar(t.length));return xt([r,t],r.length+t.length)}function es(e){let t=Me(e);if(e=e.slice(Ut(t)),e.length!==t)throw new Error("inconsistent lengths");return q(e)}function ah(e){let t;e[0]==="Q"||e[0]==="1"?t=ie(X.decode(`z${e}`)).bytes:t=Q.parse(e).multihash.bytes;let r=Uint8Array.from(ar(t.length));return xt([r,t],r.length+t.length)}function ch(e){let t=ih.decode(e),r=Uint8Array.from(ar(t.length));return xt([r,t],r.length+t.length)}function uh(e){let t=Me(e),r=e.slice(Ut(t));if(r.length!==t)throw new Error("inconsistent lengths");return"u"+q(r,"base64url")}function fh(e){let t=Me(e),r=e.slice(Ut(t));if(r.length!==t)throw new Error("inconsistent lengths");return q(r,"base58btc")}function lh(e){let t=e.split(":");if(t.length!==2)throw new Error(`failed to parse onion addr: ["'${t.join('", "')}'"]' does not contain a port number`);if(t[0].length!==16)throw new Error(`failed to parse onion addr: ${t[0]} not a Tor onion address.`);let r=qt.decode("b"+t[0]),n=parseInt(t[1],10);if(n<1||n>65536)throw new Error("Port number is not in range(1, 65536)");let o=os(n);return xt([r,o],r.length+o.length)}function dh(e){let t=e.split(":");if(t.length!==2)throw new Error(`failed to parse onion addr: ["'${t.join('", "')}'"]' does not contain a port number`);if(t[0].length!==56)throw new Error(`failed to parse onion addr: ${t[0]} not a Tor onion3 address.`);let r=qt.decode(`b${t[0]}`),n=parseInt(t[1],10);if(n<1||n>65536)throw new Error("Port number is not in range(1, 65536)");let o=os(n);return xt([r,o],r.length+o.length)}function _c(e){let t=e.slice(0,e.length-2),r=e.slice(e.length-2),n=q(t,"base32"),o=Uc(r);return`${n}:${o}`}function Pc(e){e=is(e);let t=[],r=[],n=null,o=e.split("/").slice(1);if(o.length===1&&o[0]==="")return{bytes:new Uint8Array,string:"/",tuples:[],stringTuples:[],path:null};for(let i=0;i<o.length;i++){let s=o[i],a=tt(s);if(a.size===0){t.push([a.code]),r.push([a.code]);continue}if(i++,i>=o.length)throw new qn("invalid address: "+e);if(a.path===!0){n=is(o.slice(i).join("/")),t.push([a.code,ns(a.code,n)]),r.push([a.code,n]);break}let c=ns(a.code,o[i]);t.push([a.code,c]),r.push([a.code,rs(a.code,c)])}return{string:Nc(r),bytes:Hn(t),tuples:t,stringTuples:r,path:n}}function ss(e){let t=[],r=[],n=null,o=0;for(;o<e.length;){let i=Me(e,o),s=Ut(i),a=tt(i),c=hh(a,e.slice(o+s));if(c===0){t.push([i]),r.push([i]),o+=s;continue}let l=e.slice(o+s,o+s+c);if(o+=c+s,o>e.length)throw new qn("Invalid address Uint8Array: "+q(e,"base16"));t.push([i,l]);let u=rs(i,l);if(r.push([i,u]),a.path===!0){n=u;break}}return{bytes:Uint8Array.from(e),string:Nc(r),tuples:t,stringTuples:r,path:n}}function Nc(e){let t=[];return e.map(r=>{let n=tt(r[0]);return t.push(n.name),r.length>1&&r[1]!=null&&t.push(r[1]),null}),is(t.join("/"))}function Hn(e){return xt(e.map(t=>{let r=tt(t[0]),n=Uint8Array.from(ar(r.code));return t.length>1&&t[1]!=null&&(n=xt([n,t[1]])),n}))}function hh(e,t){if(e.size>0)return e.size/8;if(e.size===0)return 0;{let r=Me(t instanceof Uint8Array?t:Uint8Array.from(t));return r+Ut(r)}}function is(e){return"/"+e.trim().split("/").filter(t=>t).join("/")}var qn=class extends Error{static name="ParseError";name="ParseError";constructor(t){super(`Error parsing address: ${t}`)}};var ph=Symbol.for("nodejs.util.inspect.custom"),cs=Symbol.for("@multiformats/js-multiaddr/multiaddr"),mh=[tt("dns").code,tt("dns4").code,tt("dns6").code,tt("dnsaddr").code],as=class extends Error{constructor(t="No available resolver"){super(t),this.name="NoAvailableResolverError"}},zn=class e{bytes;#t;#r;#e;#a;[cs]=!0;constructor(t){t==null&&(t="");let r;if(t instanceof Uint8Array)r=ss(t);else if(typeof t=="string"){if(t.length>0&&t.charAt(0)!=="/")throw new Error(`multiaddr "${t}" must start with a "/"`);r=Pc(t)}else if(kc(t))r=ss(t.bytes);else throw new Error("addr must be a string, Buffer, or another Multiaddr");this.bytes=r.bytes,this.#t=r.string,this.#r=r.tuples,this.#e=r.stringTuples,this.#a=r.path}toString(){return this.#t}toJSON(){return this.toString()}toOptions(){let t,r,n,o,i="",s=tt("tcp"),a=tt("udp"),c=tt("ip4"),l=tt("ip6"),u=tt("dns6"),f=tt("ip6zone");for(let[w,B]of this.stringTuples())w===f.code&&(i=`%${B??""}`),mh.includes(w)&&(r=s.name==="tcp"?"tcp":"udp",o=443,n=`${B??""}${i}`,t=w===u.code?6:4),(w===s.code||w===a.code)&&(r=tt(w).name==="tcp"?"tcp":"udp",o=parseInt(B??"")),(w===c.code||w===l.code)&&(r=tt(w).name==="tcp"?"tcp":"udp",n=`${B??""}${i}`,t=w===l.code?6:4);if(t==null||r==null||n==null||o==null)throw new Error('multiaddr must have a valid format: "/{ip4, ip6, dns4, dns6, dnsaddr}/{address}/{tcp, udp}/{port}".');return{family:t,host:n,transport:r,port:o}}protos(){return this.#r.map(([t])=>Object.assign({},tt(t)))}protoCodes(){return this.#r.map(([t])=>t)}protoNames(){return this.#r.map(([t])=>tt(t).name)}tuples(){return this.#r.map(([t,r])=>r==null?[t]:[t,r])}stringTuples(){return this.#e.map(([t,r])=>r==null?[t]:[t,r])}encapsulate(t){return t=new e(t),new e(this.toString()+t.toString())}decapsulate(t){let r=t.toString(),n=this.toString(),o=n.lastIndexOf(r);if(o<0)throw new Error(`Address ${this.toString()} does not contain subaddress: ${t.toString()}`);return new e(n.slice(0,o))}decapsulateCode(t){let r=this.tuples();for(let n=r.length-1;n>=0;n--)if(r[n][0]===t)return new e(Hn(r.slice(0,n)));return this}getPeerId(){try{let t=[];this.stringTuples().forEach(([n,o])=>{n===pr.p2p.code&&t.push([n,o]),n===pr["p2p-circuit"].code&&(t=[])});let r=t.pop();if(r?.[1]!=null){let n=r[1];return n[0]==="Q"||n[0]==="1"?q(X.decode(`z${n}`),"base58btc"):q(Q.parse(n).multihash.bytes,"base58btc")}return null}catch{return null}}getPath(){return this.#a}equals(t){return rt(this.bytes,t.bytes)}async resolve(t){let r=this.protos().find(i=>i.resolvable);if(r==null)return[this];let n=Lc.get(r.name);if(n==null)throw new as(`no available resolver for ${r.name}`);return(await n(this,t)).map(i=>Gr(i))}nodeAddress(){let t=this.toOptions();if(t.transport!=="tcp"&&t.transport!=="udp")throw new Error(`multiaddr must have a valid format - no protocol with name: "${t.transport}". Must have a valid transport protocol: "{tcp, udp}"`);return{family:t.family,address:t.host,port:t.port}}isThinWaistAddress(t){let r=(t??this).protos();return!(r.length!==2||r[0].code!==4&&r[0].code!==41||r[1].code!==6&&r[1].code!==273)}[ph](){return`Multiaddr(${this.#t})`}};var Lc=new Map;function kc(e){return!!e?.[cs]}function Gr(e){return new zn(e)}function Zr(e){let t=new globalThis.AbortController;function r(){t.abort();for(let i of e)i?.removeEventListener!=null&&i.removeEventListener("abort",r)}for(let i of e){if(i?.aborted===!0){r();break}i?.addEventListener!=null&&i.addEventListener("abort",r)}function n(){for(let i of e)i?.removeEventListener!=null&&i.removeEventListener("abort",r)}let o=t.signal;return o.clear=n,o}async function*$n(e,t={}){let r=e.getReader();try{for(;;){let n=await r.read();if(n.done)return;yield n.value}}finally{t.preventCancel!==!0&&await r.cancel(),r.releaseLock()}}var yh="/",gh=new TextEncoder().encode(yh),zw=gh[0];var Xh=go(fs(),1);var Gt=class extends Error{static name="SignatureVerificationError";constructor(t="Record signature verification failed"){super(t),this.name="SignatureVerificationError"}},jn=class extends Error{static name="RecordExpiredError";constructor(t="Record has expired"){super(t),this.name="RecordExpiredError"}},mr=class extends Error{static name="UnsupportedValidityError";constructor(t="The validity type is unsupported"){super(t),this.name="UnsupportedValidityError"}},Gn=class extends Error{static name="RecordTooLargeError";constructor(t="The record is too large"){super(t),this.name="RecordTooLargeError"}},Zn=class extends Error{static name="InvalidValueError";constructor(t="Value must be a valid content path starting with /"){super(t),this.name="InvalidValueError"}},Wn=class extends Error{static name="InvalidRecordDataError";constructor(t="Invalid record data"){super(t),this.name="InvalidRecordDataError"}},Wr=class extends Error{static name="InvalidEmbeddedPublicKeyError";constructor(t="Invalid embedded public key"){super(t),this.name="InvalidEmbeddedPublicKeyError"}};var Zt;(function(e){let t;(function(o){o.EOL="EOL"})(t=e.ValidityType||(e.ValidityType={}));let r;(function(o){o[o.EOL=0]="EOL"})(r||(r={})),function(o){o.codec=()=>Vr(r)}(t=e.ValidityType||(e.ValidityType={}));let n;e.codec=()=>(n==null&&(n=lr((o,i,s={})=>{s.lengthDelimited!==!1&&i.fork(),o.value!=null&&(i.uint32(10),i.bytes(o.value)),o.signatureV1!=null&&(i.uint32(18),i.bytes(o.signatureV1)),o.validityType!=null&&(i.uint32(24),e.ValidityType.codec().encode(o.validityType,i)),o.validity!=null&&(i.uint32(34),i.bytes(o.validity)),o.sequence!=null&&(i.uint32(40),i.uint64(o.sequence)),o.ttl!=null&&(i.uint32(48),i.uint64(o.ttl)),o.pubKey!=null&&(i.uint32(58),i.bytes(o.pubKey)),o.signatureV2!=null&&(i.uint32(66),i.bytes(o.signatureV2)),o.data!=null&&(i.uint32(74),i.bytes(o.data)),s.lengthDelimited!==!1&&i.ldelim()},(o,i,s={})=>{let a={},c=i==null?o.len:o.pos+i;for(;o.pos<c;){let l=o.uint32();switch(l>>>3){case 1:{a.value=o.bytes();break}case 2:{a.signatureV1=o.bytes();break}case 3:{a.validityType=e.ValidityType.codec().decode(o);break}case 4:{a.validity=o.bytes();break}case 5:{a.sequence=o.uint64();break}case 6:{a.ttl=o.uint64();break}case 7:{a.pubKey=o.bytes();break}case 8:{a.signatureV2=o.bytes();break}case 9:{a.data=o.bytes();break}default:{o.skipType(l&7);break}}}return a})),n),e.encode=o=>ur(o,e.codec()),e.decode=(o,i)=>cr(o,e.codec(),i)})(Zt||(Zt={}));var xh=["string","number","bigint","symbol"],wh=["Function","Generator","AsyncGenerator","GeneratorFunction","AsyncGeneratorFunction","AsyncFunction","Observable","Array","Buffer","Object","RegExp","Date","Error","Map","Set","WeakMap","WeakSet","ArrayBuffer","SharedArrayBuffer","DataView","Promise","URL","HTMLElement","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","BigInt64Array","BigUint64Array"];function Rc(e){if(e===null)return"null";if(e===void 0)return"undefined";if(e===!0||e===!1)return"boolean";let t=typeof e;if(xh.includes(t))return t;if(t==="function")return"Function";if(Array.isArray(e))return"Array";if(bh(e))return"Buffer";let r=Eh(e);return r||"Object"}function bh(e){return e&&e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer.call(null,e)}function Eh(e){let t=Object.prototype.toString.call(e).slice(8,-1);if(wh.includes(t))return t}var m=class{constructor(t,r,n){this.major=t,this.majorEncoded=t<<5,this.name=r,this.terminal=n}toString(){return`Type[${this.major}].${this.name}`}compare(t){return this.major<t.major?-1:this.major>t.major?1:0}};m.uint=new m(0,"uint",!0);m.negint=new m(1,"negint",!0);m.bytes=new m(2,"bytes",!0);m.string=new m(3,"string",!0);m.array=new m(4,"array",!1);m.map=new m(5,"map",!1);m.tag=new m(6,"tag",!1);m.float=new m(7,"float",!0);m.false=new m(7,"false",!0);m.true=new m(7,"true",!0);m.null=new m(7,"null",!0);m.undefined=new m(7,"undefined",!0);m.break=new m(7,"break",!0);var L=class{constructor(t,r,n){this.type=t,this.value=r,this.encodedLength=n,this.encodedBytes=void 0,this.byteValue=void 0}toString(){return`Token[${this.type}].${this.value}`}};var yr=globalThis.process&&!globalThis.process.browser&&globalThis.Buffer&&typeof globalThis.Buffer.isBuffer=="function",Sh=new TextDecoder,vh=new TextEncoder;function Yn(e){return yr&&globalThis.Buffer.isBuffer(e)}function Fc(e){return e instanceof Uint8Array?Yn(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e:Uint8Array.from(e)}var Mc=yr?(e,t,r)=>r-t>64?globalThis.Buffer.from(e.subarray(t,r)).toString("utf8"):Kc(e,t,r):(e,t,r)=>r-t>64?Sh.decode(e.subarray(t,r)):Kc(e,t,r),Vc=yr?e=>e.length>64?globalThis.Buffer.from(e):Dc(e):e=>e.length>64?vh.encode(e):Dc(e);var gr=yr?(e,t,r)=>Yn(e)?new Uint8Array(e.subarray(t,r)):e.slice(t,r):(e,t,r)=>e.slice(t,r),qc=yr?(e,t)=>(e=e.map(r=>r instanceof Uint8Array?r:globalThis.Buffer.from(r)),Fc(globalThis.Buffer.concat(e,t))):(e,t)=>{let r=new Uint8Array(t),n=0;for(let o of e)n+o.length>r.length&&(o=o.subarray(0,r.length-n)),r.set(o,n),n+=o.length;return r},Hc=yr?e=>globalThis.Buffer.allocUnsafe(e):e=>new Uint8Array(e);function zc(e,t){if(Yn(e)&&Yn(t))return e.compare(t);for(let r=0;r<e.length;r++)if(e[r]!==t[r])return e[r]<t[r]?-1:1;return 0}function Dc(e){let t=[],r=0;for(let n=0;n<e.length;n++){let o=e.charCodeAt(n);o<128?t[r++]=o:o<2048?(t[r++]=o>>6|192,t[r++]=o&63|128):(o&64512)===55296&&n+1<e.length&&(e.charCodeAt(n+1)&64512)===56320?(o=65536+((o&1023)<<10)+(e.charCodeAt(++n)&1023),t[r++]=o>>18|240,t[r++]=o>>12&63|128,t[r++]=o>>6&63|128,t[r++]=o&63|128):(t[r++]=o>>12|224,t[r++]=o>>6&63|128,t[r++]=o&63|128)}return t}function Kc(e,t,r){let n=[];for(;t<r;){let o=e[t],i=null,s=o>239?4:o>223?3:o>191?2:1;if(t+s<=r){let a,c,l,u;switch(s){case 1:o<128&&(i=o);break;case 2:a=e[t+1],(a&192)===128&&(u=(o&31)<<6|a&63,u>127&&(i=u));break;case 3:a=e[t+1],c=e[t+2],(a&192)===128&&(c&192)===128&&(u=(o&15)<<12|(a&63)<<6|c&63,u>2047&&(u<55296||u>57343)&&(i=u));break;case 4:a=e[t+1],c=e[t+2],l=e[t+3],(a&192)===128&&(c&192)===128&&(l&192)===128&&(u=(o&15)<<18|(a&63)<<12|(c&63)<<6|l&63,u>65535&&u<1114112&&(i=u))}}i===null?(i=65533,s=1):i>65535&&(i-=65536,n.push(i>>>10&1023|55296),i=56320|i&1023),n.push(i),t+=s}return Ah(n)}var Oc=4096;function Ah(e){let t=e.length;if(t<=Oc)return String.fromCharCode.apply(String,e);let r="",n=0;for(;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=Oc));return r}var Ih=256,Xn=class{constructor(t=Ih){this.chunkSize=t,this.cursor=0,this.maxCursor=-1,this.chunks=[],this._initReuseChunk=null}reset(){this.cursor=0,this.maxCursor=-1,this.chunks.length&&(this.chunks=[]),this._initReuseChunk!==null&&(this.chunks.push(this._initReuseChunk),this.maxCursor=this._initReuseChunk.length-1)}push(t){let r=this.chunks[this.chunks.length-1];if(this.cursor+t.length<=this.maxCursor+1){let o=r.length-(this.maxCursor-this.cursor)-1;r.set(t,o)}else{if(r){let o=r.length-(this.maxCursor-this.cursor)-1;o<r.length&&(this.chunks[this.chunks.length-1]=r.subarray(0,o),this.maxCursor=this.cursor-1)}t.length<64&&t.length<this.chunkSize?(r=Hc(this.chunkSize),this.chunks.push(r),this.maxCursor+=r.length,this._initReuseChunk===null&&(this._initReuseChunk=r),r.set(t,0)):(this.chunks.push(t),this.maxCursor+=t.length)}this.cursor+=t.length}toBytes(t=!1){let r;if(this.chunks.length===1){let n=this.chunks[0];t&&this.cursor>n.length/2?(r=this.cursor===n.length?n:n.subarray(0,this.cursor),this._initReuseChunk=null,this.chunks=[]):r=gr(n,0,this.cursor)}else r=qc(this.chunks,this.cursor);return t&&this.reset(),r}};var M="CBOR decode error:",ls="CBOR encode error:",Yr=[];Yr[23]=1;Yr[24]=2;Yr[25]=3;Yr[26]=5;Yr[27]=9;function ye(e,t,r){if(e.length-t<r)throw new Error(`${M} not enough data for type`)}var dt=[24,256,65536,4294967296,BigInt("18446744073709551616")];function Rt(e,t,r){ye(e,t,1);let n=e[t];if(r.strict===!0&&n<dt[0])throw new Error(`${M} integer encoded in more bytes than necessary (strict decode)`);return n}function Dt(e,t,r){ye(e,t,2);let n=e[t]<<8|e[t+1];if(r.strict===!0&&n<dt[1])throw new Error(`${M} integer encoded in more bytes than necessary (strict decode)`);return n}function Kt(e,t,r){ye(e,t,4);let n=e[t]*16777216+(e[t+1]<<16)+(e[t+2]<<8)+e[t+3];if(r.strict===!0&&n<dt[2])throw new Error(`${M} integer encoded in more bytes than necessary (strict decode)`);return n}function Ot(e,t,r){ye(e,t,8);let n=e[t]*16777216+(e[t+1]<<16)+(e[t+2]<<8)+e[t+3],o=e[t+4]*16777216+(e[t+5]<<16)+(e[t+6]<<8)+e[t+7],i=(BigInt(n)<<BigInt(32))+BigInt(o);if(r.strict===!0&&i<dt[3])throw new Error(`${M} integer encoded in more bytes than necessary (strict decode)`);if(i<=Number.MAX_SAFE_INTEGER)return Number(i);if(r.allowBigInt===!0)return i;throw new Error(`${M} integers outside of the safe integer range are not supported`)}function $c(e,t,r,n){return new L(m.uint,Rt(e,t+1,n),2)}function jc(e,t,r,n){return new L(m.uint,Dt(e,t+1,n),3)}function Gc(e,t,r,n){return new L(m.uint,Kt(e,t+1,n),5)}function Zc(e,t,r,n){return new L(m.uint,Ot(e,t+1,n),9)}function Ft(e,t){return mt(e,0,t.value)}function mt(e,t,r){if(r<dt[0]){let n=Number(r);e.push([t|n])}else if(r<dt[1]){let n=Number(r);e.push([t|24,n])}else if(r<dt[2]){let n=Number(r);e.push([t|25,n>>>8,n&255])}else if(r<dt[3]){let n=Number(r);e.push([t|26,n>>>24&255,n>>>16&255,n>>>8&255,n&255])}else{let n=BigInt(r);if(n<dt[4]){let o=[t|27,0,0,0,0,0,0,0],i=Number(n&BigInt(4294967295)),s=Number(n>>BigInt(32)&BigInt(4294967295));o[8]=i&255,i=i>>8,o[7]=i&255,i=i>>8,o[6]=i&255,i=i>>8,o[5]=i&255,o[4]=s&255,s=s>>8,o[3]=s&255,s=s>>8,o[2]=s&255,s=s>>8,o[1]=s&255,e.push(o)}else throw new Error(`${M} encountered BigInt larger than allowable range`)}}Ft.encodedSize=function(t){return mt.encodedSize(t.value)};mt.encodedSize=function(t){return t<dt[0]?1:t<dt[1]?2:t<dt[2]?3:t<dt[3]?5:9};Ft.compareTokens=function(t,r){return t.value<r.value?-1:t.value>r.value?1:0};function Wc(e,t,r,n){return new L(m.negint,-1-Rt(e,t+1,n),2)}function Yc(e,t,r,n){return new L(m.negint,-1-Dt(e,t+1,n),3)}function Xc(e,t,r,n){return new L(m.negint,-1-Kt(e,t+1,n),5)}var ds=BigInt(-1),Jc=BigInt(1);function Qc(e,t,r,n){let o=Ot(e,t+1,n);if(typeof o!="bigint"){let i=-1-o;if(i>=Number.MIN_SAFE_INTEGER)return new L(m.negint,i,9)}if(n.allowBigInt!==!0)throw new Error(`${M} integers outside of the safe integer range are not supported`);return new L(m.negint,ds-BigInt(o),9)}function Jn(e,t){let r=t.value,n=typeof r=="bigint"?r*ds-Jc:r*-1-1;mt(e,t.type.majorEncoded,n)}Jn.encodedSize=function(t){let r=t.value,n=typeof r=="bigint"?r*ds-Jc:r*-1-1;return n<dt[0]?1:n<dt[1]?2:n<dt[2]?3:n<dt[3]?5:9};Jn.compareTokens=function(t,r){return t.value<r.value?1:t.value>r.value?-1:0};function Xr(e,t,r,n){ye(e,t,r+n);let o=gr(e,t+r,t+r+n);return new L(m.bytes,o,r+n)}function tu(e,t,r,n){return Xr(e,t,1,r)}function eu(e,t,r,n){return Xr(e,t,2,Rt(e,t+1,n))}function ru(e,t,r,n){return Xr(e,t,3,Dt(e,t+1,n))}function nu(e,t,r,n){return Xr(e,t,5,Kt(e,t+1,n))}function ou(e,t,r,n){let o=Ot(e,t+1,n);if(typeof o=="bigint")throw new Error(`${M} 64-bit integer bytes lengths not supported`);return Xr(e,t,9,o)}function Qn(e){return e.encodedBytes===void 0&&(e.encodedBytes=e.type===m.string?Vc(e.value):e.value),e.encodedBytes}function xr(e,t){let r=Qn(t);mt(e,t.type.majorEncoded,r.length),e.push(r)}xr.encodedSize=function(t){let r=Qn(t);return mt.encodedSize(r.length)+r.length};xr.compareTokens=function(t,r){return Bh(Qn(t),Qn(r))};function Bh(e,t){return e.length<t.length?-1:e.length>t.length?1:zc(e,t)}function Jr(e,t,r,n,o){let i=r+n;ye(e,t,i);let s=new L(m.string,Mc(e,t+r,t+i),i);return o.retainStringBytes===!0&&(s.byteValue=gr(e,t+r,t+i)),s}function iu(e,t,r,n){return Jr(e,t,1,r,n)}function su(e,t,r,n){return Jr(e,t,2,Rt(e,t+1,n),n)}function au(e,t,r,n){return Jr(e,t,3,Dt(e,t+1,n),n)}function cu(e,t,r,n){return Jr(e,t,5,Kt(e,t+1,n),n)}function uu(e,t,r,n){let o=Ot(e,t+1,n);if(typeof o=="bigint")throw new Error(`${M} 64-bit integer string lengths not supported`);return Jr(e,t,9,o,n)}var fu=xr;function wr(e,t,r,n){return new L(m.array,n,r)}function lu(e,t,r,n){return wr(e,t,1,r)}function du(e,t,r,n){return wr(e,t,2,Rt(e,t+1,n))}function hu(e,t,r,n){return wr(e,t,3,Dt(e,t+1,n))}function pu(e,t,r,n){return wr(e,t,5,Kt(e,t+1,n))}function mu(e,t,r,n){let o=Ot(e,t+1,n);if(typeof o=="bigint")throw new Error(`${M} 64-bit integer array lengths not supported`);return wr(e,t,9,o)}function yu(e,t,r,n){if(n.allowIndefinite===!1)throw new Error(`${M} indefinite length items not allowed`);return wr(e,t,1,1/0)}function to(e,t){mt(e,m.array.majorEncoded,t.value)}to.compareTokens=Ft.compareTokens;to.encodedSize=function(t){return mt.encodedSize(t.value)};function br(e,t,r,n){return new L(m.map,n,r)}function gu(e,t,r,n){return br(e,t,1,r)}function xu(e,t,r,n){return br(e,t,2,Rt(e,t+1,n))}function wu(e,t,r,n){return br(e,t,3,Dt(e,t+1,n))}function bu(e,t,r,n){return br(e,t,5,Kt(e,t+1,n))}function Eu(e,t,r,n){let o=Ot(e,t+1,n);if(typeof o=="bigint")throw new Error(`${M} 64-bit integer map lengths not supported`);return br(e,t,9,o)}function Su(e,t,r,n){if(n.allowIndefinite===!1)throw new Error(`${M} indefinite length items not allowed`);return br(e,t,1,1/0)}function eo(e,t){mt(e,m.map.majorEncoded,t.value)}eo.compareTokens=Ft.compareTokens;eo.encodedSize=function(t){return mt.encodedSize(t.value)};function vu(e,t,r,n){return new L(m.tag,r,1)}function Au(e,t,r,n){return new L(m.tag,Rt(e,t+1,n),2)}function Iu(e,t,r,n){return new L(m.tag,Dt(e,t+1,n),3)}function Tu(e,t,r,n){return new L(m.tag,Kt(e,t+1,n),5)}function Bu(e,t,r,n){return new L(m.tag,Ot(e,t+1,n),9)}function ro(e,t){mt(e,m.tag.majorEncoded,t.value)}ro.compareTokens=Ft.compareTokens;ro.encodedSize=function(t){return mt.encodedSize(t.value)};var Lh=20,kh=21,Rh=22,Dh=23;function Cu(e,t,r,n){if(n.allowUndefined===!1)throw new Error(`${M} undefined values are not supported`);return n.coerceUndefinedToNull===!0?new L(m.null,null,1):new L(m.undefined,void 0,1)}function _u(e,t,r,n){if(n.allowIndefinite===!1)throw new Error(`${M} indefinite length items not allowed`);return new L(m.break,void 0,1)}function hs(e,t,r){if(r){if(r.allowNaN===!1&&Number.isNaN(e))throw new Error(`${M} NaN values are not supported`);if(r.allowInfinity===!1&&(e===1/0||e===-1/0))throw new Error(`${M} Infinity values are not supported`)}return new L(m.float,e,t)}function Uu(e,t,r,n){return hs(ps(e,t+1),3,n)}function Pu(e,t,r,n){return hs(ms(e,t+1),5,n)}function Nu(e,t,r,n){return hs(Du(e,t+1),9,n)}function no(e,t,r){let n=t.value;if(n===!1)e.push([m.float.majorEncoded|Lh]);else if(n===!0)e.push([m.float.majorEncoded|kh]);else if(n===null)e.push([m.float.majorEncoded|Rh]);else if(n===void 0)e.push([m.float.majorEncoded|Dh]);else{let o,i=!1;(!r||r.float64!==!0)&&(ku(n),o=ps(Wt,1),n===o||Number.isNaN(n)?(Wt[0]=249,e.push(Wt.slice(0,3)),i=!0):(Ru(n),o=ms(Wt,1),n===o&&(Wt[0]=250,e.push(Wt.slice(0,5)),i=!0))),i||(Kh(n),o=Du(Wt,1),Wt[0]=251,e.push(Wt.slice(0,9)))}}no.encodedSize=function(t,r){let n=t.value;if(n===!1||n===!0||n===null||n===void 0)return 1;if(!r||r.float64!==!0){ku(n);let o=ps(Wt,1);if(n===o||Number.isNaN(n))return 3;if(Ru(n),o=ms(Wt,1),n===o)return 5}return 9};var Lu=new ArrayBuffer(9),Mt=new DataView(Lu,1),Wt=new Uint8Array(Lu,0);function ku(e){if(e===1/0)Mt.setUint16(0,31744,!1);else if(e===-1/0)Mt.setUint16(0,64512,!1);else if(Number.isNaN(e))Mt.setUint16(0,32256,!1);else{Mt.setFloat32(0,e);let t=Mt.getUint32(0),r=(t&2139095040)>>23,n=t&8388607;if(r===255)Mt.setUint16(0,31744,!1);else if(r===0)Mt.setUint16(0,(e&2147483648)>>16|n>>13,!1);else{let o=r-127;o<-24?Mt.setUint16(0,0):o<-14?Mt.setUint16(0,(t&2147483648)>>16|1<<24+o,!1):Mt.setUint16(0,(t&2147483648)>>16|o+15<<10|n>>13,!1)}}}function ps(e,t){if(e.length-t<2)throw new Error(`${M} not enough data for float16`);let r=(e[t]<<8)+e[t+1];if(r===31744)return 1/0;if(r===64512)return-1/0;if(r===32256)return NaN;let n=r>>10&31,o=r&1023,i;return n===0?i=o*2**-24:n!==31?i=(o+1024)*2**(n-25):i=o===0?1/0:NaN,r&32768?-i:i}function Ru(e){Mt.setFloat32(0,e,!1)}function ms(e,t){if(e.length-t<4)throw new Error(`${M} not enough data for float32`);let r=(e.byteOffset||0)+t;return new DataView(e.buffer,r,4).getFloat32(0,!1)}function Kh(e){Mt.setFloat64(0,e,!1)}function Du(e,t){if(e.length-t<8)throw new Error(`${M} not enough data for float64`);let r=(e.byteOffset||0)+t;return new DataView(e.buffer,r,8).getFloat64(0,!1)}no.compareTokens=Ft.compareTokens;function G(e,t,r){throw new Error(`${M} encountered invalid minor (${r}) for major ${e[t]>>>5}`)}function oo(e){return()=>{throw new Error(`${M} ${e}`)}}var C=[];for(let e=0;e<=23;e++)C[e]=G;C[24]=$c;C[25]=jc;C[26]=Gc;C[27]=Zc;C[28]=G;C[29]=G;C[30]=G;C[31]=G;for(let e=32;e<=55;e++)C[e]=G;C[56]=Wc;C[57]=Yc;C[58]=Xc;C[59]=Qc;C[60]=G;C[61]=G;C[62]=G;C[63]=G;for(let e=64;e<=87;e++)C[e]=tu;C[88]=eu;C[89]=ru;C[90]=nu;C[91]=ou;C[92]=G;C[93]=G;C[94]=G;C[95]=oo("indefinite length bytes/strings are not supported");for(let e=96;e<=119;e++)C[e]=iu;C[120]=su;C[121]=au;C[122]=cu;C[123]=uu;C[124]=G;C[125]=G;C[126]=G;C[127]=oo("indefinite length bytes/strings are not supported");for(let e=128;e<=151;e++)C[e]=lu;C[152]=du;C[153]=hu;C[154]=pu;C[155]=mu;C[156]=G;C[157]=G;C[158]=G;C[159]=yu;for(let e=160;e<=183;e++)C[e]=gu;C[184]=xu;C[185]=wu;C[186]=bu;C[187]=Eu;C[188]=G;C[189]=G;C[190]=G;C[191]=Su;for(let e=192;e<=215;e++)C[e]=vu;C[216]=Au;C[217]=Iu;C[218]=Tu;C[219]=Bu;C[220]=G;C[221]=G;C[222]=G;C[223]=G;for(let e=224;e<=243;e++)C[e]=oo("simple values are not supported");C[244]=G;C[245]=G;C[246]=G;C[247]=Cu;C[248]=oo("simple values are not supported");C[249]=Uu;C[250]=Pu;C[251]=Nu;C[252]=G;C[253]=G;C[254]=G;C[255]=_u;var Yt=[];for(let e=0;e<24;e++)Yt[e]=new L(m.uint,e,1);for(let e=-1;e>=-24;e--)Yt[31-e]=new L(m.negint,e,1);Yt[64]=new L(m.bytes,new Uint8Array(0),1);Yt[96]=new L(m.string,"",1);Yt[128]=new L(m.array,0,1);Yt[160]=new L(m.map,0,1);Yt[244]=new L(m.false,!1,1);Yt[245]=new L(m.true,!0,1);Yt[246]=new L(m.null,null,1);function Fh(){let e=[];return e[m.uint.major]=Ft,e[m.negint.major]=Jn,e[m.bytes.major]=xr,e[m.string.major]=fu,e[m.array.major]=to,e[m.map.major]=eo,e[m.tag.major]=ro,e[m.float.major]=no,e}var qb=Fh(),Hb=new Xn,io=class e{constructor(t,r){this.obj=t,this.parent=r}includes(t){let r=this;do if(r.obj===t)return!0;while(r=r.parent);return!1}static createCheck(t,r){if(t&&t.includes(r))throw new Error(`${ls} object contains circular references`);return new e(r,t)}},Ce={null:new L(m.null,null),undefined:new L(m.undefined,void 0),true:new L(m.true,!0),false:new L(m.false,!1),emptyArray:new L(m.array,0),emptyMap:new L(m.map,0)},_e={number(e,t,r,n){return!Number.isInteger(e)||!Number.isSafeInteger(e)?new L(m.float,e):e>=0?new L(m.uint,e):new L(m.negint,e)},bigint(e,t,r,n){return e>=BigInt(0)?new L(m.uint,e):new L(m.negint,e)},Uint8Array(e,t,r,n){return new L(m.bytes,e)},string(e,t,r,n){return new L(m.string,e)},boolean(e,t,r,n){return e?Ce.true:Ce.false},null(e,t,r,n){return Ce.null},undefined(e,t,r,n){return Ce.undefined},ArrayBuffer(e,t,r,n){return new L(m.bytes,new Uint8Array(e))},DataView(e,t,r,n){return new L(m.bytes,new Uint8Array(e.buffer,e.byteOffset,e.byteLength))},Array(e,t,r,n){if(!e.length)return r.addBreakTokens===!0?[Ce.emptyArray,new L(m.break)]:Ce.emptyArray;n=io.createCheck(n,e);let o=[],i=0;for(let s of e)o[i++]=ys(s,r,n);return r.addBreakTokens?[new L(m.array,e.length),o,new L(m.break)]:[new L(m.array,e.length),o]},Object(e,t,r,n){let o=t!=="Object",i=o?e.keys():Object.keys(e),s=o?e.size:i.length;if(!s)return r.addBreakTokens===!0?[Ce.emptyMap,new L(m.break)]:Ce.emptyMap;n=io.createCheck(n,e);let a=[],c=0;for(let l of i)a[c++]=[ys(l,r,n),ys(o?e.get(l):e[l],r,n)];return Mh(a,r),r.addBreakTokens?[new L(m.map,s),a,new L(m.break)]:[new L(m.map,s),a]}};_e.Map=_e.Object;_e.Buffer=_e.Uint8Array;for(let e of"Uint8Clamped Uint16 Uint32 Int8 Int16 Int32 BigUint64 BigInt64 Float32 Float64".split(" "))_e[`${e}Array`]=_e.DataView;function ys(e,t={},r){let n=Rc(e),o=t&&t.typeEncoders&&t.typeEncoders[n]||_e[n];if(typeof o=="function"){let s=o(e,n,t,r);if(s!=null)return s}let i=_e[n];if(!i)throw new Error(`${ls} unsupported type: ${n}`);return i(e,n,t,r)}function Mh(e,t){t.mapSorter&&e.sort(t.mapSorter)}var Vh={strict:!1,allowIndefinite:!0,allowUndefined:!0,allowBigInt:!0},so=class{constructor(t,r={}){this._pos=0,this.data=t,this.options=r}pos(){return this._pos}done(){return this._pos>=this.data.length}next(){let t=this.data[this._pos],r=Yt[t];if(r===void 0){let n=C[t];if(!n)throw new Error(`${M} no decoder for major type ${t>>>5} (byte 0x${t.toString(16).padStart(2,"0")})`);let o=t&31;r=n(this.data,this._pos,o,this.options)}return this._pos+=r.encodedLength,r}},Qr=Symbol.for("DONE"),ao=Symbol.for("BREAK");function qh(e,t,r){let n=[];for(let o=0;o<e.value;o++){let i=Er(t,r);if(i===ao){if(e.value===1/0)break;throw new Error(`${M} got unexpected break to lengthed array`)}if(i===Qr)throw new Error(`${M} found array but not enough entries (got ${o}, expected ${e.value})`);n[o]=i}return n}function Hh(e,t,r){let n=r.useMaps===!0,o=n?void 0:{},i=n?new Map:void 0;for(let s=0;s<e.value;s++){let a=Er(t,r);if(a===ao){if(e.value===1/0)break;throw new Error(`${M} got unexpected break to lengthed map`)}if(a===Qr)throw new Error(`${M} found map but not enough entries (got ${s} [no key], expected ${e.value})`);if(n!==!0&&typeof a!="string")throw new Error(`${M} non-string keys not supported (got ${typeof a})`);if(r.rejectDuplicateMapKeys===!0&&(n&&i.has(a)||!n&&a in o))throw new Error(`${M} found repeat map key "${a}"`);let c=Er(t,r);if(c===Qr)throw new Error(`${M} found map but not enough entries (got ${s} [no value], expected ${e.value})`);n?i.set(a,c):o[a]=c}return n?i:o}function Er(e,t){if(e.done())return Qr;let r=e.next();if(r.type===m.break)return ao;if(r.type.terminal)return r.value;if(r.type===m.array)return qh(r,e,t);if(r.type===m.map)return Hh(r,e,t);if(r.type===m.tag){if(t.tags&&typeof t.tags[r.value]=="function"){let n=Er(e,t);return t.tags[r.value](n)}throw new Error(`${M} tag not supported (${r.value})`)}throw new Error("unsupported")}function Ku(e,t){if(!(e instanceof Uint8Array))throw new Error(`${M} data to decode must be a Uint8Array`);t=Object.assign({},Vh,t);let r=t.tokenizer||new so(e,t),n=Er(r,t);if(n===Qr)throw new Error(`${M} did not find any content to decode`);if(n===ao)throw new Error(`${M} got unexpected break`);return[n,e.subarray(r.pos())]}function gs(e,t){let[r,n]=Ku(e,t);if(n.length>0)throw new Error(`${M} too many terminals, data makes no sense`);return r}var jh=xe("ipns:utils"),Ou=j("/ipns/");var Gh=0,Zh=18;function Fu(e){let t;if(e.pubKey!=null)try{t=yc(e.pubKey)}catch(r){throw jh.error(r),r}if(t!=null)return t}function Mu(e){let t=j("ipns-signature:");return xt([t,e])}function tn(e){return"signatureV1"in e?Zt.encode({value:j(e.value),signatureV1:e.signatureV1,validityType:e.validityType,validity:j(e.validity),sequence:e.sequence,ttl:e.ttl,pubKey:e.pubKey,signatureV2:e.signatureV2,data:e.data}):Zt.encode({pubKey:e.pubKey,signatureV2:e.signatureV2,data:e.data})}function Ue(e){let t=Zt.decode(e);if(t.sequence!=null&&(t.sequence=BigInt(t.sequence)),t.ttl!=null&&(t.ttl=BigInt(t.ttl)),t.signatureV2==null||t.data==null)throw new Gt("Missing data or signatureV2");let r=Vu(t.data),n=Wh(r.Value),o=q(r.Validity);if(t.value!=null&&t.signatureV1!=null)return Yh(t),{value:n,validityType:Zt.ValidityType.EOL,validity:o,sequence:r.Sequence,ttl:r.TTL,pubKey:t.pubKey,signatureV1:t.signatureV1,signatureV2:t.signatureV2,data:t.data};if(t.signatureV2!=null)return{value:n,validityType:Zt.ValidityType.EOL,validity:o,sequence:r.Sequence,ttl:r.TTL,pubKey:t.pubKey,signatureV2:t.signatureV2,data:t.data};throw new Error("invalid record: does not include signatureV1 or signatureV2")}function en(e){return xt([Ou,e.bytes])}function Sr(e){let t=ie(e.slice(Ou.length));if(!co(t,Gh)&&!co(t,Zh))throw new je("Multihash in IPNS key was not identity or sha2-256");return t}function Vu(e){let t=gs(e);if(t.ValidityType===0)t.ValidityType=Zt.ValidityType.EOL;else throw new mr("The validity type is unsupported");return Number.isInteger(t.Sequence)&&(t.Sequence=BigInt(t.Sequence)),Number.isInteger(t.TTL)&&(t.TTL=BigInt(t.TTL)),t}function Wh(e){let t=q(e).trim();if(t.startsWith("/"))return t;try{return`/ipfs/${Q.decode(e).toV1().toString()}`}catch{}try{return`/ipfs/${Q.parse(t).toV1().toString()}`}catch{}throw new Zn("Value must be a valid content path starting with /")}function Yh(e){if(e.data==null)throw new Wn("Record data is missing");let t=Vu(e.data);if(!rt(t.Value,e.value??new Uint8Array(0)))throw new Gt('Field "value" did not match between protobuf and CBOR');if(!rt(t.Validity,e.validity??new Uint8Array(0)))throw new Gt('Field "validity" did not match between protobuf and CBOR');if(t.ValidityType!==e.validityType)throw new Gt('Field "validityType" did not match between protobuf and CBOR');if(t.Sequence!==e.sequence)throw new Gt('Field "sequence" did not match between protobuf and CBOR');if(t.TTL!==e.ttl)throw new Gt('Field "ttl" did not match between protobuf and CBOR')}function co(e,t){return e.code===t}var h1=xe("ipns"),p1=5*60*1e9,Jh="/ipns/",m1=Jh.length;var qu=go(fs(),1);var uo=xe("ipns:validator"),Qh=1024*10,tp=async(e,t)=>{let r=Ue(t),n;try{let o=Mu(r.data);n=await e.verify(o,r.signatureV2)}catch{n=!1}if(!n)throw uo.error("record signature verification failed"),new Gt("Record signature verification failed");if(r.validityType===Zt.ValidityType.EOL){if(qu.default.fromString(r.validity).toDate().getTime()<Date.now())throw uo.error("record has expired"),new jn("record has expired")}else if(r.validityType!=null)throw uo.error("the validity type is unsupported"),new mr("The validity type is unsupported");uo("ipns record for %s is valid",r.value)};async function Hu(e,t){if(t.byteLength>Qh)throw new Gn("The record is too large");let r=Sr(e),n;co(r,0)&&(n=Rn(r));let o=Ue(t),i=Fu(o)??n;if(i==null)throw new Wr("Could not extract public key from IPNS record or routing key");let s=en(i.toMultihash());if(!rt(s,e))throw new Wr("Embedded public key did not match routing key");await tp(i,t)}var fo=class extends Error{name="InvalidMessageLengthError";code="ERR_INVALID_MESSAGE_LENGTH"};async function*rn(e,t={}){let r=/\r?\n/,n=new TextDecoder("utf8"),o="";for await(let i of e){if(typeof i=="string"&&(i=new TextEncoder().encode(i)),Qe(i)&&(i=i.subarray()),o+=n.decode(i,{stream:!0}),o.length>(t?.maxMessageLength??o.length))throw new fo("Incoming message too long");let s=o.split(r);o=s.pop()??"";for(let a=0;a<s.length;a++)yield JSON.parse(s[a])}o+=n.decode(),o!==""&&(yield JSON.parse(o))}function ne(){let e={};return e.promise=new Promise((t,r)=>{e.resolve=t,e.reject=r}),e}var ws=go($u(),1);var on=class extends Error{constructor(t){super(t),this.name="TimeoutError"}},bs=class extends Error{constructor(t){super(),this.name="AbortError",this.message=t}},ju=e=>globalThis.DOMException===void 0?new bs(e):new DOMException(e),Gu=e=>{let t=e.reason===void 0?ju("This operation was aborted."):e.reason;return t instanceof Error?t:ju(t)};function Es(e,t){let{milliseconds:r,fallback:n,message:o,customTimers:i={setTimeout,clearTimeout}}=t,s,a,l=new Promise((u,f)=>{if(typeof r!="number"||Math.sign(r)!==1)throw new TypeError(`Expected \`milliseconds\` to be a positive number, got \`${r}\``);if(t.signal){let{signal:w}=t;w.aborted&&f(Gu(w)),a=()=>{f(Gu(w))},w.addEventListener("abort",a,{once:!0})}if(r===Number.POSITIVE_INFINITY){e.then(u,f);return}let d=new on;s=i.setTimeout.call(void 0,()=>{if(n){try{u(n())}catch(w){f(w)}return}typeof e.cancel=="function"&&e.cancel(),o===!1?u():o instanceof Error?f(o):(d.message=o??`Promise timed out after ${r} milliseconds`,f(d))},r),(async()=>{try{u(await e)}catch(w){f(w)}})()}).finally(()=>{l.clear(),a&&t.signal&&t.signal.removeEventListener("abort",a)});return l.clear=()=>{i.clearTimeout.call(void 0,s),s=void 0},l}function Ss(e,t,r){let n=0,o=e.length;for(;o>0;){let i=Math.trunc(o/2),s=n+i;r(e[s],t)<=0?(n=++s,o-=i+1):o=i}return n}var sn=class{#t=[];enqueue(t,r){r={priority:0,...r};let n={priority:r.priority,id:r.id,run:t};if(this.size===0||this.#t[this.size-1].priority>=r.priority){this.#t.push(n);return}let o=Ss(this.#t,n,(i,s)=>s.priority-i.priority);this.#t.splice(o,0,n)}setPriority(t,r){let n=this.#t.findIndex(i=>i.id===t);if(n===-1)throw new ReferenceError(`No promise function with the id "${t}" exists in the queue.`);let[o]=this.#t.splice(n,1);this.enqueue(o.run,{priority:r,id:t})}dequeue(){return this.#t.shift()?.run}filter(t){return this.#t.filter(r=>r.priority===t.priority).map(r=>r.run)}get size(){return this.#t.length}};var an=class extends ws.default{#t;#r;#e=0;#a;#c;#p=0;#o;#u;#n;#m;#i=0;#f;#s;#y;#w=1n;timeout;constructor(t){if(super(),t={carryoverConcurrencyCount:!1,intervalCap:Number.POSITIVE_INFINITY,interval:0,concurrency:Number.POSITIVE_INFINITY,autoStart:!0,queueClass:sn,...t},!(typeof t.intervalCap=="number"&&t.intervalCap>=1))throw new TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${t.intervalCap?.toString()??""}\` (${typeof t.intervalCap})`);if(t.interval===void 0||!(Number.isFinite(t.interval)&&t.interval>=0))throw new TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${t.interval?.toString()??""}\` (${typeof t.interval})`);this.#t=t.carryoverConcurrencyCount,this.#r=t.intervalCap===Number.POSITIVE_INFINITY||t.interval===0,this.#a=t.intervalCap,this.#c=t.interval,this.#n=new t.queueClass,this.#m=t.queueClass,this.concurrency=t.concurrency,this.timeout=t.timeout,this.#y=t.throwOnTimeout===!0,this.#s=t.autoStart===!1}get#b(){return this.#r||this.#e<this.#a}get#E(){return this.#i<this.#f}#S(){this.#i--,this.#l(),this.emit("next")}#v(){this.#x(),this.#g(),this.#u=void 0}get#A(){let t=Date.now();if(this.#o===void 0){let r=this.#p-t;if(r<0)this.#e=this.#t?this.#i:0;else return this.#u===void 0&&(this.#u=setTimeout(()=>{this.#v()},r)),!0}return!1}#l(){if(this.#n.size===0)return this.#o&&clearInterval(this.#o),this.#o=void 0,this.emit("empty"),this.#i===0&&this.emit("idle"),!1;if(!this.#s){let t=!this.#A;if(this.#b&&this.#E){let r=this.#n.dequeue();return r?(this.emit("active"),r(),t&&this.#g(),!0):!1}}return!1}#g(){this.#r||this.#o!==void 0||(this.#o=setInterval(()=>{this.#x()},this.#c),this.#p=Date.now()+this.#c)}#x(){this.#e===0&&this.#i===0&&this.#o&&(clearInterval(this.#o),this.#o=void 0),this.#e=this.#t?this.#i:0,this.#d()}#d(){for(;this.#l(););}get concurrency(){return this.#f}set concurrency(t){if(!(typeof t=="number"&&t>=1))throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${t}\` (${typeof t})`);this.#f=t,this.#d()}async#I(t){return new Promise((r,n)=>{t.addEventListener("abort",()=>{n(t.reason)},{once:!0})})}setPriority(t,r){this.#n.setPriority(t,r)}async add(t,r={}){return r.id??=(this.#w++).toString(),r={timeout:this.timeout,throwOnTimeout:this.#y,...r},new Promise((n,o)=>{this.#n.enqueue(async()=>{this.#i++,this.#e++;try{r.signal?.throwIfAborted();let i=t({signal:r.signal});r.timeout&&(i=Es(Promise.resolve(i),{milliseconds:r.timeout})),r.signal&&(i=Promise.race([i,this.#I(r.signal)]));let s=await i;n(s),this.emit("completed",s)}catch(i){if(i instanceof on&&!r.throwOnTimeout){n();return}o(i),this.emit("error",i)}finally{this.#S()}},r),this.emit("add"),this.#l()})}async addAll(t,r){return Promise.all(t.map(async n=>this.add(n,r)))}start(){return this.#s?(this.#s=!1,this.#d(),this):this}pause(){this.#s=!0}clear(){this.#n=new this.#m}async onEmpty(){this.#n.size!==0&&await this.#h("empty")}async onSizeLessThan(t){this.#n.size<t||await this.#h("next",()=>this.#n.size<t)}async onIdle(){this.#i===0&&this.#n.size===0||await this.#h("idle")}async#h(t,r){return new Promise(n=>{let o=()=>{r&&!r()||(this.off(t,o),n())};this.on(t,o)})}get size(){return this.#n.size}sizeBy(t){return this.#n.filter(t).length}get pending(){return this.#i}get isPaused(){return this.#s}};var vr=class extends Error{static name="InvalidRequestError";constructor(t="Invalid request"){super(t),this.name="InvalidRequestError"}},Xt=class extends Error{static name="BadResponseError";constructor(t="Bad response"){super(t),this.name="BadResponseError"}};function np(e){return e[Symbol.asyncIterator]!=null}function op(e){if(np(e))return(async()=>{for await(let t of e)return t})();for(let t of e)return t}var Zu=op;function ip(e){let[t,r]=e[Symbol.asyncIterator]!=null?[e[Symbol.asyncIterator](),Symbol.asyncIterator]:[e[Symbol.iterator](),Symbol.iterator],n=[];return{peek:()=>t.next(),push:o=>{n.push(o)},next:()=>n.length>0?{done:!1,value:n.shift()}:t.next(),[r](){return this}}}var Wu=ip;function sp(e){return e[Symbol.asyncIterator]!=null}function ap(e,t){let r=0;if(sp(e))return async function*(){for await(let c of e)yield t(c,r++)}();let n=Wu(e),{value:o,done:i}=n.next();if(i===!0)return function*(){}();let s=t(o,r++);if(typeof s.then=="function")return async function*(){yield await s;for await(let c of n)yield t(c,r++)}();let a=t;return function*(){yield s;for(let c of n)yield a(c,r++)}()}var Yu=ap;var Xu=j("/ipns/");function Ju(e){return rt(e.subarray(0,Xu.byteLength),Xu)}var ho=class{client;constructor(t){this.client=t}async*findProviders(t,r={}){yield*Yu(this.client.getProviders(t,r),n=>({id:n.ID,multiaddrs:n.Addrs??[]}))}async provide(){}async cancelReprovide(){}async put(t,r,n){if(!Ju(t))return;let o=Sr(t),i=Q.createV1(114,o),s=Ue(r);await this.client.putIPNS(i,s,n)}async get(t,r){if(!Ju(t))throw new Jt("Not found");let n=Sr(t),o=Q.createV1(114,n);try{let i=await this.client.getIPNS(o,r);return tn(i)}catch(i){throw i.name==="BadResponseError"?new Jt("Not found"):i}}},po=class{client;constructor(t){this.client=t}async findPeer(t,r={}){let n=await Zu(this.client.getPeers(t,r));if(n!=null)return{id:n.ID,multiaddrs:n.Addrs??[]};throw new Jt("Not found")}async*getClosestPeers(t,r={}){}};var yt=xe("delegated-routing-v1-http-api-client"),mo={concurrentRequests:4,timeout:3e4,cacheTTL:5*60*1e3,cacheName:"delegated-routing-v1-cache"},yo=class{started;httpQueue;shutDownController;clientUrl;timeout;contentRouting;peerRouting;filterAddrs;filterProtocols;inFlightRequests;cacheName;cache;cacheTTL;constructor(t,r={}){this.started=!1,this.shutDownController=new AbortController,this.shutDownController.signal,this.httpQueue=new an({concurrency:r.concurrentRequests??mo.concurrentRequests}),this.inFlightRequests=new Map,this.clientUrl=t instanceof URL?t:new URL(t),this.timeout=r.timeout??mo.timeout,this.filterAddrs=r.filterAddrs,this.filterProtocols=r.filterProtocols,this.contentRouting=new ho(this),this.peerRouting=new po(this),this.cacheName=r.cacheName??mo.cacheName,this.cacheTTL=r.cacheTTL??mo.cacheTTL}get[Ts](){return this.contentRouting}get[Bs](){return this.peerRouting}isStarted(){return this.started}async start(){this.started||(this.started=!0,this.cacheTTL>0&&(this.cache=await globalThis.caches?.open(this.cacheName),this.cache!=null&&yt("cache enabled with ttl %d",this.cacheTTL)))}async stop(){this.httpQueue.clear(),this.shutDownController.abort(),await globalThis.caches?.delete(this.cacheName),this.started=!1}async*getProviders(t,r={}){yt("getProviders starts: %c",t);let n=AbortSignal.timeout(this.timeout),o=Zr([this.shutDownController.signal,n,r.signal]);let i=ne(),s=ne();this.httpQueue.add(async()=>(i.resolve(),s.promise));try{await i.promise;let a=new URL(`${this.clientUrl}routing/v1/providers/${t.toString()}`);this.#r(a,r.filterAddrs,r.filterProtocols);let c={headers:{Accept:"application/x-ndjson"},signal:o},l=await this.#e(a.toString(),c);if(l==null)throw new Xt("No response received");if(!l.ok)throw l.status===404?new Jt("No matching records found"):l.status===422?new vr("Request does not conform to schema or semantic constraints"):new Xt(`Unexpected status code: ${l.status}`);if(l.body==null)throw new Xt("Routing response had no body");let u=l.headers.get("Content-Type");if(u==null)throw new Xt("No Content-Type header received");if(u?.startsWith("application/json")){let f=await l.json();for(let d of f.Providers){let w=this.#t(d);w!=null&&(yield w)}}else if(u.includes("application/x-ndjson"))for await(let f of rn($n(l.body))){let d=this.#t(f);d!=null&&(yield d)}else throw new Xt(`Unsupported Content-Type: ${u}`)}finally{o.clear(),s.resolve(),yt("getProviders finished: %c",t)}}async*getPeers(t,r={}){yt("getPeers starts: %c",t);let n=AbortSignal.timeout(this.timeout),o=Zr([this.shutDownController.signal,n,r.signal]);let i=ne(),s=ne();this.httpQueue.add(async()=>(i.resolve(),s.promise));try{await i.promise;let a=new URL(`${this.clientUrl}routing/v1/peers/${t.toCID().toString()}`);this.#r(a,r.filterAddrs,r.filterProtocols);let c={headers:{Accept:"application/x-ndjson"},signal:o},l=await this.#e(a.toString(),c);if(l.status===404)throw new Jt("No matching records found");if(l.status===422)throw new vr("Request does not conform to schema or semantic constraints");if(l.body==null)throw new Xt("Routing response had no body");if(l.headers.get("Content-Type")==="application/json"){let f=await l.json();for(let d of f.Peers){let w=this.#t(d);w!=null&&(yield w)}}else for await(let f of rn($n(l.body))){let d=this.#t(f);d!=null&&(yield d)}}catch(a){yt.error("getPeers errored:",a)}finally{o.clear(),s.resolve(),yt("getPeers finished: %c",t)}}async getIPNS(t,r={}){yt("getIPNS starts: %s",t);let n=AbortSignal.timeout(this.timeout),o=Zr([this.shutDownController.signal,n,r.signal]);let i=ne(),s=ne();this.httpQueue.add(async()=>(i.resolve(),s.promise));let a=`${this.clientUrl}routing/v1/ipns/${t}`;try{await i.promise;let c={headers:{Accept:"application/vnd.ipfs.ipns-record"},signal:o},l=await this.#e(a,c);if(yt("getIPNS GET %s %d",a,l.status),l.status===404)throw new Jt("No matching records found");if(l.status===422)throw new vr("Request does not conform to schema or semantic constraints");if(l.body==null)throw new Xt("GET ipns response had no body");let u=await l.arrayBuffer(),f=new Uint8Array(u,0,u.byteLength);return r.validate!==!1&&await Hu(en(t.multihash),f),Ue(f)}catch(c){throw yt.error("getIPNS GET %s error:",a,c),c}finally{o.clear(),s.resolve(),yt("getIPNS finished: %s",t)}}async putIPNS(t,r,n={}){yt("putIPNS starts: %c",t);let o=AbortSignal.timeout(this.timeout),i=Zr([this.shutDownController.signal,o,n.signal]);let s=ne(),a=ne();this.httpQueue.add(async()=>(s.resolve(),a.promise));let c=`${this.clientUrl}routing/v1/ipns/${t}`;try{await s.promise;let l=tn(r),u={method:"PUT",headers:{"Content-Type":"application/vnd.ipfs.ipns-record"},body:l,signal:i},f=await this.#e(c,u);if(yt("putIPNS PUT %s %d",c,f.status),f.status!==200)throw new Xt("PUT ipns response had status other than 200")}catch(l){throw yt.error("putIPNS PUT %s error:",c,l.stack),l}finally{i.clear(),a.resolve(),yt("putIPNS finished: %c",t)}}#t(t){try{let r=[],n=t.Addrs?.map(Gr)??[];return t.Protocols!=null&&r.push(...t.Protocols),t.Protocol!=null&&(r.push(t.Protocol),delete t.Protocol),{...t,Schema:"peer",ID:wc(t.ID),Addrs:n,Protocols:r}}catch(r){yt.error("could not conform record to peer schema",r)}}#r(t,r,n){if(r!=null||this.filterAddrs!=null){let o=r?.join(",")??this.filterAddrs?.join(",")??"";o!==""&&t.searchParams.set("filter-addrs",o)}if(n!=null||this.filterProtocols!=null){let o=n?.join(",")??this.filterProtocols?.join(",")??"";o!==""&&t.searchParams.set("filter-protocols",o)}}async#e(t,r){let n=r.method??"GET",o=`${n}-${t}`;if(n==="GET"){let c=await this.cache?.match(t);if(c!=null){if(parseInt(c.headers.get("x-cache-expires")??"0",10)>Date.now())return yt("returning cached response for %s",o),c;await this.cache?.delete(t)}}let i=this.inFlightRequests.get(o);if(i!=null){let c=await i;return yt("deduplicating outgoing request for %s",o),c.clone()}let s=fetch(t,r).then(async c=>{if(this.cache!=null&&c.ok&&n==="GET"){let l=Date.now()+this.cacheTTL,u=new Headers(c.headers);u.set("x-cache-expires",l.toString());let f=new Response(c.clone().body,{status:c.status,statusText:c.statusText,headers:u});await this.cache.put(t,f)}return c}).finally(()=>{this.inFlightRequests.delete(o)});return this.inFlightRequests.set(o,s),await s}};function cp(e,t={}){return new yo(new URL(e),t)}return uf(up);})();
/*! Bundled license information:

@noble/hashes/esm/utils.js:
  (*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/utils.js:
@noble/curves/esm/abstract/modular.js:
@noble/curves/esm/abstract/curve.js:
@noble/curves/esm/abstract/edwards.js:
@noble/curves/esm/ed25519.js:
@noble/curves/esm/abstract/weierstrass.js:
@noble/curves/esm/_shortw_utils.js:
@noble/curves/esm/secp256k1.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)
*/
return HeliaDelegatedRoutingV1HttpApiClient}));
//# sourceMappingURL=index.min.js.map
